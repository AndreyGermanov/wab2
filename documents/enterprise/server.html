<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>








<meta content="text/html; charset=UTF-8" http-equiv="content-type" /><title>server</title></head><body>
<div style="text-align: justify;">
<h1>Управление сервером</h1>

</div>
<div style="text-align: justify;">Для управления системой сервера предназначен Web-интерфейс Webmin,
который содержит набор модулей для выполнения стандартных функций
управления любой системой, основанной на GNU/Linux. Перед тем как
погружаться в
управление следует иметь в виду, что основная задача сервера
заключается в запуске виртуальных машин и управлении ими. Поэтому сама
система минимальна, в ней не запущено ничего лишнего и особой настройки
она не требует. В подавляющем большинстве случаев достаточно <a onclick='parent.obj.go_to("4.2.1.4",true,event)' href="null">изменить
пароль пользователя root</a> и <a onclick='parent.obj.go_to("4.2.3",true,event)' href="null">настройки подключения сервера к локальной
сети</a>.<br />
</div>



<br />
<div style="text-align: justify;">
<div style="text-align: justify;">
В этом разделе мы кракто рассмотрим все модули Web-интерфейса Webmin и
остановимся подробнее на модулях, которые действительно нужно
использовать при администрировании данного сервера.<br />
</div>
<br />
<div style="text-align: justify;">Последнюю часть раздела мы посвятим
обзору средств, предназначенных для решения проблем с сервером и для
восстановления системы и данных сервера после серьезных сбоев.<br />
</div>
</div>

<br />
<div style="text-align: justify;">
<h2><a name="p1">
Подключение к интерфейсу управления</a></h2>

</div>

<a name="p1"><br />
</a><div style="text-align: justify;">
<a name="p1">После нажатия по значку "<span style="font-weight: bold;">Сервер</span>" в </a><a onclick='parent.obj.go_to("2.1",true,event)' href="null">Панели управления</a> в первый раз, в новом окне появляется предупреждение:<br />
</div>



<br />


<div style="text-align: center;"><img alt="Недоверенное соединение" src="img/https.png" /><br />
</div>


<br />

<div style="text-align: justify;">Интерфейс взаимодействует с рабочей станцией администратора по
зашифрованному каналу, по протоколу SSL. Такое сообщение появляется при
первом подключении браузера к защищенному ресурсу. Необходимо нажать "<span style="font-style: italic;">Я
понимаю риск</span>" и затем кнопку "<span style="font-style: italic;">Добавить исключение</span>". Появится окно
добавления исключения:<br />
</div>



<br />


<div style="text-align: center;"><img style="width: 512px; height: 508px;" src="img/except.png" alt="except.png" /><br />
</div>


<br />
<div style="text-align: justify;">


В этом окне нужно поочередно нажать кнопки "<span style="font-style: italic;">Получить сертификат</span>" и
затем "<span style="font-style: italic;">Подтвердить исключение безопасности</span>".<br />
</div>

<br />
<div style="text-align: justify;">
Далее появится форма для входа в интерфейс Webmin.<br />
</div>

<br />
<div style="text-align: center;"><img src="img/webmin_logon.png" alt="webmin_logon.png" /><br />
</div>
<br />
<div style="text-align: justify;">
Вход в Webmin осуществляется от имени системного пользователя root, пароль которого по умолчанию 111111.<br />
</div>


<div style="text-align: justify;">
<h2><a name="p2">
Описание интерфейса</a></h2>

</div>
<div style="text-align: justify;"><a name="p2">Вверху находится список разделов интерфейса. <br />
</a></div>



<a name="p2"><br />
</a><div style="text-align: center;"><a name="p2"><img src="img/webmin_chapters.png" alt="webmin_chapters.png" /><br />
</a></div>
<a name="p2"><br />
</a><div style="text-align: justify;">
<a name="p2">При выборе раздела, под ним появляется набор значков модулей, которые входят в этот раздел.<br />
</a></div>

<a name="p2"><br />
</a><div style="text-align: justify;">
<a name="p2">Например, так выглядит список модулей раздела "<span style="font-weight: bold;">Система</span>".<br />
</a></div>

<a name="p2"><br />
</a><div style="text-align: center;"><a name="p2"><img src="img/webmin_system.png" alt="webmin_system.png" /><br />
<br />
</a><div style="text-align: left;">
<div style="text-align: justify;"><a name="p2">Далее мы рассмотрим все разделы, кроме
раздела "Webmin", который предназначен для настройки самого интерфейса
Webmin. Большинство модулей мы рассмотрим кратко, потому что
вероятность того, что потребуется глубокое изменение конфигурации с
помощью этих модулей довольно мала и поэтому мы не перегружаем
руководство такими подробностями. Если вы все-таки считаете, что
необходима серьезная настройка и вас интересует подробное описание
какого-либо конкретного модуля Webmin, напишите об этом по адресу
info@lvacompany.ru и мы пришлем вам подробное описание на русском языке
любого модуля Webmin.<br />
</a></div>


<div style="text-align: justify;">
<h3><a name="p3">
Раздел "Система"</a></h3>

</div>


<div style="text-align: justify;">
<a name="p3">Раздел "Система" включает набор модулей для настройки служб, которые обычно по умолчанию есть в любой системе на базе GNU/Linux.<br />
</a></div>


<div style="text-align: justify;">
<h4><a name="p4">
Модуль "Загрузка и завершение работы системы"</a></h4>

</div>
<div style="text-align: justify;"><a name="p4">Данный модуль позволяет управлять списком процессов, которые могут
выполняться при загрузке системы. Каждый процесс это скрипт,
расположенный на сервере в каталоге /etc/init.d. Этот модуль отображает
список всех таких файлов в виде таблицы и позволяет для каждого скрипта
указывать, будет ли он выполняться при загрузке системы или нет. Также
с помощью этого модуля можно запускать скрипты и останавливать прямо в
текущий момент времени, а также создавать свои собственные скрипты.<br />
</a></div>



<a name="p4"><br />
</a><div style="text-align: justify;">
<a name="p4">У этого модуля есть еще одна полезная функция. С его помощью можно
перезагрузить или выключить сервер, нажав соответственно кнопки
"<span style="font-weight: bold;">Перезагрузить систему</span>" или "<span style="font-weight: bold;">Завершить работу системы</span>", которые
находятся внизу страницы.<br />
</a></div>


<div style="text-align: justify;">
<h4>
<a name="p5">Модуль "Менеджер ПО"</a></h4>

</div>
<div style="text-align: justify;"><a name="p5">Является графическим интерфейсом к менеджеру пакетов программного
обеспечения APT. С помощью этого модуля можно устанавливать новые
пакеты в систему, просматривать список установленных пакетов, удалять
пакеты, а также определять принадлежность файла, находящегося в системе
к определенному пакету.<br />
</a></div>



<div style="text-align: justify;">
<h5><a name="p6">
Работа с установленными пакетами </a></h5>

</div><a name="p6">В самом верху находится панель для работы с установленными пакетами.<br />



<br />
</a><div style="text-align: center;"><a name="p6"><img src="img/find_packages.png" alt="find_packages.png" /><br />
</a></div>
<a name="p6"><br />
</a><div style="text-align: justify;">
<a name="p6">Установленный в системе пакет можно найти двумя способами:<br />
</a></div>

<a name="p6"><br />
1. Ввести его название в поле ввода и нажать кнопку "<span style="font-weight: bold;">Искать пакет:"</span><br />
2. Нажать кнопку "<span style="font-weight: bold;">Дерево пакетов</span>", появится список всех установленных
пакетов, сгруппированных по алфавиту, из которого можно выбрать нужный
пакет<br />
<br />
</a><div style="text-align: justify;">
<a name="p6">Далее, выбрав нужный пакет, появится форма информации о нем, в которой
в частности можно увидеть, какие файлы появились в системе после
установки этого пакета, нажав кнопку "<span style="font-weight: bold;">Посмотреть список файлов</span>". Также
можно удалить пакет, нажав в этой форме кнопку "<span style="font-weight: bold;">Удалить</span>".<br />
</a><div style="text-align: justify;">
<h5><a name="p7"> Установка новых пакетов</a></h5>

</div><a name="p7">Ниже находится форма "<span style="font-weight: bold;">Установить новый пакет</span>", предлагающая четыре варианта установки новых пакетов программ в систему:<br />


</a></div>

<a name="p7"><br />
</a><div style="text-align: center;"><a name="p7"><img src="img/install_packages.png" alt="install_packages.png" /><br />
</a></div>
<a name="p7"><br />
</a><div style="text-align: justify;">
<a name="p7">В этой форме нужно установить переключатель в нужное положение,
заполнить поле ввода напротив этого переключателя и нажать кнопку
"<span style="font-weight: bold;">Установить</span>":<br />

</a></div>
<ul>
<a name="p7">  </a><li><a name="p7">"<span style="font-weight: bold;">Из локального файла</span>" - устанавливает пакет из файла с
расширением deb, который уже находится на сервере. В поле ввода нужно
указать полный путь к этому файлу</a></li>
<a name="p7">  </a><li><a name="p7">"<span style="font-weight: bold;">Из
загруженного файла</span>" - позволяет установить пакет, находящийся
на локальном компьютере, с помощью которого вы в данный момент
администрируете Webmin.Нужно нажать кнопку "<span style="font-weight: bold;">Обзор</span>" и выбрать файл
пакета с расширением .deb, который нужно установить. Затем, при
установке, Webmin загрузит этот пакет с вашего компьютера на сервер и
установит. </a></li>
<a name="p7">  </a><li><a name="p7">"<span style="font-weight: bold;">С ftp или http URL</span>" - устанавливает пакет, расположенный по
указанному адресу в Интернете. В поле ввода нужно ввести полный путь к
файлу пакета с расширением .deb.</a></li>
<a name="p7">  </a><li><a name="p7">"<span style="font-weight: bold;">Пакеты из APT</span>" - позволяет найти и установить пакеты из
репозитория пакетов, на использование которого настроена данная
система. По умолчанию используется репозиторий, находящийся на сервере
ЛВА. Он основан на репозитории Debian и полностью с ним совместим. Но
некоторые пакеты в нем содержат исправления, необходимые для корректной
работы наших серверов, а также дополнительные полезные пакеты, которых
у Debian пока нет. В поле ввода нужно указать название пакета (а не
файла пакета с расширением "deb"). Для удобства есть кнопка "<span style="font-weight: bold;">Искать в
APT ..</span>", нажав на которую можно запустить поиск пакетов по ключевому
слову.</a></li>
</ul>
<div style="text-align: justify;">
<h5><a name="p8">
Определение принадлежности файла к пакету</a></h5>




<a name="p8">Ниже находится форма, которая может быть полезна, если вы нашли на
сервере какой-то файл и хотите узнать, к какому пакету он относится.<br />
</a></div>

<a name="p8"><br />
</a><div style="text-align: center;"><a name="p8"><img src="img/find_package_by_file.png" alt="find_package_by_file.png" /><br />
</a></div>
<a name="p8"><br />
</a><div style="text-align: justify;">
<a name="p8">Укажите в поле ввода полный путь к файлу и нажмите кнопку "<span style="font-weight: bold;">Искать</span>".
Если указанный файл появился в системе в результате установки пакета,
то информация об этом пакете появится на экране и вы сможете узнать о
нем подробнее и при необходимости удалить.<br />
</a><h5><a name="p9">

Обновление пакетов</a></h5>


<a name="p9">Ниже находится панель, позволяющая обновить систему из репозитория.<br />
</a></div>

<a name="p9"><br />
</a><div style="text-align: center;"><a name="p9"><img src="img/system_update.png" alt="system_update.png" /><br />
</a></div>
<a name="p9"><br />
</a><div style="text-align: justify;">
<a name="p9">Менеджер пакетов APT хранит список доступных для обновления пакетов
локально на сервере. Следовательно при запросе списка пакетов,
доступных для обновления и установки, он не обращается к репозиторию, а
смотрит свой локальный список, что ускоряет его работу. Однако
репозиторий обновляется и поэтому нужно время от времени
синхронизировать этот список с репозиторием. С помощью этой панели
можно просто синхронизировать список доступных пакетов с репозиторием
не обновляя их. Для этого нужно установить "Да" напротив параметра
"<span style="font-weight: bold;">Пересинхронизировать список пакетов (update)</span>", а остальные
переключатели оставить в положениях по умолчанию, как показано на
рисунке.<br />

<br />

Если же нужно выполнить обновление системы, то кроме обновления списка
пакетов нужно установить переключатель "<span style="font-weight: bold;">Upgrade mode</span>" в одну из позиций:<br />
</a></div>


<ul>
<a name="p9">  </a><li><span style="font-weight: bold;"><a name="p9">Distribution upgrade (upgrade-dist)</a></span><a name="p9"> - обновление дистрибутива
системы. Необходимо только если вышел новый релиз дистрибутива
операционной системы, установленнойна сервере и вы хотите перейти на этот новый релиз <br />
  </a></li>
<a name="p9">  </a><li><span style="font-weight: bold;"><a name="p9">Normal</a></span><a name="p9"> - обычное обновление всех пакетов в рамках текущей версии дистрибутива</a></li>
</ul>
<div style="text-align: justify;">
<a name="p9">Далее нажмите кнопку "<span style="font-weight: bold;">Обновить</span>" и наблюдайте за процессом обновления и
выводом команд обновления пакетов (apt-get update, apt-get upgrade и
apt-get dist-upgrade). Если вы не хотите видеть весь вывод этих команд,
а только хотите знать, какие пакеты обновились, перед обновлением
установите переключатель "<span style="font-weight: bold;">Только показывать обновляемые пакеты</span>" в
положение "<span style="font-weight: bold;">Да</span>".<br />
</a><h4><a name="p10">

Модуль "Обновление программных пакетов"</a></h4>


<a name="p10">Данный модуль позволяет настроить режим автоматического обновления
системы, а также, как и прошлый модуль, позволяет получить список
пакетов, доступных для установки.<br />
</a></div>

<a name="p10"><br />
</a><div style="text-align: center;">
<a name="p10">&nbsp;<img src="img/package_updates_list.png" alt="package_updates_list.png" /><br />
</a></div>

<a name="p10"><br />
</a><div style="text-align: justify;">
<a name="p10">С помощью этой формы можно увидеть список установленных пакетов,
пакетов доступных для обновления в данный момент или только новых
пакетов. Для получения нужного списка, воспользуйтесь соответствующими
гиперссылками "<span style="font-weight: bold;">Установленные</span>", "<span style="font-weight: bold;">Только обновления</span>" или "<span style="font-weight: bold;">Только новые</span>".
Можно ограничить список, введя в поле "<span style="font-weight: bold;">Найти пакеты</span>" критерий поиска
пакетов, то есть, подстроку, встречающуюся в их наименованиях.<br />

<br />

Кнопка "<span style="font-weight: bold;">Обновить список доступных пакетов</span>" выполняет синхронизацию локального списка пакетов с репозиторием.<br />
</a></div>

<a name="p10"><br />
</a><div style="text-align: justify;">
<a name="p10">Ниже находится форма "<span style="font-weight: bold;">Опции запланированных проверок</span>", которая управляет автоматическим обновлением системы:<br />
</a></div>

<a name="p10"><br />
</a><div style="text-align: center;"><a name="p10"><img src="img/system_update_form.png" alt="system_update_form.png" /><br />
</a></div>
<a name="p10"><br />
</a><div style="text-align: justify;">
<a name="p10">В этой форме указывается, проверять ли обновления автоматически и что
делать в случае, если при автоматической проверке обнаружены обновления.<br />
</a></div>

<a name="p10"><br />
</a><div style="text-align: justify;">
<a name="p10">Переключатель "<span style="font-weight: bold;">Проверять обновления по расписанию</span>" позволяет указать,
проверять ли обновления автоматически и с какой периодичностью их
проверять, то есть каждый: "<span style="font-weight: bold;">Час</span>", "<span style="font-weight: bold;">День</span>" или "<span style="font-weight: bold;">Неделя</span>" . <br />
</a></div>

<a name="p10"><br />
</a><div style="text-align: justify;">
<a name="p10">Если обнаружены обновления, можно отправять оповещения об этом
системному администратору по указанному в поле "<span style="font-weight: bold;">Отправлять отчеты об
обновлениях на email</span>".<br />
</a></div>

<a name="p10"><br />
</a><div style="text-align: justify;">
<a name="p10">Если обнаружены обновления, можно выполнить одно из действий: <br />
</a></div>

<a name="p10"><br />
</a><ul>
<a name="p10">  </a><li><span style="font-weight: bold;"><a name="p10">Просто уведомить</a></span><a name="p10"> - отправить отчет о доступных обновлениях по указанному выше e-mail</a></li>
<a name="p10">  </a><li><span style="font-weight: bold;"><a name="p10">Устанавливаеть обновления безопасности</a></span><a name="p10"> - устанавливать только обновления, отмеченные как "Обновления безопасности"</a></li>
<a name="p10">  </a><li><span style="font-weight: bold;"><a name="p10">Устанавливать лубые обновления</a></span><a name="p10"> - устанавливать все обнаруженные обновления</a></li>
</ul>
<div style="text-align: justify;">
<a name="p10">После внесения изменений в форму нажмите кнопку "<span style="font-weight: bold;">Сохранить</span>".<br />
</a></div>


<div style="text-align: justify;">
<h4><a name="p11">
Модуль "Пароли"</a></h4>

</div>


<div style="text-align: justify;">
<a name="p11">С помощью этого модуля можно изменить пароль любого пользователя,
заведенного в системе. В частности, крайне необходимо изменить пароль
пользователя root. Для этого щелкните левой кнопкой мыши по этому
пользователю (первый в списке), в появившейся форме введите дваждый
новый пароль<br />
</a></div>

<a name="p11"><br />
</a><div style="text-align: center;"><a name="p11"><img src="img/change_root_password.png" alt="change_root_password.png" /><br />
</a></div>
<a name="p11"><br />
</a><div style="text-align: justify;">
<a name="p11">и нажмите кнопку "<span style="font-weight: bold;">Изменить</span>". Остальные настройки можно оставить в том виде, как они есть по умолчанию.<br />
</a></div>


<div style="text-align: justify;">
<h4><a name="p12">
Модуль "Пользователи и группы"</a></h4>

</div>


<div style="text-align: justify;">
<a name="p12">С помощью этого модуля можно управлять списком пользователей и групп ,
заведенных в системе: создавать новых пользователей, изменять параметры
существующих, а также удалять пользователей и группы, "отключать"
(disable) и "включать" (enable) возможность входа пользователей в
систему.<br />
</a></div>

<a name="p12"><br />
</a><div style="text-align: justify;">
<a name="p12">Для работы со списком пользователей нужно перейти на закладку
"<span style="font-weight: bold;">Локальные пользователи</span>". Для работы со списком групп нужно перейти на
закладку "<span style="font-weight: bold;">Локальные группы</span>". <br />
</a></div>

<a name="p12"><br />
</a><div style="text-align: justify;">
<a name="p12">Форма для ввода параметров пользователя или группы интуитивно ясна. Для каждого пользователя указывается:<br />
</a></div>


<ul>
<a name="p12">  </a><li><a name="p12">Логин</a></li>
<a name="p12">  </a><li><a name="p12">Числовой идентификатор</a></li>
<a name="p12">  </a><li><a name="p12">Путь к домашнему каталогу</a></li>
<a name="p12">  </a><li><a name="p12">Командный интерпретатор (рекомендуем /bin/bash)</a></li>
<a name="p12">  </a><li><a name="p12">Пароль и стандартные параметры, связанные с ним</a></li>
<a name="p12">  </a><li><a name="p12">Принадлежность пользователя к группам: основная группа и список дополнительных</a></li>
</ul>
<div style="text-align: justify;">
<a name="p12">Также из формы параметров пользователя можно прочитать почту, которая находится в его локальном почтовом ящике.<br />
</a></div>

<a name="p12"><br />
</a><div style="text-align: justify;">
<a name="p12">Для удаления пользователей или группы нужно включить флажки в строках с этими пользователями и нажать кнопку "<span style="font-weight: bold;">Delete Selected</span>". <br />
</a></div>

<a name="p12"><br />
</a><div style="text-align: justify;">
<a name="p12">Для отключения возможности входа пользователей в систему, нужно
включить флажки в строках с этими пользователями и нажать кнопку
"<span style="font-weight: bold;">Disable Selected</span>". Чтобы вернуть возможность доступа, нужно нажать
кнопку "<span style="font-weight: bold;">Enable Selected</span>".<br />
</a></div>

<a name="p12"><br />
</a><div style="text-align: justify;">
<a name="p12">Также с помощью этого модуля можно посмотреть, какие пользователи в
данный момент вошли на сервер, нажав кнопку "<span style="font-weight: bold;">Пользователи, вошедшие в
систему</span>" или историю входов в систему указанного пользователя, нажав
кнопку "<span style="font-weight: bold;">Показать последние заходы в систему</span>".<br />
</a></div>


<div style="text-align: justify;">
<h4><a name="p13">
Модуль "Процессы"</a></h4>

</div>
<div style="text-align: justify;"><a name="p13">Это очень важный модуль, по своей функциональности напоминающий
"Системный монитор". Данный модуль отображает список процессов,
запущенных в системе сервера в данный момент времени. Он позволяет
узнавать информацию о ресурсах которые потребляет каждый процесс (или
все вместе взятые), какие файлы и сетевые соединения он открывает. С
помощью этого модуля можно изменять приоритет каждого процесса,
завершать запущенные процессы мягко или принудительно, а также, при
необходимости, запускать новые процессы. На основании данных этого
модуля можно судить об общей загрузке системы, в частности о том,
достаточно ли оперативной памяти или вычислительной мощности
процессоров для выполнения всех задач и на основании этой информации
принимать меры: либо оптимизировать или удалять процессы, либо
апгрейдировать сервер.<br />
</a></div>




<div style="text-align: justify;">
<h5><a name="p14">
Таблица процессов</a></h5>

</div>


<div style="text-align: justify;">
<a name="p14">Список гиперссылок "<span style="font-weight: bold;">Вид</span>:" в самом верху позволяет управлять видом таблицы процессов<br />
</a></div>

<a name="p14"><br />
</a><div style="text-align: center;"><a name="p14"><img src="img/pid_list.png" alt="pid_list.png" /><br />
</a></div>
<a name="p14"><br />
</a><ul>
<a name="p14">  </a><li><span style="font-weight: bold;"><a name="p14">PID</a></span><a name="p14"> - отображает таблицу,
сгруппированную по идентификаторам процессов (PID). По этой таблице
можно видеть иерархическую связь между процессами. Как известно, все
процессы являются потомками основного процесса init, имеющего
идентификатор 1. Этот процесс является корнем, из которого исходят все
остальные процессы. В следующих колонках таблицы показан пользователь,
от имени которого был запущен процесс, время в которое он был запущен и команда, запустившая его.</a></li>
<a name="p14">  </a><li><span style="font-weight: bold;"><a name="p14">Пользователи</a></span><a name="p14"> - отображает эту же таблицу процессов, но сгруппированную по пользователям, которые запустили процессы
Большинство процессов запускает сама система от имени системных
пользователей. Самое большое количество процессов запущено от имени
пользователя root. Также есть процессы запущенные от имени аналогичных
пользователей: daemon, statd, messagebus и postfix (внутренняя почтовый
агент). Панель управления работает под управлением Web-сервера
Apache, который в свою очередь запущен от имени пользователя www-data.
Колонки у таблицы процессов такие же, только вместо колонки "Владелец"
показана колонка "Использование CPU", в которой указано процент
процессорного времени, которое использует каждый процесс.</a></li>
<a name="p14">  </a><li><span style="font-weight: bold;"><a name="p14">Память</a></span><a name="p14"> - это более полезная таблица. Она показывает таблицу, отсортированную по колонке "<span style="font-weight: bold;">Размер</span>"
по убыванию. Эта колонка показывает, сколько памяти потребляет каждый
процесс. Кроме этого, вверху отображается общее количество физической и
виртуальной памяти, а также, сколько памяти свободно. В идеале
физическая память никогда не должна быть занята полностью, а
виртуальная память должна быть свободна. Если система начала
использовать виртуальную память, это очень плохой показатель. Это в
итоге может привести к ситуации, которая называется "swap-спиралью".
Это очень серьезная ловушка, в которую может попасть система, из за
нескольких процессов, запрашивающих большее количество памяти, чем
физически доступно. Если физической памяти не достаточно, а процессам
нужно еще больше, они будут требовать больше и ядро системы будет
предоставлять ее из виртуальной памяти (раздела подкачки). Проблема
заключается в том, что скорость жесткого диска значительно ниже
скорости физической оперативной памяти и может получиться так, что
процессы будут требовать память быстрее, чем ядро сможет ее получать с
жесткого диска. Если таких процессов будет несколько, то ядро будет
переключаться с одного на другой и не успевать обслуживать каждый из
них. Визуально swap-спираль можно увидеть по "бешеной активности"
индикатора жесткого диска на системном блоке сервера.&nbsp; По мере
раскручивания swap-спирали, ядро постепенно сбрасывает из физической
памяти на жесткий диск данные, которые используют обычные, менее
требовательные к ресурсам процессы. Все это делается чтобы выделить память этим
нескольким, "прожорливым" процессам, которые упоминались ранее. В результате
критически важные системные службы станут недоступны и система может
полностью перестать реагировать на команды, а индикатор жесткого диска
будет постоянно светиться, говоря о 100%-й загрузке системы. Чтобы уйти
от этой ситуации, нужно найти процессы, потребляющие максимальное
количество памяти, завершить их, дать ядру "отдохнуть", чтобы
активность жесткого диска уменьшилась и виртуальная память
освободилась. Затем нужно запустить эти процессы снова и наблюдать за
ними. Если ситуация начнет развиваться по такому же сценарию, можно
попробовать снизить приоритет этих процессов или разбираться с их
природой. Возможно они неоптимально работают. Если ничего не помогает,
нужно увеличить количество физической оперативной памяти. <br />
</a></li></ul>
<div style="text-align: justify;"><a name="p14">Благодаря тому, что на сервере
используются технологии виртуализации, swap-спираль на сервере не
возникнет и не выведет систему из строя. Для каждой виртуальной машины
выделяется строго определенное количество памяти и "прожорливые"
процессы, которые в ней будут находиться, не смогут занять больше, чем
им выделено и отнять память у критически важных системных процессов.
Сервер не зависнет и жесткий диск не будет показывать 100%-ную
загрузку, что, возможно, продлит его жизнь. Однако виртуальные
swap-спирали могут возникать внутри виртуальных машин, если этим
виртуальным машинам будет выделено меньше памяти, чем требуется.<br />
</a></div>
<ul>

<a name="p14">  </a><li><span style="font-weight: bold;"><a name="p14">CPU</a></span><a name="p14"> - таблица,
аналогичная прошлой, но она отображает, насколько каждый процесс
загружает процессор. Также, вверху отображается строка "Средняя
загрузка CPU", которая показывает среднюю загрузку процессора за
последние 5, 10 и 15 минут. Средняя загрузка это число, показывающее
среднее количество процессов, ожидающих очереди своего исполнения за
указанный промежуток времени. Если система работает оптимально, очереди
не должно быть и это число не должно превышать единицы. Если это число
выше, нужно двигаться по такому же принципу, как было описано выше, то
есть анализировать процессы, потребляющие максимальное количество
процессорного времени.</a></li>
<a name="p14">  </a><li><span style="font-weight: bold;"><a name="p14">Поиск</a></span><a name="p14"> - позволяет отобрать в таблицу только такие процессы, которые соответствуют одному из выбранных критериев поиска:</a></li>
</ul>

<div style="text-align: center;"><a name="p14"><img src="img/find_processes.png" alt="find_processes.png" /><br />
</a></div>
<a name="p14"><br />
</a><ul>
<a name="p14">  </a><li><span style="font-weight: bold;"><a name="p14">Владелец</a></span><a name="p14"> - отображает процессы, запущенные от имени указанного пользователя</a></li>
<a name="p14">  </a><li><span style="font-weight: bold;"><a name="p14">Использует порт</a></span><a name="p14"> - отображает процессы, которые используют указанный порт и протокол</a></li>
<a name="p14">  </a><li><span style="font-weight: bold;"><a name="p14">Команда содержит</a></span><a name="p14"> - отображает процессы, в которых колонка "Команда" содержит указанную подстроку</a></li>
<a name="p14">  </a><li><span style="font-weight: bold;"><a name="p14">Использует IP-адрес</a></span><a name="p14"> - отображает процессы, которые взаимодействуют с указанным IP-адресом</a></li>
<a name="p14">  </a><li><span style="font-weight: bold;"><a name="p14">Загружает CPU больше</a></span><a name="p14"> - позволяет узнать наиболее "прожорливые" процессы</a></li>
<a name="p14">  </a><li><span style="font-weight: bold;"><a name="p14">Использует файловую систему</a></span>
<a name="p14">- отображает процессы, которые используют файлы в указанной файловой
системе. Очень полезно запускать поиск по этому критерию прежде чем
отмонтировать файловую систему</a></li>
<a name="p14">  </a><li><span style="font-weight: bold;"><a name="p14">Использует файл</a></span><a name="p14"> - отображает процессы, использующие указанный файл</a></li>
</ul>
<div style="text-align: justify;">
<a name="p14">Флажок "<span style="font-weight: bold;">Игнорировать процесс</span>, <span style="font-weight: bold;">выполняющий этот поиск</span>" исключает из списка процессов процесс Webmin.<br />
</a></div>

<a name="p14"><br />
</a><div style="text-align: justify;">
<a name="p14">Также с помощью закладки "<span style="font-weight: bold;">Выполнить</span>" можно запустить новый процесс, от имени указанного пользователя как в фоновом, так и в блокирующем режиме.<br />
</a></div>

<h5><a name="p15">
Управление процессом</a></h5>


<div style="text-align: justify;">
<a name="p15">Каждый процесс в таблице доступен для изменения его свойств. Нужно просто щелкнуть мышью по его идентификатору (колонка <span style="font-weight: bold;">PID</span>).<br />
</a></div>

<a name="p15"><br />
</a><div style="text-align: justify;">
<a name="p15">В форме свойств процесса можно изменить его приоритет (поле "<span style="font-weight: bold;">Приоритет nice</span>").
Чем ниже приоритет, тем меньше он имеет прав на использование памяти и
процессорного времени. Чем выше число, указанное в этом поле, тем ниже
приоритет. Следовательно -20 это самый высокий приоритет, а 20 - самый
низкий. По умолчанию обычные пользовательские процессы запускаются со
средним приоритетом - 0. Также можно установить приоритет на
использование жесткого диска (<span style="font-weight: bold;">IO приоритет</span>). Он измеряется от 0 (высокий приоритет) до 7 (низкий приоритет).<br />
</a></div>

<a name="p15"><br />
</a><div style="text-align: justify;">
<a name="p15">Под формой есть набор кнопок, позволяющих давать процессу различные команды<br />

</a></div>
<ul>
<a name="p15">  </a><li><span style="font-weight: bold;"><a name="p15">Послать сигнал</a></span><a name="p15"> - послать процессу указанный в списке справа от кнопки сигнал</a></li>
<a name="p15">  </a><li><span style="font-weight: bold;"><a name="p15">Завершить процесс </a></span><a name="p15">- попросить процесс завершить работу (мягкое завершение)</a></li>
<a name="p15">  </a><li><span style="font-weight: bold;"><a name="p15">Снять процесс</a></span><a name="p15"> - принудительно завершить процесс (жесткое завершение)</a></li>
<a name="p15">  </a><li><span style="font-weight: bold;"><a name="p15">Приостановить</a></span><a name="p15"> - временно поставить процесс на паузу</a></li>
<a name="p15">  </a><li><span style="font-weight: bold;"><a name="p15">Продолжить</a></span><a name="p15"> - возобновить работу процесса, ранее приостановленного</a></li>
<a name="p15">  </a><li><span style="font-weight: bold;"><a name="p15">Файлы и соединения</a></span>
<a name="p15">- отображает список файлов, которые в данный момент открыты данным
процессом и сетевые соединения, которые им в данный момент открыты</a></li>
</ul>
<div style="text-align: justify;">
<h4><a name="p16">Модуль "Расписание заданий Cron"</a></h4>

</div>

<div style="text-align: justify;"><a name="p16">Данный модуль управляет списком
заданий демона Cron. Задание Cron это команда, выполняемая
автоматически от имени определенного пользователя по расписанию. Данный
модуль позволяет управлять списком уже созданных заданий и добавлять
свои собственные.<br />
</a></div>
<a name="p16"><br />
</a><div style="text-align: justify;"><a name="p16">Для создания своего задания Cron,
нужно нажать гиперссылку "<span style="font-weight: bold;">Создать новое задание</span>" и заполнить форму
задания. В форме указывается:<br />
</a></div>

<ul>
<a name="p16">  </a><li><a name="p16">пользователь, от имени которого будет выполняться эта команда</a></li>
<a name="p16">  </a><li><a name="p16">команда, которая будет выполняться<br />
</a></li>
<a name="p16">  </a><li><a name="p16">текстовое описание выполняемой команды</a></li>
<a name="p16">  </a><li><a name="p16">расписание, по которому будет выполняться команда&nbsp;</a></li>
</ul>
<div style="text-align: justify;"><a name="p16">Расписание определяет периодичность
запуска команды. Оно может быть указано либо простым предложением, если
установить переключатель "<span style="font-weight: bold;">Simple shedule</span>" :<br />
</a></div>
<a name="p16"><br />
</a><ul>
<a name="p16">  </a><li><span style="font-weight: bold;"><a name="p16">Hourly</a></span><a name="p16"> - каждый час</a></li>
<a name="p16">  </a><li><span style="font-weight: bold;"><a name="p16">Daily (at midnight) </a></span><a name="p16">- каждый день в полночь</a></li>
<a name="p16">  </a><li><span style="font-weight: bold;"><a name="p16">Weekly (on Sunday)</a></span><a name="p16"> - каждую неделю в воскресенье</a></li>
<a name="p16">  </a><li><span style="font-weight: bold;"><a name="p16">Monthly (on the 1st)</a></span><a name="p16"> - первого числа каждого месяца</a></li>
<a name="p16">  </a><li><span style="font-weight: bold;"><a name="p16">Yearly (on 1st Jan)</a></span><a name="p16"> - 1 января</a></li>
<a name="p16">  </a><li><span style="font-weight: bold;"><a name="p16">When system boots</a></span><a name="p16"> - каждый раз при загрузке системы</a></li>
</ul>
<div style="text-align: justify;"><a name="p16">либо можно указать конкретные минуты,
часы, дни, месяцы и дни недели, в которые будет выполняться эта
команда, установив переключатель "Times and dates selected below ..." .<br />
</a></div>
<a name="p16"><br />
</a><div style="text-align: justify;"><a name="p16">Скорее всего вам не придется вручную
создавать задания Cron на этом сервере. Другие модули Webmin, в которых
настраивается что-либо, что должно выполняться автоматически (например,
модуль "</a><a onclick='parent.obj.go_to("4.2.1.3",true,event)' href="null"><span style="font-weight: bold;">Обновление программных пакетов</span></a>", рассматриваемый ранее) сами
создают задание Cron, пользуясь функциями этого модуля. <br />
</div>
<br />
<div style="text-align: justify;">Демон cron постоянно находится в памяти, просматривает список своих заданий и исполняет команды по расписанию.<br />
</div>
<h4><a name="p17">
Модуль "Резервное копирование"</a></h4>


<div style="text-align: justify;"><a name="p17">Данный модуль позволяет организовать
простой механизм резервного копирования данных, находящихся на сервере,
в том числе по расписанию. Этот модуль является стандартным модулем
Webmin, но на данном сервере скорее всего не уместно его использовать.
Данные этого сервера это виртуальные машины. Мы не рекомендуем
копировать
виртуальные машины автоматически по расписанию. Мы считаем, что прежде
чем создавать резервную копию виртуальной машины, ее нужно остановить,
причем, при остановке нужно наблюдать за тем, как она выгружается.
Затем желательно сделать еще один контрольный запуск и остановку
виртуальной машниы и копировать ее только если эти процессы выполнились
успешно. Конечно можно организовать эти процессы автоматически: с
помощью скрипта останавливать виртуальные машины и создавать резервные
копии. Но эта процедура может быть очень продолжительна по времени, она
может вообще не выполнится, если виртуальная машина правильно не
завершит свою работу или будет слишком долго ее завершать. В любом
случае нужно будет контролировать "вручную" этот процесс и результат
этого процесса. <br />
</a></div>
<a name="p17"><br />
</a><div style="text-align: justify;"><a name="p17">С помощью этого модуля можно
организовывать простые системы резервного копирования внутри
виртуальных серверов. Например, на базе этого модуля создана подсистема
резервного копирования контроллера LVA Business Server. В руководстве
пользователя по LVA Business Server есть подробное руководство
пользователя по этому модулю. <br />
</a></div>
<a name="p17"><br />
</a><div style="text-align: justify;"><a name="p17">Если Вы нашли достойное применение
этому модулю в рамках гипервизора, можете прочитать документацию по его
использованию в книге по LVA Business Server и использовать аналогично.
Если у вас нет этой книги, напишите по адресу info@lvacompany.ru и мы
вышлем вам PDF с нужными страницами этой книги.<br />
</a></div>

<div style="text-align: justify;">
<h4><a name="p18">Модуль "Системный журнал"</a></h4>

</div>
<div style="text-align: justify;"><a name="p18">С помощью этого модуля можно
просматривать журналы событий системы, которые записываются с помощью
демона syslog. Эти журналы обычно расположены в каталоге <span style="font-weight: bold;">/var/log</span> .<br />
</a></div>


<a name="p18"><br />
</a><div style="text-align: justify;"><a name="p18">Ниже приведены полезные журналы, которые нужно время от времени просматривать:<br />
</a></div>
<a name="p18"><br />
</a><ul>
<a name="p18">  </a><li><span style="font-weight: bold;"><a name="p18">/var/log/messages </a></span><a name="p18">- основной системный журнал, в который попадает большинство сообщений</a></li>
<a name="p18">  </a><li><span style="font-weight: bold;"><a name="p18">/var/log/syslog</a></span><a name="p18"> - аналогичен первому</a></li>
<a name="p18">  </a><li><span style="font-weight: bold;"><a name="p18">/var/log/daemon.log</a></span><a name="p18"> - журнал, в который записывают свои события различные дополнительные службы системы</a></li>
<a name="p18">  </a><li><span style="font-weight: bold;"><a name="p18">/var/log/kern.log </a></span><a name="p18">- журнал событий, связанных с ядром системы</a></li>
<a name="p18">  </a><li><span style="font-weight: bold;"><a name="p18">/var/log/dmesg</a></span><a name="p18"> - журнал&nbsp; сообщений ядра, появляющихся при загрузке системы</a></li>
<a name="p18">  </a><li><span style="font-weight: bold;"><a name="p18">/var/log/mail.err</a></span><a name="p18"> - журнал ошибок почтовой системы</a></li>
<a name="p18">  </a><li><span style="font-weight: bold;"><a name="p18">/var/log/mail.warn</a></span><a name="p18"> - журнал предупреждения почтовой системы</a></li>
<a name="p18">  </a><li><span style="font-weight: bold;"><a name="p18">/var/log/mail.info</a></span><a name="p18"> - журнал информационных сообщений почтовой системы</a></li>
<a name="p18">  </a><li><span style="font-weight: bold;"><a name="p18">/var/log/cron.log</a></span><a name="p18"> - журнал событий демона cron</a></li>
<a name="p18">  </a><li><span style="font-weight: bold;"><a name="p18">/var/log/auth.log </a></span><a name="p18">- журнал событий авторизации пользователей в системе</a></li>
</ul>
<div style="text-align: justify;">
<a name="p18">Также в список журанлов можно добавлять новые журналы, но мало вероятно, что это потребуется.<br />
</a></div>
<h4><a name="p19">
Модуль "Состояние системы и служб"</a></h4>


<div style="text-align: justify;"><a name="p19">Этот модуль позволяет установить
набор датчиков, используемых для мониторинга состояния различных частей
системы или установленных в ней служб. Каждый из датчиков является
заданием Cron, то есть, датчик, это команда, которая запускается в
определенное время. Если эта команда возвращает результат, отличный от
нуля, то считаеся что область, которую мониторит этот датчик дала сбой.
Оповещение об этом сбое отправляется системному администратору по
e-mail.<br />
</a></div>
<a name="p19"><br />
</a><div style="text-align: justify;"><a name="p19">Например, на сервере установлены
датчики, которые осуществляют мониторинг состояния всех
предустановленных виртуальных машин. Каждый датчик, это скрипт,
который, с помощью команды VBoxManage выясняет, запущена ли виртуальная
машина и если нет, возвращает отличный от нуля результат.<br />
</a></div>
<a name="p19"><br />
</a><div style="text-align: center;"><a name="p19"><img src="img/statusmonitorlist.png" alt="statusmonitorlist.png" /><br />
</a></div>
<a name="p19"><br />
</a><div style="text-align: justify;"><a name="p19">На этом изображении показан список
датчиков, установленных на LVA Enterprise Server по умолчанию. Эти
датчики показывают состояние виртуальных машин. В колонке "<span style="font-weight: bold;">Состояние</span>"
видно, что виртуальная машина Web не доступна. Важно определить
действие, которое должно происходить в то самый момент, когда зеленая
галочка становится красным крестиком. Системный администратор как можно
быстрее должен узнать, что это событие произошло. Для этого должен
осуществляться постоянный мониторинг, то есть, датчики должны
проверяться постоянно, а также, должен быть указан адрес электронной
почты админстратора, по которому будет приходить оповещение о сбое. Эти
две основные вещи можно указать, нажав на кнопку "<span style="font-weight: bold;">Плановая проверка</span>" и
заполнив форму параметров мониторинга.<br />
</a></div>

<div style="text-align: justify;">
<h5><a name="p20">Настройка параметров плановой проверки датчиков состояния</a></h5>

</div>
<div style="text-align: justify;"><a name="p20">При нажатии на кнопку "<span style="font-weight: bold;">Плановая проверка</span>" появляется форма настройки параметров мониторинга<br />
</a></div>


<a name="p20"><br />
</a><div style="text-align: center;"><a name="p20"><img src="img/statusmonitorshedule.png" alt="statusmonitorshedule.png" /><br />
</a></div>
<ul>
<a name="p20">  </a><li><span style="font-weight: bold;"><a name="p20">Плановая проверка </a></span><a name="p20">- осуществлять ли плановую проверку датчиков с помощью Cron</a></li>
<a name="p20">  </a><li><span style="font-weight: bold;"><a name="p20">Выполнять проверку каждые</a></span>
<a name="p20">- определяет, в какие минуты, часы и дни осуществлять плановую
проверку. Вы можете выделить несколько дней или часов, удерживая
клавишу Ctrl. Например, на изображении выделены все дни и все часы, и
указана 1 минута. Это значит что проверка датчиков будет выполняться каждую минуту </a></li>
<a name="p20">  </a><li><span style="font-weight: bold;"><a name="p20">Посылать почту при</a></span><a name="p20"> -
определяет, в каком случае отправлять оповещение администратору по
электронной почте. По умолчанию установлено при "<span style="font-weight: bold;">останове службы</span>", то
есть, только в момент, когда "зеленая галочка" переходит в "красный
крестик". Если установить переключатель при "<span style="font-weight: bold;">изменении состояния
службы</span>", то оповещения будут отправляться при любом изменении состояния
службы, то есть не только когда зеленая галочка переходит в красный
крестик, но и когда красный крестик переходит в зеленую галочку. Если
включить "<span style="font-weight: bold;">Всегда, когда служба остановлена</span>", то оповещение будет
отправляться не только в тот момент, когда служба останавливается, а
каждый раз, когда датчик будет обнаруживать сбой (в приведенном примере
это означает, что оповещение будет отправляться
каждую минуту, пока красный крестик не исчезнет)</a></li>
<a name="p20">  </a><li><span style="font-weight: bold;"><a name="p20">Отправлять отчет о сосоятинии на</a></span><a name="p20"> - адрес электронной почты, на который будут отправляться оповещения. <br />
  </a></li>
<a name="p20">  </a><li><span style="font-weight: bold;"><a name="p20">Поле From: почтового сообщения</a></span><a name="p20"> - адрес отправителя, который будет указываться в письме</a></li>
<a name="p20">  </a><li><span style="font-weight: bold;"><a name="p20">Посылать почту через</a></span><a name="p20"> -
каким образом отправлять оповещения, либо с помощью механизма Sendmail,
либо через указанный SMTP-сервер (этот SMTP-сервер должен принимать
письма от LVA Enterprise Server)</a></li>
<a name="p20">  </a><li><span style="font-weight: bold;"><a name="p20">Выводить отчет о состоянии номеру</a></span><a name="p20"> - отправлять оповещение по пэйджеру по указанному номеру</a></li>
<a name="p20">  </a><li><span style="font-weight: bold;"><a name="p20">Send SMS to</a></span><a name="p20"> - отправлять оповещение по SMS. Указывается провайдер и номер мобильного телефона</a></li>
</ul>
<div style="text-align: justify;">
<h5><a name="p21">Настройка шаблонов оповещений</a></h5>

</div>

<div style="text-align: justify;"><a name="p21">По умолчанию, служба мониторинга
состояния служб отправляет оповещения по стандартному шаблону, на
английскоя языке. Нажав на кнопку "<span style="font-weight: bold;">Edit Email Templates</span>"
можно создать шаблон письма, которое будет отправляться. Можно создать
несколько шаблонов и назначить каждому датчику свой шаблон письма.<br />
</a></div>
<a name="p21"><br />
</a><div style="text-align: center;"><a name="p21"><img src="img/emailtemplateslist.png" alt="emailtemplateslist.png" /><br />
</a></div>
<a name="p21"><br />
</a><div style="text-align: justify;"><a name="p21">На рисунке изображен список созданных
шаблонов. Можно отредактировать любой шаблон, щелкнув по его названию.
Можно удалить один или несколько шаблонов, включив флажки рядом с их
наименованиями и нажав кнопку "<span style="font-weight: bold;">Delete Selected Templates</span>".<br />
</a></div>
<span style="font-weight: bold;"><a name="p21"><br />
Создание нового шаблона оповещения</a></span><a name="p21"><br />



<br />
Чтобы добавить новый шаблон оповещения, нажмите гиперссылку "<span style="font-weight: bold;">Add new email template</span>".<br />
<br />
</a><div style="text-align: center;"><a name="p21"><img src="img/statusemailtemplateform.png" alt="statusemailtemplateform.png" /><br />
</a></div>
<a name="p21"><br />
</a><ul>
<a name="p21">  </a><li><span style="font-weight: bold;"><a name="p21">Template description</a></span><a name="p21"> - название шаблона</a></li>
<a name="p21">  </a><li><span style="font-weight: bold;"><a name="p21">Email message</a></span><a name="p21"> - тело соощения, которое отправляется по электронной почте</a></li>
<a name="p21">  </a><li><span style="font-weight: bold;"><a name="p21">SMS Message</a></span><a name="p21"> - текст сообщения, отправляемого по SMS</a></li>
<a name="p21">  </a><li><span style="font-weight: bold;"><a name="p21">Pager message</a></span><a name="p21"> - текст сообщения, отправляемого по пэйджеру</a></li>
</ul>
<a name="p21">В теле оповещения можно использовать следующие переменные:<br />
</a><ul>
<a name="p21">  </a><li><span style="font-weight: bold;"><a name="p21">${DESC}</a></span><a name="p21"> - при отправке оповещения заменяется на название шаблона оповещения</a></li>
<a name="p21">  </a><li><span style="font-weight: bold;"><a name="p21">${HOST}</a></span><a name="p21"> - при отправке оповещения заменяется на имя хоста (которое выдается командой hostname)</a></li>
<a name="p21">  </a><li><span style="font-weight: bold;"><a name="p21">${DATE}</a></span><a name="p21"> - при отправке оповещения заменяется на дату обнаружения сбоя</a></li>
<a name="p21">  </a><li><span style="font-weight: bold;"><a name="p21">${TIME}</a></span><a name="p21"> - при отправке оповещения заменяется на время обнаружения сбоя</a></li>
<a name="p21">  </a><li><span style="font-weight: bold;"><a name="p21">${STATUS}</a></span><a name="p21"> - при отправке
оповещения заменяется на состояние службы, за которой следит: Down -
опущена (красный крестик), Up - включена (зеленая галочка)<br />
  </a></li>
</ul>
<div style="text-align: justify;">
<a name="p21">Подробнее о подстановках можно прочитать, нажав на гиперссылку "<span style="font-weight: bold;">Instructions and substitutions</span>", которая находится над формой.<br />
</a></div>

<a name="p21"><br />
</a><div style="text-align: justify;"><a name="p21">После заполнения формы нажмите кнопку "<span style="font-weight: bold;">Создать</span>"
и созданный вами шаблон появится в списке. Теперь можно использовать
его при добавлении новых датчиков состояния системы или устанавливать в
качестве шаблона для существующих.<br />
</a></div>
<h5><a name="p22">
Создание своего датчика состояния</a></h5>


<div style="text-align: justify;"><a name="p22">Наконец, после того как мы настроили
систему мониторинга в целом и создали шаблоны оповещений разных типов,
мы подошли к созданию и настройке самих датчиков, которые будут
информировать о негативных изменениях в системе.<br />
</a></div>
<a name="p22"><br />
</a><div style="text-align: justify;"><a name="p22">Для содания нового датчика нужно выбать из списка тип датчика и нажать кнопку "<span style="font-weight: bold;">Добавить датчик</span>":<br />
</a></div>
<a name="p22"><br />
</a><div style="text-align: center;"><a name="p22"><img src="img/addmonitorbutton.png" alt="addmonitorbutton.png" /><br />
</a></div>
<a name="p22"><br />
</a><div style="text-align: justify;"><a name="p22">В конфигурации предусмотрено множество различных датчиков. Вот некоторые примеры:<br />
</a></div>
<a name="p22"><br />
Мониторинг состояния служб<br />
</a><ul>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">Dovecot IMAP/POP3 server </a></span><a name="p22">- состояние почтового сервера Dovecot</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">Mail Queue size</a></span><a name="p22"> - масимальный размер почтовой очереди</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">ProFTPD Server</a></span><a name="p22"> - состояние FTP-сервера ProFTPD</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">SSH Server</a></span><a name="p22"> - состояние сервера SSH</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">Веб-сервер Apache </a></span><a name="p22">- состояние Web-сервера Apache</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">Прокси-сервер Squid</a></span><a name="p22"> - состояние прокси-сервера Squid</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">Сервер DNS BIND</a></span><a name="p22"> - состояние DNS-сервера BIND</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">Сервер DHCP</a></span><a name="p22"> - состояние DHCP-сервера</a></li>
</ul>
<a name="p22">Файловая система<br />
</a><ul>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">Directory size</a></span><a name="p22"> - максимальный размер содержимого каталога</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">Disk Space Consumption</a></span><a name="p22"> - максимальная скорость заполнения жесткого диска</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">File Not Changed</a></span><a name="p22"> - проверка, изменился ли файл</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">Дисковое пространство</a></span><a name="p22"> - минимальное количество свободного пространства на жестком диске</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">Изменение файлов </a></span><a name="p22">- проверка изменения файла</a></li>
</ul>
<a name="p22">Состояние оборудования<br />
</a><ul>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">NUT UPS Status</a></span><a name="p22"> - состояние источника бесперебойного питания</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">RAID Device Status</a></span><a name="p22"> - состояние устройства RAID</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">Проверка SMART-диска</a></span><a name="p22"> - состояние жесткого диска после проведения SMART-теста</a></li>
</ul>
<a name="p22">Нагрузка системы<br />
</a><ul>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">Свободная память </a></span><a name="p22">- минимальное количество свободной оперативной памяти</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">Сетевой трафик </a></span><a name="p22">- максимальное количество трафика, проходящего через сетевой интерфейс (байт/с)</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">Средняя загрузка</a></span><a name="p22"> - предельная загрузка системы за последние 5, 10 и 15 минут (см. "Процессы")</a></li>
</ul>
<div style="text-align: justify;"><a name="p22">Также существует множество других
типов датчиков. У каждого датчика могут быть свои параметры. Однако все
они основаны на одном типе: "<span style="font-weight: bold;">Выполнить команду</span>".
Фактически датчик это команда, то есть скрипт, который выполняется,
используя при этом переданные ему параметры и в зависимости от
результатов возвращает либо нуль, либо значение отличное от нуля. Если
возвращается значение отличное от нуля, считается что датчик сработал и
в этом случае генерируется событие сбоя службы и появляется "красный
крестик", о чем может быть отправлено оповещение. Для каждого типа
датчика условия срабатывания разные. Допустим датчики состояния служб
срабатывают если служба останавливается, датчики, выполняющие
количественные измерения (например, "Свободная память") срабатывают,
если при проверке измеряемая величина вышла за пределы допустимого
значения. <br />
</a></div>
<a name="p22"><br />
</a><div style="text-align: justify;"><a name="p22">В качестве примера мы создадим простой датчик типа "<span style="font-weight: bold;">Серверы Samba</span>", который будет срабатывать при&nbsp; падении сервера Samba:<br />
</a></div>
<a name="p22"><br />
</a><div style="text-align: center;"><a name="p22"><img src="img/newstatusmonitor.png" alt="newstatusmonitor.png" /><br />
</a></div>
<a name="p22"><br />
<span style="font-weight: bold;">Настройка датчика</span><br />
</a><ul>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">Описание</a></span><a name="p22"> - название датчика</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">Плановая проверка включена ?</a></span>
<a name="p22">- определяет, включать ли датчик в плановую проверку и как реагировать
в случае если датчик сработал. По умолчанию все датчики включены в
плановую проверку, но можно изменить это, с помощью этой опции</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">Failures before reporting</a></span><a name="p22"> - количество срабатываний датчика до того, как оповещать о сбое</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">Notification methods</a></span><a name="p22"> - способы оповещения (обычно Email)</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">Also send email for this service to</a></span><a name="p22"> - дополнительный email</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">Template for messages</a></span><a name="p22"> - шаблон оповещения (из списка, который мы определили ранее)</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">Don't check if monitor is down</a></span>
<a name="p22">- не проверять, если до этого сработал указанный датчик. Например не
имеет смысла проверять датчик DNS, если до этого сработал датчик
остутствия подключения к сети</a></li>
</ul>
<span style="font-weight: bold;"><a name="p22">Commands to run</a></span><a name="p22"><br />
<br />
</a><div style="text-align: justify;"><a name="p22">Это дополнительный сервис,
позволяющий при срабатывании датчика выполнять определенные команды.
Это очень полезная возможность. Например, если по задумке сервер Samba
должен работать постоянно, можно сделать чтобы в случае срабатывания
датчика, говорящего о падении Samba, автоматически запускать Samba
снова. Для этого в поле "<span style="font-weight: bold;">При отключении датчика выполнять команду</span>"
указать "<span style="font-style: italic;">/etc/init.d/samba start</span>".<br />
</a></div>
<a name="p22"><br />
</a><ul>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">При отключении датчика выполнять команду </a></span><a name="p22">- команда, выполняемая если датчик сработал</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">При включении датчика выполнять команду</a></span><a name="p22"> - команда, которая выполняется перед тем, как запускать датчик</a></li>
<a name="p22">  </a><li><span style="font-weight: bold;"><a name="p22">If monitor times out, run command -</a></span><a name="p22"> команда, выполняемая если датчик завис при исполнении</a></li>
</ul>
<a name="p22"><br />
</a><div style="text-align: justify;">
<a name="p22">После заполнения формы нажмите "<span style="font-weight: bold;">Создать</span>" и вновь созданный датчик появится в списке.<br />
</a></div>

<a name="p22"><br />
</a><div style="text-align: justify;"><a name="p22">Таким образом можно установить любое
количество датчиков, что позволит мониторить все аспекты системы и даже
пробовать автоматически предпринимать какие-то действия, в случае
срабатывания датчиков, говорящих о сбоях различных служб. <br />
</a></div>
<h5><a name="p23">
Нестандартные датчики и их создание</a></h5>


<div style="text-align: justify;"><a name="p23">Кроме стандартных датчиков, мы в компании ЛВА написали ряд собственных датчиков. Их основой является тип датчика "<span style="font-weight: bold;">Выполнить команду</span>".
Например датчик "Состояние виртуальной машины" это такой датчик,
который выполняет команду "<span style="font-style: italic;">/root/vboxguestcheck.sh &lt;Имя виртуальной
машины&gt;</span>". Эта команда является скриптом, написанным на Bash. Этот
скрипт с помощью команды VBoxManage проверяет, запущена ли указанная
виртуальная машина в данный момент. Если виртуальная машина запущена,
скрипт возващает 0, а если нет, то скрипт возвращает 1 и датчик
срабатывает.<br />
</a></div>
<a name="p23"><br />
</a><div style="text-align: justify;"><a name="p23">Подобного рода датчики, которые
правильно проверяют состояние различных служб, таких как Samba, DNS,
LDAP или доступность Интернет установлены в различных серверах. Все эти
скрипты физически находятся в корне папки /root в виртуальных серверах.
Все эти скрипты являются OpenSource: вы можете их свободно использовать
и распространять.<br />
</a></div>
<a name="p23"><br />
</a><div style="text-align: justify;"><a name="p23">Посмотрите как заполнена форма такого
датчика (например датчик "Состояние виртуальной машины") и скрипт,
который этот датчик выполняет. Возможно вы самостоятельно сможете
написать скрипты, которые будут проверять все, что вам нужно (или
обратитесь к нам по адресу info@lvacompany.ru).<br />
</a></div>

<div style="text-align: justify;">
<h4><a name="p24">Модуль "Файловые системы"</a></h4>

</div>

<div style="text-align: justify;"><a name="p24">С помощью этого модуля можно
управлять всеми файловыми системами, которые в данный момент
примонтированы на сервере, а также создавать новые. <br />
</a></div>
<a name="p24"><br />
</a><div style="text-align: justify;"><a name="p24">При входе в модуль мы видим список
файловых систем, смонтированных в данный момент. Отображаются локальные
файловые системы размещенные на разделах дисков, а также файловые
системы разделов подкачки, виртуальные и сетевые файловые системы.<br />
</a></div>
<a name="p24"><br />
</a><div style="text-align: center;"><a name="p24"><img src="img/filesystems.png" alt="filesystems.png" /><br />
</a></div>
<a name="p24"><br />
</a><ul>
<a name="p24">  </a><li><span style="font-weight: bold;"><a name="p24">Подмонтирована как</a></span><a name="p24"> - точка монтирования, то есть, каталог, к которому примонтирована файловая система<br />
  </a></li>
<a name="p24">  </a><li><span style="font-weight: bold;"><a name="p24">Тип файловой системы</a></span><a name="p24"> -
тип файловой системы. По этому типу можно понять, является ли эта
файловая система локальной (ext4, ntfs и др.), виртуальной (tmpfs,
sysfs, proc) или сетевой (SSHFS, nfs, cifs).</a></li>
<a name="p24">  </a><li><span style="font-weight: bold;"><a name="p24">Расположение файловой системы </a></span><a name="p24">-
информация об устройстве, на котором фактически находится файловая
система. Для локальный файловых систем в этой колонке указывается
раздел диска, на котором создавалась эта файловая система. Для сетевых
файловых систем обычно указывается IP-адрес хоста и путь к папке надиске этого хоста.&nbsp; </a></li>
<a name="p24">  </a><li><span style="font-weight: bold;"><a name="p24">Used</a></span><a name="p24"> - процент заполненности файловой системы. По этой колонке можно судить, сколько осталось свободного пространства</a></li>
<a name="p24">  </a><li><span style="font-weight: bold;"><a name="p24">Подмонтирована ?</a></span><a name="p24"> - подмонтирована ли файловая система в данный момент</a></li>
<a name="p24">  </a><li><span style="font-weight: bold;"><a name="p24">Постоянно ?</a></span><a name="p24"> - будет ли файловая система автоматически монтироваться при загрузке сервера</a></li>
</ul>
<div style="text-align: justify;"><a name="p24">Если нажать по точке монтирования
файловой системы в таблице, появляется форма редактирования параметров
файловой системы. В зависимости от типа файловой системы эта форма
содержит определенный набор параметров. Также, с помощью этой формы можно
примонтировать файловую систему или отмонтировать ее, а также
посмотреть, какие процессы и пользователи используют эту файловую
систему в данный момент.<br />
</a></div>

<div style="text-align: justify;">
<h3><a name="p25">Раздел "Службы"</a></h3>

</div>

<div style="text-align: justify;"><a name="p25">В этом разделе находятся модули, управляющие внешними по отношению к системе службами. В LVA Enterprise Server таких служб две:<br />
</a></div>
<a name="p25"><br />
<br />
</a><div style="text-align: center;"><a name="p25"><img src="img/webminservices.png" alt="webminservices.png" /><br />
</a></div>
<a name="p25"><br />
</a><ul>
<a name="p25">  </a><li><span style="font-weight: bold;"><a name="p25">Read User Mail</a></span><a name="p25"> - предоставляет доступ к содержимому
локальных почтовых ящиков пользователей, в которые локальный агент
доставки почты доставляет письма</a></li>
<a name="p25">  </a><li><span style="font-weight: bold;"><a name="p25">Server SSH</a></span><a name="p25"> - управление сервером SSH, благодаря которому возможен удаленный доступ к командной строке сервера<br />
  </a></li>
</ul>
<div style="text-align: justify;">
<h3><a name="p26">Раздел "Сеть"</a></h3>

</div>

<div style="text-align: justify;"><a name="p26">С помощью этого раздела можно редактировать набор стандартных параметров сети:<br />
</a></div>
<a name="p26"><br />
</a><div style="text-align: center;"><a name="p26"><img src="img/netsettings.png" alt="netsettings.png" /><br />
</a></div>
<ul>
<a name="p26">  </a><li><span style="font-weight: bold;"><a name="p26">Сетевые интерфейсы </a></span><a name="p26">- указание IP-адресов и маскок для сетевых интерфейсов</a></li>
<a name="p26">  </a><li><span style="font-weight: bold;"><a name="p26">Маршрутизация и шлюзы</a></span><a name="p26"> - указание шлюза по умолчанию и параметров маршрутизаци<br />
  </a></li>
<a name="p26">  </a><li><span style="font-weight: bold;"><a name="p26">Клиент DNS</a></span><a name="p26"> - указание адресов используемых DNS-серверов и параметров разрешения имен в адреса<br />
  </a></li>
<a name="p26">  </a><li><span style="font-weight: bold;"><a name="p26">Адреса узлов</a></span><a name="p26"> - редактирование локальной таблицы сопоставления адресов с именами, расположенная в файле /etc/hosts</a></li>
</ul>
<div style="text-align: justify;"><a name="p26">После внесения изменений нажмите кнопку "<span style="font-weight: bold;">Применить конфигурацию</span>".<br />
</a></div>

<div style="text-align: justify;">
<h4><a name="p27">Модуль "Сетевые интерфейсы"</a></h4>

</div>

<div style="text-align: justify;"><a name="p27">С помощью этого модуля можно указать IP-адреса сетевых интерфейсов сервера. <br />
</a></div>
<a name="p27"><br />
</a><div style="text-align: center;"><a name="p27"><img src="img/netinterfaces.png" alt="netinterfaces.png" /><br />
</a></div>
<a name="p27"><br />
</a><div style="text-align: justify;"><a name="p27">1. Сначала нужно перейти на закладку "<span style="font-weight: bold;">Интерфейсы, активируемые при загрузке системы</span>".<br />
</a></div>
<a name="p27"><br />
</a><div style="text-align: justify;"><a name="p27">2. В таблице выберите имя интерфейса, адрес и маску которого хотите изменить и нажмите по его названию<br />
</a></div>
<a name="p27"><br />
</a><div style="text-align: center;"><a name="p27"><img src="img/netinterface.png" alt="netinterface.png" /><br />
</a></div>
<a name="p27"><br />
</a><div style="text-align: justify;"><a name="p27">3. В форме укажите желаемый IP-адрес и маску сети в соответствующих полях<br />
</a></div>
<a name="p27"><br />
</a><div style="text-align: justify;"><a name="p27">4. Нажмите кнопку "<span style="font-weight: bold;">Сохранить</span>", а если совсем уверены в правильности своих настроек, нажмите кнопку "<span style="font-weight: bold;">Сохранить и применить</span>".<br />
</a></div>
<a name="p27"><br />
</a><div style="text-align: justify;"><span style="font-weight: bold;"><a name="p27">ВНИМАНИЕ:</a></span>
<a name="p27">Если Вы хотите изменить IP-адрес так, что сервер окажется в другой
подсети (например был в подсети 192.168.0.0, а перейдет в 192.168.1.0
или наоборот), то виртуальные машины, установленные в нем, станут для
него недоступны. Также, модули основной панели управления потеряют
связь с ними. Поэтому, в данной ситуации лучше сначала изменить
IP-адреса виртуальных серверов, затем указать эти новые адреса в Панели
управления (как описано в разделе "</a><a onclick='parent.obj.go_to("3",true,event)' href="null">Начало работы с&nbsp; сервером</a>") и
только после этого изменять IP-адрес самого сервера в этой форме.<br />
</div>

<div style="text-align: justify;">
<h4><a name="p28">Модуль "Маршрутизация и шлюзы"</a></h4>

</div>

<div style="text-align: justify;"><a name="p28">С помощью этого модуля
устанавливается IP-адрес шлюза по умолчанию и сетевой интерфейс, через
который пакеты будут уходить на этот шлюз.<br />
</a></div>
<a name="p28"><br />
</a><div style="text-align: justify;"><a name="p28">Это устанавливается на закладке "<span style="font-weight: bold;">Конфигурация при загрузке"</span> так, как показано на следующем рисунке.<br />
</a></div>
<a name="p28"><br />
</a><div style="text-align: center;"><a name="p28"><img src="img/gatewayform.png" alt="gatewayform.png" /><br />
</a></div>
<a name="p28"><br />
</a><div style="text-align: justify;"><a name="p28">Укажите IP-адрес шлюза, выберите из
списка сетевой интерфейс, через который пакеты будут уходить через шлюз
и нажмите кнопку "<span style="font-weight: bold;">Сохранить</span>".<br />
</a></div>

<div style="text-align: justify;">
<h4><a name="p29">Модуль "Клиент DNS"</a></h4>

</div>

<div style="text-align: justify;"><a name="p29">Название этого модуля несколько
некорректно. По своей сути он позволяет настраивать не только клиента
DNS, но и механизм разрешения имен в целом. C помощью этого модуля
указывается, каким образом сервер будет преобразовывать (разрешать)
имена хостов&nbsp; в IP-адреса и наоборот. <br />
</a></div>
<a name="p29"><br />
</a><div style="text-align: center;"><a name="p29"><img src="img/dnsclientconfig.png" alt="dnsclientconfig.png" /><br />
</a></div>
<a name="p29"><br />
</a><div style="text-align: justify;"><a name="p29">В группе списков "<span style="font-weight: bold;">Очередность поиска</span>"
указывается, в какой последовательности будут опрашиваться различные
базы данных при поиске IP-адресов для преобразования имен хостов.
Обычно сначала опрашивается файл /etc/hosts (<span style="font-style: italic;">Hosts file</span>), а затем, если
в этой таблице совпадений не найдено -&nbsp; DNS-серверы (<span style="font-style: italic;">DNS</span>),
IP-адреса которых указаны далее в полях "<span style="font-weight: bold;">Сервера DNS</span>".
В качестве первого DNS-сервера укажите IP-адрес локального DNS-сервера,
установленного в вашей сети. Он нужен для преобразования в IP-адреса
имена локальных хостов. В качестве второго и третьего DNS-серверов
укажите DNS-серверы своего провайдера, а если не помните их, можно
указать адрес свободного DNS-сервера компании Google - 8.8.8.8. Он
всегда работает, причем даже лучше, чем большинство провайдеров.<br />
</a></div>
<a name="p29"><br />
</a><div style="text-align: justify;"><a name="p29">Если после опроса всех этих баз
данных, IP-адрес для хоста не найден, то клиент DNS попытается
приписать к этому имени справа имя домена, указанное в поле "<span style="font-weight: bold;">Искать в доменах</span>"
и повторить поиск. Можно указать несколько имен доменов в этом поле. В
этом случае в процессе поиска они будут приписываться по очереди. Эта
возможность позволяет производить поиск по неполным именам хостов.
Например, если написать в этом поле "<span style="font-style: italic;">google.com</span>" и потом набирать в командной строке <span style="font-style: italic;">ping www</span>, то это имя автоматически преобразуется в <span style="font-style: italic;">www.google.com</span>, а затем с помощью одного из DNS-серверов будет найден IP-адрес сервера Google.
На практике чаще всего в этом поле указывают имя домена, которым
управляет локальный DNS-сервер, установленный в сети. Это позволит
общаться со всеми хостами локальной сети по имени, не указывая доменную
часть этого имени.<br />
</a></div>
<a name="p29"><br />
</a><div style="text-align: justify;"><a name="p29">После внесения изменений в форму, нажмите кнопку "<span style="font-weight: bold;">Сохранить</span>".<br />
</a></div>
<a name="p29"><br />
</a><div style="text-align: justify;"><a name="p29">Подробнее о механизме работы системы
разрешения имен в GNU/Linux можно прочитать в статье на сайте
LinuxMasters: </a><a target="_blank" href="http://www.linuxmasters.ru/?i=8">http://www.linuxmasters.ru/?i=8</a> . <br />
</div>

<div style="text-align: justify;">
<h4><a name="p30">Модуль "Адреса узлов"</a></h4>

</div>

<div style="text-align: justify;"><a name="p30">С помощью этого модуля можно
редактировать локальную таблицу адресов, находящуюся в файле <span style="font-style: italic;">/etc/hosts</span>,
которая используется каждый раз, когда системе требуется преобразовать
имя хоста в IP-адрес и наоборот.<br />
</a></div>
<a name="p30"><br />
</a><div style="text-align: justify;"><a name="p30">Эта таблица имеет следующий формат:<br />
</a></div>
<a name="p30"><br style="font-style: italic;" />
</a><div style="text-align: justify;"><span style="font-style: italic;"><a name="p30">&lt;IP-адрес&gt;&nbsp;&nbsp;  &lt;Имена хостов через запятую&gt;</a></span><a name="p30"><br />
</a></div>
<a name="p30"><br />
</a><div style="text-align: justify;"><a name="p30">Как видно из формата файла /etc/hosts, одному IP-адресу может соответствовать несколько различных имен хостов.<br />
</a></div>
<a name="p30"><br />
</a><div style="text-align: justify;"><a name="p30">В данном модуле эта таблица выглядит так:<br />
</a></div>
<a name="p30"><br />
</a><div style="text-align: center;"><a name="p30"><img src="img/hoststable.png" alt="hoststable.png" /><br />
</a></div>
<a name="p30"><br />
</a><div style="text-align: justify;"><a name="p30">Вы можете удалять строки из этой таблицы, включив флажки в первом столбце нужных строк и нажав кнопку "<span style="font-weight: bold;">Удалить</span>". Вы можете вносить изменения в существующие строки, щелкнув левой кнопкой мыши по IP-адресу в нужной строке.<br />
</a></div>
<a name="p30"><br />
</a><div style="text-align: justify;"><a name="p30">Чтобы добавить новую строку, нажмите гиперссылку "<span style="font-weight: bold;">Добавить новый адрес узла</span>" и заполните форму <br />
</a></div>
<a name="p30"><br />
</a><div style="text-align: center;"><a name="p30"><img src="img/newhostentry.png" alt="newhostentry.png" /><br />
</a></div>
<a name="p30"><br />
</a><div style="text-align: justify;"><a name="p30">В поле "<span style="font-weight: bold;">IP-адрес</span>" указывается IP-адрес, а в поле "<span style="font-weight: bold;">Имена узлов</span>" указываются имена хостов, которые ему соответствуют. В каждой строке указывается по одному имени хоста. <br />
<br />
После заполнения формы нажмите кнопку "<span style="font-weight: bold;">Создать</span>".<br />
</a></div>

<div style="text-align: justify;">
<h3><a name="p31">Раздел "Оборудование"</a></h3>

</div>

<div style="text-align: justify;"><a name="p31">Модули этого раздела предназначены для установки системного таймера и для работы с жесткими дисками сервера.<br />
</a></div>
<a name="p31"><br />
</a><div style="text-align: center;"><a name="p31"><img src="img/hardware_module.png" alt="hardware_module.png" /><br />
</a></div>
<a name="p31"><br />
</a><div style="text-align: justify;">
<h4><a name="p32">Модуль "Системное время"</a></h4>

</div>

<div style="text-align: justify;"><a name="p32">Этот модуль содержит три закладки:<br />
</a></div>

<ul>
<a name="p32">  </a><li><span style="font-weight: bold;"><a name="p32">Установить время </a></span><a name="p32">- позволяет установить системное время вручную</a></li>
<a name="p32">  </a><li><span style="font-weight: bold;"><a name="p32">Установить часовой пояс</a></span><a name="p32"> - позволяет установить часовой пояс</a></li>
<a name="p32">  </a><li><span style="font-weight: bold;"><a name="p32">Синхронизация с сервером времени</a></span><a name="p32"> - позволяет настроить
автоматическую синхронизацию системного времени с сервером точного
времени через Интернет по протоколу NTP</a></li>
</ul>
<div style="text-align: justify;"><a name="p32">Часовой пояс нужно установить один раз. В дальнейшем он скорее всего не изменится.<br />
</a></div>
<a name="p32"><br />
</a><div style="text-align: justify;"><a name="p32">Далее нужно оределиться, будете ли вы устанавливать время вручную, либо получать его автоматически из Интернет.<br />
</a></div>
<a name="p32"><br />
</a><div style="text-align: justify;"><a name="p32">Если есть доступ к Интернет,
рекомендуем настроить автоматическую синхронизацию. На закладке
"<span style="font-weight: bold;">Синхронизация с сервером времени</span>" укажите адрес сервера, с которым
нужно синхронизироваться в поле "<span style="font-weight: bold;">Адреса или имена сервера времени</span>"
(например pool.ntp.org), затем установите переключатель "<span style="font-weight: bold;">Да, в
указанное ниже время</span>" и&nbsp; настройте расписание в формате cron, по
которому время будет синхронизироваться, выбрав в списках <span style="font-style: italic;">Minutes</span>,
<span style="font-style: italic;">Hours</span>, <span style="font-style: italic;">Days</span>, <span style="font-style: italic;">Months</span> и <span style="font-style: italic;">Weekdays</span> нужные минуты, часы, дни, месяцы и дни
недели. Чтобы выбрать в одном списке несколько значений, нужно
удерживать клавишу Ctrl. Например, чтобы синхронизировать время каждые
полчаса, нужно установить значения в списках так:<br />
</a></div>
<a name="p32"><br />
</a><ul>
<a name="p32">  </a><li><a name="p32">Minutes - 0 и 30</a></li>
<a name="p32">  </a><li><a name="p32">Hours - All</a></li>
<a name="p32">  </a><li><a name="p32">Days - All</a></li>
<a name="p32">  </a><li><a name="p32">Month - All</a></li>
<a name="p32">  </a><li><a name="p32">Weekdays - All</a></li>
</ul>
<div style="text-align: justify;"><a name="p32">После завершения нажмите "<span style="font-weight: bold;">Синхронизировать и применить</span>".<br />
</a></div>
<a name="p32"><br />
</a><div style="text-align: justify;"><a name="p32">Если возможности синхронизироваться с
Интернет нет, можно устанавливать время вручную на закладке "<span style="font-weight: bold;">Установить
время</span>". В сервере (как и в любом компьютере) существует два таймера:
системный и аппаратный. Системный таймер это часы, которые
поддерживает в актуальном состоянии операционная система, а аппаратный
таймер находится на материнской плате. Он поддерживает время, когда
компьютер выключен и при включении передает правильное время системе.
Оба этих таймера по разным причинам могут иногда сбиваться, что требует
их подстраивать. В идеале оба таймера должны показывать одинаковое
время. Оба таймера настраиваются по отдельности соответственно в
подразделах "<span style="font-weight: bold;">Системное время</span>" и "<span style="font-weight: bold;">Аппаратное время</span>".<br />
</a></div>
<a name="p32"><br />
</a><div style="text-align: justify;"><a name="p32">После установки времени в разделе "<span style="font-weight: bold;">Системное время</span>" нажмите кнопку "<span style="font-weight: bold;">Применить</span>".<br />
</a></div>
<a name="p32"><br />
</a><div style="text-align: justify;"><a name="p32">После установки времени в разделе "<span style="font-weight: bold;">Аппаратное время</span>" нажмите кноку "<span style="font-weight: bold;">Сохранить</span>".<br />
</a></div>
<a name="p32"><br />
</a><div style="text-align: justify;"><a name="p32">Можно синхронизировать один таймер с другим, нажав кнопку "<span style="font-weight: bold;">Синхронизировать ...</span>".<br />
</a></div>
<h4 style="text-align: justify;"><a name="p33">
Модуль "Состояние SMART дисков"</a></h4>


<div style="text-align: justify;"><a name="p33">SMART расшифровывается как Self
Monitoring, Analysis and Reporting Technology. Эта технология встроена
в жесткие диски сервера и работает постоянно. Задача SMART заключается
в мониторинге состояния жесткого диска и в предсказании возможных сбоев
в будущем. Для этой цели она запускает набор тестов на жестком диске.<br />
</a></div>
<a name="p33"><br />
</a><div style="text-align: justify;"><a name="p33">Модуль "<span style="font-weight: bold;">Состояние SMART дисков</span>"
позволяет получать результаты этих тестов в любой момент времени и
анализировать их на предмет сбоев. Нужно иногда смотреть состояние
дисков с помощью этого модуля чтобы заранее узнать о возможном сбое в
будущем и принять меры.<br />
</a></div>
<a name="p33"><br />
</a><div style="text-align: justify;"><a name="p33">Нужно выбрать нужный жесткий диск из списка и нажать кнопку "<span style="font-weight: bold;">Показать</span>". В сервере два жестких диска: "Устройство SATA A", соответствующее /dev/sda, и "Устройство SATA B", соответствующее /dev/sdb.<br />
</a></div>
<a name="p33"><br />
</a><div style="text-align: center;"><a name="p33"><img src="img/smartstatus.png" alt="smartstatus.png" /><br />
</a></div>
<a name="p33"><br />
Отчет о состоянии диска разбит на три раздела:<br />
</a><ul>
<a name="p33">  </a><li><span style="font-weight: bold;"><a name="p33">Состояние диска</a></span><a name="p33"> - данные о диске. Основное поле здесь это "<span style="font-weight: bold;">Проверка пройдена?</span>".
Если в качестве значения стоит что-то, кроме "да", значит с жестким
диском проблемы и нужно подумать о его замене, пока он не вылетел окончательно </a></li>
<a name="p33">  </a><li><span style="font-weight: bold;"><a name="p33">Дополнительные атрибуты SMART</a></span>
<a name="p33">- в этом разделе показана дополнительная информация, которую получает
подсистема SMART, в частности результаты различных тестов. Ищите в ней
такие словосочетания как "error" или "failure" и отправляйте такие
отчеты в ЛВА по адресу info@lvacompany.ru. В этом разделе также можно
увидеть текущую температуру жесткого диска в параметре "<span style="font-style: italic;">Temperature
Celsius</span>". <br />
  </a></li>
<a name="p33">  </a><li><span style="font-weight: bold;"><a name="p33">Полный отчет о состоянии SMART</a></span>
<a name="p33">- для получения всей описанной выше информации используется утилита
smartctl. В этом разделе приводится полный вывод этой команды. В
частности в самом начале выдается полная информация о самом жестком
диске, например его уникальный серийный номер (поле Serial Number), он
может быть полезен чтобы сопоставить с серийным номером, указанным на корпусе жеcткого диска при замене.</a></li>
</ul>
<div style="text-align: justify;"><a name="p33">Кнопки внизу позволяют принудительно
запускать различные тесты на диске с помощью SMART. Скорее всего вам не
придется этого делать, потому что все они запускаются автоматически по
расписанию и это расписание оптимально продумано производителем
жесткого диска.<br />
</a></div>

<a name="p33"><br />
</a><div style="text-align: justify;"><a name="p33">Ранее мы рассматривали модуль "<span style="font-weight: bold;">Состояние системы и служб</span>" в разделе "<span style="font-weight: bold;">Система</span>" и упоминали датчик "<span style="font-weight: bold;">Проверка SMART диска</span>".
Этот датчик выполняет провеку состояния SMART-диска по такому же
принципу, как это делается в данном модуле и отправляет оповещение в
случае обнаружения сбоев в результатах этой проверки. Мы рекомендуем
установить такой датчик для каждого жесткого диска. (В последнее время
мы сами их предустанавливаем на свои сервера).<br />
</a></div>



<div style="text-align: justify;">
<h4><a name="p34">Модуль "Linux RAID"</a></h4>

</div>

<div style="text-align: justify;"><a name="p34">Сервер содержит два жестких диска
одинакового объема, объединенные в RAID-массив 1-го уровня (зеркало).
Жесткие диски постоянно синхронизируются между собой для того, чтобы на
каждом из них всегда были одинаковые данные.<br />
</a></div>
<a name="p34"><br />
</a><div style="text-align: justify;"><a name="p34">Данный модуль позволяет следить за состоянием RAID-массива и выполнять необходимые операции в случае сбоев жестких дисков.<br />
</a></div>
<a name="p34"><br />
</a><div style="text-align: justify;"><a name="p34">Также, с помощью этого модуля
производится постоянный фоновый мониторинг состояния RAID-массива. При
обнаружении сбоя, подсистема мониторинга отправляет оповещение о нем по
указанному в этом модуле e-mail. <br />
</a></div>
<a name="p34"><br />
</a><div style="text-align: justify;"><a name="p34">Основной экран модуля выглядит примерно так:<br />
</a></div>
<a name="p34"><br />
</a><div style="text-align: center;"><a name="p34"><img src="img/raid_module.png" alt="raid_module.png" /><br />
</a></div>
<a name="p34"><br />
</a><div style="text-align: justify;"><a name="p34">В верхней таблице появляется список
RAID-массивов (устройств RAID), присутствующих в системе. В данном
случае такое устройство одно и оно называется /dev/md0. Если щелкнуть
по его названию, появится интерфейс управления им.<br />
</a></div>
<a name="p34"><br />
</a><div style="text-align: justify;"><a name="p34">В нижней таблице указываются параметры мониторинга RAID-массива и оповещений о сбоях:<br />
</a></div>
<a name="p34"><br />
</a><ul>
<a name="p34">  </a><li><span style="font-weight: bold;"><a name="p34">Monitoring enabled ? </a></span><a name="p34">- включен ли мониторинг</a></li>
<a name="p34">  </a><li><span style="font-weight: bold;"><a name="p34">Send notifications to</a></span><a name="p34"> - адрес e-mail, на который отправлять оповещения о сбоях</a></li>
<a name="p34">  </a><li><span style="font-weight: bold;"><a name="p34">From address for notifications</a></span><a name="p34"> - адрес отправителя, который будет указываться в оповещениях о сбоях</a></li>
<a name="p34">  </a><li><span style="font-weight: bold;"><a name="p34">Command to run when problems are detected</a></span><a name="p34"> - команда, которая будет запускаться при обнаружении сбоя</a></li>
</ul>
<h5><a name="p35">
Работа с устройством RAID</a></h5>
<div style="text-align: justify;">


<a name="p35">Как говорилось ранее, при щелчке мышью по названии устройства в верхней таблице появляется интерфейс управление RAID-массивом.<br />
</a></div>

<a name="p35"><br />
</a><div style="text-align: justify;">
<a name="p35">Интерфейс состоит из информационной таблицы и кнопок под ней.<br />
</a></div>

<a name="p35"><br />
</a><div style="text-align: justify;">
<a name="p35">В информационной таблице показана информация об этом RAID-массиве:<br />
</a></div>

<a name="p35"><br />
</a><div style="text-align: center;"><a name="p35"><img src="img/raid_status_table.png" alt="raid_status_table.png" /><br />
</a></div>
<a name="p35"><br />
В этой таблице особое значение имеют строки "<span style="font-weight: bold;">RAID status</span>" и "<span style="font-weight: bold;">Разделы в RAID</span>". <br />
<br />
</a><div style="text-align: justify;"><a name="p35">Поле "<span style="font-weight: bold;">RAID status</span>" показывает
состояние RAID-массива. Об изменении именно этого состояния будут
приходить оповещения по электронной почте. При нормальной работе
RAID-массива в поле "<span style="font-weight: bold;">RAID status</span>" должно быть написано "<span style="font-style: italic;">active</span>" или
"<span style="font-style: italic;">clean</span>", а в поле "<span style="font-weight: bold;">Разделы в RAID</span>" должно быть указано два устройства:
SATA A (/dev/sda) и SATA B (/dev/sdb). Если RAID перестает видеть один
из жестких дисков, состояние RAID переходит из "<span style="font-style: italic;">active</span>" в "<span style="font-style: italic;">degraded</span>",
либо некоторые версии модуля могут писать "<span style="font-style: italic;">active,degraded</span>" . Это может
произойти если вы физически извлекли "подозрительный" диск (после
SMART-проверки) и отдали его в ремонт, либо если один из жестких дисков
вышел из строя и RAID потерял связь с ним.&nbsp; Массив будет
продолжать работу в состоянии "degraded" до тех пор пока вы не
проведете процедуру установки нового жесткого диска в RAID-массив,
которая описана далее. Даже если вы устанавливаете не новый, а
возвращаете в RAID-массив ранее извлеченный жесткий диск, все равно
нужно проходить такую же процедуру, как при установке нового жесткого
диска, так как в любом случае произошло нарушение синхронизации данных
между двумя дисками.<br />
</a></div>
<a name="p35"><br />
</a><div style="text-align: justify;"><a name="p35">Ниже, под этой таблицей находятся две
кнопки "<span style="font-weight: bold;">Remove partition</span>" и "<span style="font-weight: bold;">Remove detached</span>". Первая кнопка
предназначена для программного извлечения одного из жестких дисков из
массива. Не нажимайте ее, в этом нет смысла. Если потребовалось извлечь
жесткий диск, просто выключите сервер и извлеките его. Подсистема
управления RAID-массивом сама проведет все операции по его программному
извлечению<br />
</a></div>
<a name="p35"><br />
</a><div style="text-align: justify;"><a name="p35">Кнопка "<span style="font-weight: bold;">Remove detached</span>" программно
извлекает жесткий диск, который был уже извлечен физически в процессе
работы системы. Такое "физическое самоизвлечение" может произойти при
выходе из строя жесткого диска в процессе работы. <br />
</a></div>
<h5><a name="p36">
Извлечение сбойного жесткого диска</a></h5>


<a name="p36">Очень надеемся, что этого никогда не произойдет на самом деле, но
предположим, что в один день вы получили сообщение о сбое RAID-массива
от службы мониторинга, вошли в модуль "Linux RAID" и увидели нечто
подобное:<br />
<br />
</a><div style="text-align: center;"><a name="p36"><img src="img/raidfail1.png" alt="raidfail1.png" /><br />
</a></div>
<a name="p36"><br />
</a><div style="text-align: justify;"><a name="p36">"<span style="font-weight: bold;">RAID status</span>" показывает "<span style="font-style: italic;">degraded</span>",
и в списке "<span style="font-weight: bold;">Разделы в RAID</span>" остался один жесткий диск. Значит второй
диск вышел из строя. Нужно извлечь его. Если сервер находится на
гарантии, то эту процедуру должен выполнять сервисный инженер ЛВА и эта
инструкция для него.<br />
</a></div>
<a name="p36"><br />
</a><div style="text-align: justify;"><a name="p36">Сначала нужно определить, какой из
жестких дисков извлекать из сервера. Для этого нужно действовать от
противного - определим, какой из дисков нужно оставить в сервере. В поле "<span style="font-weight: bold;">Разделы
в RAID</span>" указан исправный диск. Нужно узнать его серийный номер, для
чего воспользуемся модулем "</a><a onclick='parent.obj.go_to("4.2.4.2",true,event)' href="null">Состояние SMART дисков</a>", который был описан
выше. Войдем в модуль и получим состояние SMART для рабочего диска. В
разделе отчета "<span style="font-weight: bold;">Полный отчет о состоянии SMART</span>" нужно найти строку
"<span style="font-weight: bold;">Serial Number:</span> ". В ней указан серийный номер рабочего диска. Нужно
записать этот номер, выключить сервер, открыть его корпус и извлечь жесткий
диск, на корпусе которого указан <span style="font-weight: bold;">НЕ ЭТОТ СЕРИЙНЫЙ НОМЕР</span>. Затем закрыть сервер, включить его. Сервер будет работать в режиме degraded, с одним жестким диском.<br />
</div>

<div style="text-align: justify;">
<h5><a name="p37">Установка нового жесткого диска</a></h5>

</div>

<div style="text-align: justify;"><a name="p37">Процедура установки нового жесткого диска в RAID-массив, находящийся в состоянии degraded состоит из трех частей:<br />
</a></div>
<a name="p37"><br />
1. Установка жесткого диска в сервер<br />
2. Инсталляция жесткого диска в RAID-массив<br />
3. Установка на жесткий диск менеджера загрузки GRUB<br />
<br />
</a><div style="text-align: justify;"><a name="p37">Первый шаг выполняет сервисный
инженер ЛВА, нужно выключить сервер, открыть корпус сервера, подключить
жесткий диск, закрыть корпус сервера, включить сервер.<br />
</a></div>
<a name="p37"><br />
</a><div style="text-align: justify;"><a name="p37">Далее для инсталляции жесткого диска
в RAID-массив нужно воспользоваться CD-диском аварийного восстановления,
который поставляется в комплекте с сервером. После установки жесткого
диска в сервер, нужно загрузить его с этого CD-диска.<br />
</a></div>
<a name="p37"><br />
</a><div style="text-align: justify;"><a name="p37">CD-диск представляет из себя livecd с
операционной системой Debian. Для входа в систему используется имя
пользователя <span style="font-style: italic;">root</span> и пароль <span style="font-style: italic;">111111</span>. После ввода имени и пароля появится
рабочий стол диска аварийного восстановления, основанный на среде Gnome
2.<br />
</a></div>
<a name="p37"><br />
</a><div style="text-align: justify;"><a name="p37">Для инсталляции нового жесткого диска нужно запустить с рабочего стола программу "<span style="font-weight: bold;">Восстановление системы</span>" и выполнить команду "<span style="font-weight: bold;">Инсталлировать новый жесткий диск</span>" из меню.<br />
</a></div>
<a name="p37"><br />
</a><div style="text-align: center;"><a name="p37"><img src="img/installnewhd.png" alt="installnewhd.png" /><br />
</a></div>
<a name="p37"><br />
</a><div style="text-align: justify;"><a name="p37">После успешного выполнения операции
завершите работу с помощью команды <span style="font-weight: bold;">"Система" --&gt; "Выключить"</span>,
извлеките CD-диск аварийного восстановления и загрузите сервер как
обычно.<br />
</a></div>
<a name="p37"><br />
</a><div style="text-align: justify;"><a name="p37">При загрузке, RAID-массив обнаружит
новый жесткий диск и начнет процесс синхронизации данных с этим новым
диском. Это можно увидеть, если войти в Webmin в модуль "<span style="font-weight: bold;">Linux RAID</span>" и
посмотреть состояние RAID-массива:<br />
</a></div>
<a name="p37"><br />
</a><div style="text-align: center;"><a name="p37"><img src="img/raidrecover.png" alt="raidrecover.png" /><br />
</a></div>
<a name="p37"><br />
</a><div style="text-align: justify;"><a name="p37">Массив все еще находится в состоянии
"<span style="font-style: italic;">degraded</span>", потому что диски пока не содержат идентичных данных. Но
кроме "degraded", диск еще находится в состоянии "<span style="font-style: italic;">recovering</span>" - режим
восстановления. Строка "<span style="font-weight: bold;">Rebuilding process</span>" показывает процент
завершенности операции синхронизации данных между дисками. Вы можете
спокойно работать с сервером, потому что этот процесс происходит в
фоновом режиме. В зависимости от объема жесткого диска, он может
длиться от часа до нескольких суток. После его завершения, RAID-массив
перейдет в состояние active или clean.<br />
</a></div>
<a name="p37"><br />
</a><div style="text-align: justify;"><a name="p37">Если вы не увидите картинки, изображенной выше, попробуйте нажать кнопку "<span style="font-weight: bold;">Add partition</span>" под таблицей.<br />
</a></div>
<a name="p37"><br />
</a><div style="text-align: justify;"><a name="p37">После того как процесс востановления
полностью завершится, рекомендуется выполнить третий, завершающий шаг -
установить менеджер загрузки GRUB на новый жесткий диск. Для этого
нужно снова завершить работу сервера и загрузить его с диска аварийного
восстановления, как описано выше, снова запустить "<span style="font-weight: bold;">Восстановление
системы</span>" с рабочего стола и выполнить команду "<span style="font-weight: bold;">Переустановить менеджер
загрузки</span>" из меню.<br />
</a></div>
<a name="p37"><br />
</a><div style="text-align: center;"><a name="p37"><img src="img/reinstallgrub.png" alt="reinstallgrub.png" /><br />
</a></div>
<a name="p37"><br />
</a><div style="text-align: justify;">
<h3><a name="p38">Раздел "Прочее"</a></h3>

</div>

<div style="text-align: justify;"><a name="p38">В этом разделе содержится несколько вспомогательных утилит для работы с сервером.<br />
</a></div>
<a name="p38"><br />
</a><div style="text-align: center;"><a name="p38"><img src="img/other_modules.png" alt="other_modules.png" /><br />
</a></div>
<a name="p38"><br />
</a><div style="text-align: justify;">
<h4><a name="p39">Модуль "Загрузка и сохранение"</a></h4>

</div>

<div style="text-align: justify;"><a name="p39">Данный модуль предлагает своеобраный интерфейс для обмена данными с сервером. Он содержит три закладки:<br />
</a></div>

<div style="text-align: justify;">
<h5><a name="p40">Закладка Download from Web</a></h5>

</div>

<div style="text-align: justify;"><a name="p40">Это своеобразный менеджер загрузкки
из Интернет. С помошью этой закладки можно загружать на сервер файлы, из Интернет. В поле "<span style="font-weight: bold;">URL(ы) для загрузки</span>" указывается список
ссылок в Интернете, с которых будут загружаться файлы. В поле "<span style="font-weight: bold;">Файл или
каталог для загрузки</span>" указывается каталоги на севрере, в который эти
файлы будут загружаться. Далее указывается, какому пользователю и какой
группе эти файлы будут принадлежать и различные дополнительные
параметры загрузки.<br />
</a></div>

<div style="text-align: justify;">
<h5><a name="p41">Закладка Upload to server</a></h5>

</div>

<div style="text-align: justify;"><a name="p41">С помошью этой закладки вы можете
загрузить файлы со своего компьютера на сервер. В полях "<span style="font-weight: bold;">Файлы для
сохранения</span>" указываются файлы, находящиеся на вашем компьютере. В поле
"<span style="font-weight: bold;">Файл или каталог для сохранения</span>" указывается каталог на сервере, в
который эти файлы будут загружены с вашего компьютера. Далее указывается, какому
пользователю и группе эти файлы будут принадлежать и другие
вспомогательные опции. <br />
</a></div>

<div style="text-align: justify;">
<h5><a name="p42">Закладка Download from server</a></h5>

</div>

<div style="text-align: justify;"><a name="p42">С помощью этой закладки вы можете
загрузить файлы с сервера на свой компьютер. В поле "<span style="font-weight: bold;">File to download</span>"
указывается путь к файлу на сервере, который нужно загрузить. Если
установить переключатель <span style="font-weight: bold;">"Show in browser if possible?</span>" в положение
"да", то будет произведена попытка отобразить загруженный с сервера
файл в браузере.<br />
</a></div>

<div style="text-align: justify;">
<h4><a name="p43">Модуль "Командная оболочка (shell)"</a></h4>

</div>

<div style="text-align: justify;"><a name="p43">Этот модуль предлагает своеобразный
интерфейс к командной строке сервера. Введите команду в поле ввода и
нажмите кнопку "<span style="font-weight: bold;">Выполнить команду:</span>". Команда будет выполнена на
сервере, а ее вывод отображен на экране.<br />
</a></div>

<div style="text-align: justify;">
<h4><a name="p44">Модуль "Менеджер файлов"</a></h4>

</div>

<div style="text-align: justify;"><a name="p44">Открывает файловый менеджер (подобный
Midnight Commander), с помощью которого вы можете перемещаться по
файловой системе сервера и выполнять стандартные команды, такие как
"Копировать", "Переместить", "Создать каталог" или "Удалить". Файловый
менеджер выполнен в виде апплета Java, поэтому для его работы
необходимо чтобы в браузере была включена поддержка Java.<br />
</a></div>

</div>
</div>
<h2><a name="p45">
Диск аварийного восстановления</a></h2>

<div style="text-align: justify;">
<a name="p45">С помощью CD-диска аварийного восстановления можно загрузить сервер
после сбоя, после которого система перестала загружаться. С помощью этого диска можно выполнить
действия, которые невозможно выполнить в обычном режиме работы сервера. <br />
</a></div>

<a name="p45"><br />
</a><div style="text-align: justify;">
<a name="p45">Диск аварийного восстановления позволяет выполнять следующие действия:<br />

</a></div>
<ul>
<a name="p45">  </a><li><a name="p45">Создание резервных копий системы сервера<br />
  </a></li>
<a name="p45">  </a><li><a name="p45">Создание резервных копий данных сервера</a></li>
<a name="p45">  </a><li><a name="p45">Восстановление системы из резервной копии</a></li>
<a name="p45">  </a><li><a name="p45">Восстановление данных из резервной копии</a></li>
<a name="p45">  </a><li><a name="p45">Изменение размера разделов жесткого диска</a></li>
<a name="p45">  </a><li><a name="p45">Инсталляция нового жесткого диска в RAID-массив</a></li>
<a name="p45">  </a><li><a name="p45">Переустановка менеджера загрузки</a></li>
</ul>
<div style="text-align: justify;">
<a name="p45">В этой теме мы рассмотрим все это, кроме "<span style="font-weight: bold;">Инсталляция нового жесткого
диска в RAID-массив</span>" и "<span style="font-weight: bold;">Переустановка менеджера загрузки</span>" так как эти
темы уже ранее рассматривались в теме "</a><a onclick='parent.obj.go_to("4.2.4.3",true,event)' href="null">Модуль Linux RAID</a>".<br />
</div>

<br />
<div style="text-align: justify;">
Все действия кроме "создания резервной копии данных" и "восстановления
данных из резервной копии" можно выполнять только с помощью диска
аварийного восстановления. Восстанавливать или резервировать данные
можно и во время работы сервера, но наиболее безопасно это делать
именно с диска аварийного восстановления системы, когда все службы
сервера остановлены.<br />
</div>

<br />
<div style="text-align: justify;">
Для работы с утилитами CD-диска аварийного восстановления нужно
загрузить сервер с этого диска и войти в него (имя пользователя <span style="font-style: italic;">root</span>,
пароль <span style="font-style: italic;">111111</span>).<br />
</div>

<br />
<div style="text-align: justify;">
На рабочем столе содержатся следующие полезные утилиты:<br />
</div>


<ul>
  <li><span style="font-weight: bold;">Восстановление системы</span> - утилита для создания резервных копий
системы, восстановления системы из резервной копии, инсталляции нового
жесткого диска в RAID-массив и переустановки менеджера загрузки</li>
  <li><span style="font-weight: bold;">Данные разделов</span> - предоставляет доступ к данным разделов, которые
находятся в двух папках: SYSTEM - данные системного раздела, DATA -
данные раздела данных. Это позволяет, например, сделать резервную копию
данных из раздела данных или вручную на системном разделе найти и
исправить конфигурационные файлы, неправильная работа с которыми
привела систему в неработоспособное состояние</li>
  <li><span style="font-weight: bold;">Управление логическими томами</span> - позволяет изменять размеры разделов жесткого диска</li>
  <li><span style="font-weight: bold;">Webmin</span> - позволяет воспользоваться интерфейсом Webmin прямо с
диска аварийного восстановления для того, чтобы посмотреть состояние
RAID-массива и восстановить его.<br />
  </li>
</ul>
<div style="text-align: justify;">
Все операции связаны с жестким диском и прежде чем их выполнять, нужно понять, что представляет из себя жесткий диск сервера.<br />
</div>


<div style="text-align: justify;">
<h3><a name="p46">
Структура жесткого диска сервера</a></h3>
</div>


<div style="text-align: center;"><a name="p46"><img src="img/disk_scheme.jpg" alt="disk_scheme.jpg" /><br />
<br />
</a><div style="text-align: left;"><a name="p46">Схематично диск сервера состоит из главной загрузочной записи (1) и всей остальной области диска (2,3,4).<br />
<br />
</a><div style="text-align: justify;"><a name="p46">Главная загрузочная запись это первые
512 байт жесткого диска. В главной загрузочной записи находится
менеджер загрузки GRUB (1.1) и таблица разметки диска на разделы (1.2). Сервер
использует нестандартный механизм разметки диска. Вместо того чтобы
напрямую с помощью fdisk разбить жесткий диск на разделы для системы,
данных и области подкачки, мы создали всего один раздел, равный объему
всего диска и передали его под управление Менеджера Логических Томов
LVM. Менеджер логических томов LVM это расширение системы,
предоставляющее множество дополнительных возможностей по работе с
разделами, по сравнению со стандартными возможностями fdisk. Раздел,
который мы создали, был передан под управление LVM как "физический том
LVM".<br />
</a></div>
<a name="p46"><br />
</a><div style="text-align: justify;"><a name="p46">Физический том LVM был включен в
"группу томов LVM", которая называется vg0, а в ней были созданы три
логических тома LVM: SYSTEM, DATA и SWAP. Операционная система видит
эти логические тома как обычные разделы жесткого диска, которые
представлены дисковыми устройствами /dev/vg0/SYSTEM, /dev/vg0/DATA и
/dev/vg0/SWAP. С помощью стандартных средств системы, раздел SYSTEM
примонтирован как корневая файловая система, а раздел DATA
примонтирован к каталогу /data. Раздел SWAP используется в качестве
раздела подкачки (виртуальной памяти). Одно из основных преимуществ LVM
заключается в том, что эти разделы являются динамическими. Их размер не
фиксирован, что позволяет очень быстро уменьшать и увеличивать разделы.
Для этой цели используется утилита "</a><a onclick='parent.obj.go_to("4.3.4",true,event)' href="null"><span style="font-weight: bold;">Управление логическими томами</span></a>",
которая находится на рабочем столе на CD-диске аварийного
восстановления. <br />
</div>
<h3><a name="p47">
Работа с утилитой "Восстановление системы"</a></h3>


<div style="text-align: justify;">
<h4><a name="p48">Создание резервных копий системы</a></h4>

</div>

<div style="text-align: justify;"><a name="p48">Как видно из схемы, система и данные
отделены друг от друга, что позволяет отдельно создавать резервные
копии системы и отдельно создавать резервные копии данных и затем
отдельно их восстанавливать. Для создания резервных копий системы
используется функция утилиты "<span style="font-weight: bold;">Восстановление системы</span>", которая
находится на CD-диске аварийного восстановления. Эта функция включает в
резервную копию все, кроме разделов DATA и SWAP.&nbsp; В резервную
копию входят все компоненты, определяющие структуру диска: главная
загрузочная запись (области 1, 1.1, 1.2) и таблица разделов менеджера
логических томов (облать 2), а также образ раздела SYSTEM (область 3). <br />
</a></div>
<a name="p48"><br />
</a><div style="text-align: justify;"><a name="p48">Резервные копии системы нужно делать для двух целей:<br />
</a></div>
<a name="p48"><br />
</a><div style="text-align: justify;"><a name="p48">1. Чтобы восстановить систему после
серьезного сбоя, который привел к потере данных на системном разделе
или до него (в MBR, например)<br />
</a></div>
<div style="text-align: justify;"><a name="p48">2. Чтобы вернуть систему в рабочее
состояние после неумелой настройки, которая привела систему в худшее
состояние и "чинить" ее вручную не представляется возможным или слишком
трудоемко.<br />
</a></div>
<a name="p48"><br />
</a><div style="text-align: justify;"><a name="p48">Создавать резервную копию системы
нужно каждый раз после внесения серьезных изменений в нее, но
только после проверки работатоспособности системы после этих изменений.
Также, обязательно нужно создавать резервную копию системы после
изменения размеров разделов, так как это вносит изменения в таблицу
разделов менеджера логических томов (2).<br />
</a></div>
<a name="p48"><br />
</a><div style="text-align: justify;"><a name="p48">Предполагается, что резервная копия
системы должна записываться на внешний носитель (например на внешний
диск USB), поэтому внешний носитель нужно подключить до запуска
процедуры создания резервной копии.<br />
</a></div>
</div>
</div>
<a name="p48"><br />
</a><div style="text-align: justify;"><a name="p48">Процедура создания резервной копии системы.<br />
</a></div>
<a name="p48"><br />
</a><div style="text-align: justify;"><a name="p48">1. Запустите утилиту "<span style="font-weight: bold;">Восстановление системы</span>"<br />
</a></div>
<a name="p48"><br />
</a><div style="text-align: justify;"><a name="p48">2. Выполните команду "<span style="font-weight: bold;">Создать резервную копию системы</span>" из меню<br />
</a></div>
<a name="p48"><br />
</a><div style="text-align: center;"><a name="p48"><img src="img/createsysbackupmenu.png" alt="createsysbackupmenu.png" /><br />
</a></div>
<a name="p48"><br />
</a><div style="text-align: justify;"><a name="p48">3. Найдите устройство, на которое нужно
записать резервную копию, найдите на нем папку, в которой будет создана
резервная копия, выберите ее (не входя в эту папку) и нажмите <span style="font-weight: bold;">ОК</span>.<br />
</a></div>
<a name="p48"><br />
</a><div style="text-align: center;"><a name="p48"><img src="img/selectbackupdir.png" alt="selectbackupdir.png" /><br />
</a></div>
<a name="p48"><br />
</a><div style="text-align: justify;"><a name="p48">4. Начнется процедура создания
резервной копии системы. Для увеличения производиельности, мы не
включали никакого индикатора, визуализирующего этот процесс. Процесс
будет идти незаметно. Дождитесь завершения процедуры
создания резервной копии системы, о чем сигнализирует сообщение
"<span style="font-weight: bold;">Создание резервной копии успешно завершено</span>". Обычно процедура длится
не более 10 минут. Резервная копия системы в базовом варианте занимает
не более 3 Гб. <br />
</a></div>
<a name="p48"><br />
</a><div style="text-align: justify;"><a name="p48">При создании резервной копии, утилита создает в указанном каталоге следующие файлы:<br />
</a></div>
<ul>
<a name="p48">  </a><li><span style="font-weight: bold;"><a name="p48">sda.mbr </a></span><a name="p48">- образ загрузочной записи первого жесткого диска</a></li>
<a name="p48">  </a><li><span style="font-weight: bold;"><a name="p48">sdb.mbr</a></span><a name="p48"> - образ загрузочной записи второго жесткого диска</a></li>
<a name="p48">  </a><li><span style="font-weight: bold;"><a name="p48">md0_uuid</a></span><a name="p48"> - уникальный идентификатор RAID-массива</a></li>
<a name="p48">  </a><li><span style="font-weight: bold;"><a name="p48">md0_name</a></span><a name="p48"> - имя RAID-массива<br />
  </a></li>
<a name="p48">  </a><li><span style="font-weight: bold;"><a name="p48">vg0.cfg </a></span><a name="p48">- таблица разметки для менеджера логических томов LVM</a></li>
<a name="p48">  </a><li><span style="font-weight: bold;"><a name="p48">pv_uuid</a></span><a name="p48"> - уникальный идентификатор физического тома LVM</a></li>
<a name="p48">  </a><li><span style="font-weight: bold;"><a name="p48">data_uuid</a></span><a name="p48"> - уникальный идентификатор логического тома DATA</a></li>
<a name="p48">  </a><li><a name="p48"><span style="font-weight: bold;">system.img.gz</span> - сжатый образ логического тома SYSTEM</a></li>
</ul>
<div style="text-align: justify;"><a name="p48">Эти файлы содержат копию структуры
жесткого диска и копию операционной системы, со всеми настройками. После
создания такой резервной копии, вы в любой момент можете восстановить
систему в состояние, в котором она была на момент создания этой копии.
Вы можете привести систему в это состояние даже если данные жесткого
диска будут уничтожены полностью.<br />
</a></div>

<div style="text-align: justify;">
<h4><a name="p49">Восстановление системы из резервной копии</a></h4>

</div>

<div style="text-align: justify;"><a name="p49">Если текущее состояние системы не
устраивает вас, можно вернуть ее в то состояние, в котором она работала
хорошо, при условии что у вас есть резервная копия этого состояния. <br />
</a></div>
<a name="p49"><br />
</a><div style="text-align: justify;"><a name="p49">Чтобы восстановить систему из
резервной копии нужно загрузить сервер с CD-диска аварийного
восстановления и подключить носитель, на котором есть папка с нужной
резервной копией системы.<br />
</a></div>
<a name="p49"><br />
</a><div style="text-align: justify;"><a name="p49">При восстановлении из резервной
копии, с жесткого диска стирается все, кроме раздела DATA и затем всё
это восстанавливается из резервной копии. Процедура восстановления
гарантирует сохранность данных, находящихся на разделе DATA при
условии, что таблица разметки диска и таблица разметки менеджера томов
LVM не менялись с момента создания резервной копии, которую вы хотите
использовать для восстановления.<br />
</a></div>
<a name="p49"><br />
</a><div style="text-align: justify;"><a name="p49">Несмотря на эти гарантии, мы
рекомендуем перед процедурой аварийного восстановления, войти в папку
"<span style="font-weight: bold;">Данные разделов</span>" на рабочем столе и сделать резервную копию всех
критически важных данных (если разрушения системы позволяют вам видеть
данные разделов).<br />
</a></div>
<a name="p49"><br />
</a><div style="text-align: justify;"><a name="p49">Перед восстановлением системы из
резервной копии нужно убедиться, что RAID-массив находится в целостном
состоянии. Для этого откройте Web-интерфейс Webmin и войдите в раздел
<span style="font-weight: bold;">"Оборудование" --&gt; "Linux RAID"</span>. Если RAID-массив находится в
состоянии <span style="font-style: italic;">degraded</span>, приведите его в состояние "clean" или "active", как
это ранее описывалось в разделе "</a><a onclick='parent.obj.go_to("4.2.4.3",true,event)' href="null">Модуль "Linux RAID"</a>. После приведения
RAID-массива в рабочее состояние снова перезагрузите сервер с CD-диска
аварийного восстановления. <br />
<br />
Для восстановления системы из резервной копии нужно:<br />
</div>
<br />
<div style="text-align: justify;">1. Загрузить программу "<span style="font-weight: bold;">Восстановление системы</span>" с рабочего стола<br />
</div>
&nbsp;<br />
<div style="text-align: justify;">2. Выполнить команду "<span style="font-weight: bold;">Восстановить систему из резервной копии</span>" из меню<br />
</div>
<br />
<div style="text-align: center;"><img src="img/restoresystemmenu.png" alt="restoresystemmenu.png" /><br />
</div>
<br />
<div style="text-align: justify;">3. Найти устройство, на котором
находистся резервная копия, найти на нем папку, в которой она находится,
выбрать эту папку (не входить в нее) и нажать <span style="font-weight: bold;">ОК</span>.<br />
</div>

<br />

<div style="text-align: center;"><img src="img/selectbackupdir.png" alt="selectbackupdir.png" /><br />
</div>

<br />

<div style="text-align: justify;">4. Начнется процесс восстановления
системы из резервной копии. Для сохранения производительноти, мы никак
не визуализируем этот процесс. Он будет идти незаметно. Вам нужно
просто дождаться завершения процедуры восстановления системы из
резервной копии, о чем сигнализирует сообщение
"<span style="font-style: italic;">Восстановление системы из резервной копии успешно завершено</span>". Обычно процедура длится
не более 15 минут. </div>
<br />
<div style="text-align: justify;">Процедура восстанавливает не только
систему в состояние, в котором она была на момент создания резервной
копии, но и загрузочную запись и таблицу разметки дисков. Поэтому, если
сбой был связан с загрузочным сектором и вы потеряли доступ к данным на
разделе DATA, вполне вероятно что после восстановления загрузочного
сектора эта проблема решится и раздел DATA станет доступен. Сразу после
восстановления системы проверьте это: откройте папку "<span style="font-weight: bold;">Данные разделов</span>"
с рабочего стола и войдите в папку "DATA". В ней должно быть содержимое
раздела данных, то есть папка VirtualBox и виртуальные машины в ней.<br />
</div>
<br />
<div style="text-align: justify;">Если проблема была серьезнее и данные
были стерты, то раздел DATA будет после восстановления пустым. В этом
случае может спасти только резервная копия данных, то есть копия папки
VirtualBox и всех виртуальных машин в ней.<br />
</div>
<h3><a name="p50">Создание резервных копий данных и восстановление данных из резервной копии</a></h3>


<div style="text-align: justify;">
<a name="p50">LVA Enterprise Server является хостингом виртуальных машин. Виртуальные
машины являются данными сервера. Все они находятся в каталоге
/data/VirtualBox, на разделе DATA. Создание резервной копии данных
заключается в копировании содержимого этой папки на внешний носитель. <br />
</a></div>

<a name="p50"><br />
</a><div style="text-align: justify;">
<a name="p50">В зависимости от задач, вы можете либо копировать все машины сразу,
либо одну конкретную виртуальную машину, либо один из дисков
виртуальной машины.<br />
</a></div>

<a name="p50"><br />
</a><div style="text-align: justify;">
<a name="p50">Для каждой предустановленной виртуальной машины в каталоге VirtualBox
создается папка, которая называется так же, как виртуальная машина.
Например, если на сервере предустановлен в виде виртуального сервера
контроллер домена, виртуальная машина которого называется Controller,
то и папка будет называться Controller.<br />
</a></div>

<a name="p50"><br />
</a><div style="text-align: justify;"><a name="p50">В папке с виртуальной машиной
находятся пять файлов и одна папка.&nbsp; Первый из файлов, с расширением
.vbox это XML-файл с параметрами виртуальной машины. В нем указаны
такие параметры как количество оперативной памяти, выделяемой этой
машине, количество ядер процессора и его архитектура, какие контроллеры
жестких дисков подключены к виртуальной машине, какие диски к ним
подключены и где находятся их образы. Все эти параметры устанавливаются
при создании виртуальной машины или при редактировании ее свойств. Они
все будут описаны в следующем разделе. Второй файл, с расширением
.vbox-prev это прошлая версия первого, которая была активна до
последнего изменения свойств виртуальной машины. <br />
</a></div>
<a name="p50"><br />
</a><div style="text-align: justify;">
<a name="p50">Оставшиеся три файла с расширением .vdi это образы виртуальных жестких
дисков виртуальной машины. У предустановленных виртуальных машин три жестких диска: один для системы, второй для
данных и третий для менеджера загрузки. В качестве пространства подкачки используется файл swap на
системном диске. Соответственно, если виртуальная машина называется
Controller, то в ее папке есть три файла:<br />

</a></div>
<ul>
<a name="p50">  
  </a><li><span style="font-weight: bold;"><a name="p50">controller_boot.vdi</a></span><a name="p50"> - это образ диска, в котором находятся файлы менеджера загрузки. Виртуальная машина видит его как /dev/sda.
Начальная загрузка системы начинается с него. Необходимость выделения
менеджера загрузки в отдельный диск связано с особенностями
взаимодействия менеджера загрузки GRUB c менеджером логических томов
LVM.<br />
</a></li>
<a name="p50">  </a><li><span style="font-weight: bold;"><a name="p50">Controller.vdi </a></span><a name="p50">- это образ диска, на котором находится вся
система виртуальной машины. Виртуальная машина видит его как
/dev/sdb.&nbsp;</a></li>


<a name="p50">  </a><li><span style="font-weight: bold;"><a name="p50">controller_data.vdi</a></span><a name="p50"> - это образ диска, в котором находятся вся
информация раздела данных, с которым работает виртуальная машина.
Виртуальная машина видит его как /dev/sdc.</a></li></ul>
<div style="text-align: justify;">
<a name="p50">Также в каталоге виртуальной машины есть подкаталог Logs, в котором находятся файлы журналов событий виртуальной машины.<br />
</a></div>

<a name="p50"><br />
</a><div style="text-align: justify;">
<a name="p50">Технологии виртуализации дают вам невероятную гибкость в работе. Вы
можете решать, какие части виртуальной машины бэкапить или
восстанавливать и делать это простой операцией копирования за
считанные минуты. Например, вы хотите провести определенный эксперимент
с системой в виртуальной машине, но точно не знаете к чему это
приведет. В этом случае желательно предварительно сделать резервную
копию. Но вы можете не делать резервную копию виртуальной машины
целиком. Скопируйте только файл диска с системой, затем проведите
свой эксперимент и в случае неудачи, просто верните скопированный ранее
файл обратно. И все! Не нужно делать никаких настроек, не нужно больше
ничего менять.<br />
</a></div>

<a name="p50"><br />
</a><div style="text-align: justify;">
<a name="p50">Если система виртуальной машины не меняется, а данные на диске данных
нужно регулярно бэкапить, сделайте резервную копию системного диска
один раз, в тот момент, когда система находится в наиболее стабильном
состоянии, и затем просто копируйте диск с данными с
нужной периодичностью.<br />
</a></div>

<a name="p50"><br />
</a><div style="text-align: justify;"><a name="p50">Перед резервным копированием дисков
виртуальной машины или перед их восстановлением, эту машину желательно
останавливать. Если же вы
выполняете эти операции с диска аварийного восстановления, то машины
уже остановлены. Нужно просто войти в папку "<span style="font-weight: bold;">Данные разделов</span>",
находящуюся на рабочем столе, затем в каталог "DATA", в каталог
"VirtualBox" и копировать из него все что нужно.<br />
</a></div>


<div style="text-align: justify;">
<h3><a name="p51">Утилита "Управление логическими томами"</a></h3>

</div>

<div style="text-align: justify;"><a name="p51">С помощью этой утилиты вы можете изменять размеры разделов жесткого диска. <br />
</a></div>
<a name="p51"><br />
</a><div style="text-align: center;"><a name="p51"><img src="img/system-config-lvm.png" alt="system-config-lvm.png" /><br />
</a></div>
<a name="p51"><br />
</a><div style="text-align: justify;"><a name="p51">На изображении справа схематично
показано логическое представление диска, как его видит LVM и физическое
представление диска, которое было образовано утилитой fdisk. Физически
жесткий диск состоит из одного раздела /dev/md127 - это устройство
RAID. Логически, он разбит на три раздела - DATA, SWAP и SYSTEM. Слева
в списке развернута группа "<span style="font-weight: bold;">Логический вид</span>" и мы можем выбирать любой
из логических разделов и редактировать его свойства.<br />
</a></div>
<a name="p51"><br />
</a><div style="text-align: justify;"><a name="p51">Одно из свойств раздела это его
размер. Можно увеличивать и уменьшать размер каждого раздела. При этом
утилита также автоматически увеличивает и уменьшает размер файловой
системы, которая находится на этом разделе. Утилиты LVM командной
строки этого не делают, поэтому из командной строки это выполняется в
два этапа: сначала увеличивают размер логического тома, а затем
увеличивают размер файловой системы. Если нужно уменьшить размер, то
наоборот: сначала уменьшают размер файловой системы, а потом размер
логического тома, причем, для уменьшения файловой системы требуется ее
отмонтировать. Именно поэтому мы можем изменять размеры разделов только
с диска аварийного восстановления системы, потому что иначе не
получится отмонтировать системный раздел.<br />
</a></div>
<a name="p51"><br />
</a><div style="text-align: justify;"><a name="p51">Утилита выполняет всё это за
нас автоматически, однако это не меняет суть операций, которые
выполняются. Увеличить раздел жесткого диска можно за счет свободного
пространства, которое не относится ни к одному и разделов. Однако на
сервере все пространство занято логическими томами. Поэтому, прежде чем
увеличить размер одного тома, нужно сначала уменьшить размер другого.
Перед уменьшением размера, файловую систему этого тома нужно
отмонтировать, а при работающем сервере она скорее всего будет занята и
отмонтировать ее не получится, особенно если речь идет о томе SYSTEM.
Поэтому наиболее безопасно выполнять эти операции с диска аварийного
восстановления, когда система полностью остановлена (несмотря&nbsp; на
то, что LVM позволяет увеличивать размер раздела на лету, без остановки
файловой системы).<br />
</a></div>
<a name="p51"><br />
</a><div style="text-align: justify;"><a name="p51">Предположим, нам нужно увеличить
размер раздела SYSTEM на 2 Гб. Для этого&nbsp; нужно уменьшить размер
раздела DATA на 2 Гб и только потом увеличить раздел SYSTEM за счет
освободившегося пространства. Естественно нужно быть уверенным, что на
разделе DATA есть 2 Гб свободного пространства. Выберите раздел DATA в
списке слева и нажмите кнопку "<span style="font-weight: bold;">Изменить свойства</span>" внизу экрана.<br />
</a></div>
<a name="p51"><br />
</a><div style="text-align: center;"><a name="p51"><img src="img/lvproperties.png" alt="lvproperties.png" /><br />
</a></div>
<a name="p51"><br />
</a><div style="text-align: justify;"><a name="p51">В поле "<span style="font-weight: bold;">Размер LV</span>" уменьшим размер
так, чтобы он стал на 2 Гб меньше. В данном примере получится число
16.48 и нажмем кнопку "<span style="font-weight: bold;">ОК</span>".<br />
</a></div>
<a name="p51"><br />
</a><div style="text-align: justify;"><a name="p51">Теперь аналогично откроем свойства раздела "SYSTEM":<br />
</a></div>
<a name="p51"><br />
</a><div style="text-align: center;"><a name="p51"><img src="img/lvextend.png" alt="lvextend.png" /><br />
</a></div>
<a name="p51"><br />
</a><div style="text-align: justify;"><a name="p51">Здесь видна надпись: "<span style="font-style: italic;">Осталось места
для этого Тома 2.0 Гигабайт</span>". Таким образом мы можем использовать
освободившееся пространство для увеличения размера этого тома. Теперь
можно либо ввести новый размер в поле "<span style="font-weight: bold;">Размер LV</span>", либо нажать кнопку
"<span style="font-weight: bold;">Использовать оставшееся</span>" и все свободное пространство будет добавлено
к размеру раздела. После этого нажмите "<span style="font-weight: bold;">OK</span>".<br />
</a></div>
<a name="p51"><br />
</a><div style="text-align: justify;"><a name="p51">Все изменения применяются сразу,
утилита выполняет все необходимые операции по отмонтированию и
монтированию файловых систем. Поэтому вы сразу можете продолжать
работать с разделами новых размеров, без дополнительных действий.<br />
</a></div>
<a name="p51"><br />
<br />
<br />
<br />
<br />
</a></body></html>