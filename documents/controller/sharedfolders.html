<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
























<meta content="text/html; charset=Windows-1251" http-equiv="content-type"><title>sharedfolders</title></head><body>
<h1>Управление данными сервера<br>
</h1>

<h2><a name="p1"></a>
Введение</h2>
<div style="text-align: justify;">Для работы с данными файлового сервера предназначен "<span style="font-weight: bold;">Файловый менеджер</span>", который находится внутри раздела "<span style="font-weight: bold;">Файловый сервер</span>".<br>
</div><br>
<div style="text-align: center;"><img style="width: 212px; height: 176px;" src="img/shared_folders1.png" alt="shared_folders1.png"><br>
</div>
<br>
<div style="text-align: justify;">При активации этого значка, открывается окно с файловым менеджером.<br>
</div>
<br>
<div style="text-align: center;"><img src="img/fileman.png" alt="fileman.png"><br>
</div>
<br>
<div style="text-align: justify;">

Изначально на сервере, в корневой общей папке созданы папки: <span style="font-weight: bold;">files</span> и <span style="font-weight: bold;">utils</span>,
они доступны для чтения и записи всем пользователям, зарегистрированным
на сервере. Если папка является общедоступной, на ее изображении
написаны протоколы, по которым она доступна. Эти папки доступны в
локальной сети по протоколу SMB и&nbsp; видны в Сетевом окружении
Windows. Папка <span style="font-weight: bold;">files</span> предназначена для
хранения любых общедоступных файлов, а в папке <span style="font-weight: bold;">utils</span> находятся
различные утилиты для работы с сервером, такие как FreeNX для
удаленного подключения к рабочему столу сервера и Putty для удаленного
подключения к командной строке сервера.<br>
</div>


<div style="text-align: justify;">
<h2><a name="p2"></a>Работа с файловым менеджером</h2>

</div>
<div style="text-align: justify;">Файловый менеджер, встроенный в
Панель управления позволяет перемещаться по файловой системе раздела
данных сервера, а также выполнять с данными различные операции. <br>
</div>


<br>
<div style="text-align: justify;">Чтобы войти в папку, нужно сделать на
ней двойной щелчок мышью. Чтобы вернуться обратно, нужно сделать
двойной щелчок мышью на папке с именем "..", или нажать кнопку <img src="img/upbtn.png" alt="upbtn.png"> на Панели инструментов.<br>
</div>
<br>
<div style="text-align: justify;">С помощью кнопок Панели инструментов можно выполнять ряд стандартных операций с файлами и папками.<br>
</div>
<br>
<table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top;"><img src="img/upbtn.png" alt="upbtn.png"></td>
      <td style="vertical-align: top;">Перейти на уровень выше<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><img src="img/refreshbutton.png" alt="refreshbutton.png"></td>
      <td style="vertical-align: top;">Обновить содержимое окна файлового менеджера<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><img src="img/uploadbtn.png" alt="uploadbtn.png"></td>
      <td style="vertical-align: top; text-align: justify;">Загрузить файл с локального компьютера в текущую папку<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><img src="img/makedirbtn.png" alt="makedirbtn.png"></td>
      <td style="vertical-align: top; text-align: justify;">Создать новую папку<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><img src="img/renamebtn.png" alt="renamebtn.png"></td>
      <td style="vertical-align: top; text-align: justify;">Переименовать папку или файл<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><img src="img/copybtn.png" alt="copybtn.png"></td>
      <td style="vertical-align: top; text-align: justify;">Поместить группу файлов и папок в буфер для дальнейшего копирования в другую папку с помощью кнопки "<span style="font-weight: bold;">Вставить</span>"<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><img src="img/cutbtn.png" alt="cutbtn.png"></td>
      <td style="vertical-align: top; text-align: justify;">Поместить группу файлов и папок в буфер для дальнейшего перемещения в другую папку с помощью кнопки "<span style="font-weight: bold;">Вставить</span>"<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><img src="img/pastebtn.png" alt="pastebtn.png"></td>
      <td style="vertical-align: top; text-align: justify;">Вставить в текущую папку файлы и папки, ранее помещенные в буфер с помощью кнопки "<span style="font-weight: bold;">Копировать</span>" или "<span style="font-weight: bold;">Вырезать</span>". <br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><img src="img/deletebtn.png" alt="deletebtn.png"></td>
      <td style="vertical-align: top; text-align: justify;">Удалить группу файлов и папок<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><img src="img/propbtn.png" alt="propbtn.png"></td>
      <td style="vertical-align: top; text-align: justify;">Открыть
окно свойств файла, папки или группы файлов и папок. С помощью этого
окна можно получить информацию о размере файла или папки, установить
права доступа, сделать папку общедоступной в локальной сети и/или из
Интернет, а также посмотреть резервные копии этой папки, созданные с
помощью механизма теневого копирования данных.<br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<h2><a name="p3"></a>Операции с данными</h2>

<div style="text-align: justify;">
Файловый менеджер позволяет выполнять
ряд стандартных операций с объектами данных (файлами и папками). Можно
создавать новые папки, переименовывать существующие объекты,
копировать, перемещать и удалять их.<br>
</div>



<br>
<div style="text-align: justify;">Все эти операции выполняются примерно
так же, как в любом другом файловом менеджере. Сначала выделяется
объект и затем нажимается соответствующая кнопка на Панели
инструментов. Для некоторых операций, таких как "<span style="font-weight: bold;">Копировать</span>",
"<span style="font-weight: bold;">Вырезать</span>", "<span style="font-weight: bold;">Вставить</span>" и "<span style="font-weight: bold;">Удалить</span>" можно выделить группу объектов. Для
этого нужно нажать клавишу <span style="font-weight: bold;">Ctrl</span> или <span style="font-weight: bold;">Shift</span> и щелкать мышью по файлам и
папкам, которые нужно выделить. Выделенные объекты помечаются желтым
цветом.<br>
</div>
<br>
<div style="text-align: justify;">Для создания новой папки войдите в нужную папку, нажмите кнопку <img src="img/makedirbtn.png" alt="makedirbtn.png">, введите имя папки и нажмите OK. Созданная папка появится на диске и в окне файлового менеджера.<br>
</div>
<br>
<div style="text-align: justify;">Чтобы загрузить в папку файл, войдите в нее, нажмите кнопку <img src="img/uploadbtn.png" alt="uploadbtn.png">
, выберите нужный файл, находящийся на локальном диске вашего
компьютера и дождитесь завершения процесса загрузки. Загруженный файл
появится в окне файлового менеджера.<br>
<br>
<span style="font-weight: bold;">ПРИМЕЧАНИЕ:</span> Данная кнопка может не отображаться, если Панель управления сервером работает по протоколу HTTPS. Это временное ограничение.<br>
</div>
<br>
<div style="text-align: justify;">Чтобы переименовать папку или файл, выделите нужный файл или папку, нажмите кнопку <img src="img/renamebtn.png" alt="renamebtn.png">, введите новое имя и нажмите <span style="font-weight: bold;">OK</span>. Объект переименуется.<br>
</div>
<br>
<div style="text-align: justify;">Чтобы удалить объект или группу объектов, выделите нужные папки и файлы, нажмите кнопку <img src="img/deletebtn.png" alt="deletebtn.png">
и подтвердите намерение выполнить операцию. Объекты исчезнут из окна
файлового менеджера. ВНИМАНИЕ: Файлы и папки, удаляемые в файловом
менеджере Панели управления не попадают в "Сетевую корзину". (О сетевой
корзите см. "<a onclick='parent.obj.go_to("5.3.4.2.3",true,event)' href="null">Настройка Сетевой корзины</a>").<br>
</div>
<br>
<div style="text-align: justify;">Чтобы скопировать группу объектов из одного места в другое, выделите нужные объекты, нажмите кнопку <img src="img/copybtn.png" alt="copybtn.png">, перейдите в папку, в которую нужно скопировать эти объекты и нажмите кнопку <img src="img/pastebtn.png" alt="pastebtn.png">. Копия объектов появится в папке.<br>
</div>
<br>
<div style="text-align: justify;">Чтобы переместить группу объектов из одного места в другое, выделите нужные объекты, нажмите кнопку <img src="img/cutbtn.png" alt="cutbtn.png">, перейдите в папку, в которую нужно переместить эти объекты и нажмите кнопку <img src="img/pastebtn.png" alt="pastebtn.png">. Объекты появятся в этой папке, а из своего прежнего места удалятся.<br>
</div>

<h2><a name="p4"></a>
Свойства файлов и папок</h2>
<div style="text-align: justify;">
Чтобы увидеть окно свойств папки, файла или группы файлов и папок, выделите нужные объекты и нажмите кнопку <img src="img/propbtn.png" alt="propbtn.png"> на Панели инструментов.<br>
<br>



</div>
<div style="text-align: center;"><img src="img/fileprops.png" alt="fileprops.png"><br>
</div>
<br>
<div style="text-align: justify;">Внешний вид этого окна может
отличаться в зависимости от того, что было выделено. Если был выделен
файл, то окно будет содержать только три закладки: "<span style="font-weight: bold;">Сведения</span>" и "<span style="font-weight: bold;">Права</span>"
и "<span style="font-weight: bold;">Резервные копии</span>". На закладке "<span style="font-weight: bold;">Сведения</span>" находится различная
информация о файле, такая как его тип, размер, дата последней
модификации и дата последнего доступа. Также здесь показана информация
о разделе в котором этот файл находится, а именно: "<span style="font-weight: bold;">Общий объем папки</span>"
это общий размер раздела и "<span style="font-weight: bold;">Свободный объем</span>" это объем свободного
пространства на разделе данных. На закладке "<span style="font-weight: bold;">Права</span>" настраиваются права
доступа к этому файлу для его владельца, группы и для всех остальных
пользователей, зарегистрированных в системе. Эти права распространяются
на любые виды доступа к этому файлу: на доступ с самого сервера, на
доступ из локальной сети или через Интернет. Подробнее о настройке прав
доступа к файлам и папкам читайте в следующем разделе. На закладке
"<span style="font-weight: bold;">Резервные копии</span>" можно увидеть все резервные копии этого файла,
созданные механизмом теневого копирования. Подробнее читайте об этом в
разделе "<a onclick='parent.obj.go_to("8.6",true,event)' href="null">Теневое копирование данных</a>".<br>
</div>
<br>
<div style="text-align: justify;">Если была выбрана папка, то также
появляется закладка "<span style="font-weight: bold;">Общий доступ</span>", позволяющая сделать эту папку
доступной в локальной сети и из Интернет. Подробнее о создании общих
папок читайте далее в теме "<a onclick='parent.obj.go_to("5.3.4.2",true,event)' href="null">Организация общего доступа к папке</a>".<br>
</div>
<br>
<div style="text-align: justify;">Если окно свойств было выбрано для
группы объектов, то в окне будет только две закладки: "<span style="font-weight: bold;">Сведения</span>" и
"<span style="font-weight: bold;">Права доступа</span>". Более того, на закладке "<span style="font-weight: bold;">Сведения</span>" почти все строки
будут пусты. Единственное, для чего может быть полезен этот режим, это
для установки прав доступа сразу для всей группы выделенных объектов.<br>
</div>
<h3><a name="p5"></a>
Установка прав доступа</h3>


<div style="text-align: justify;">Прежде чем настраивать права доступа
пользователей и групп к файлам и папкам, необходимо создать этих
пользователей и группы в системе. Этой теме посвящен раздел руководства
"<a onclick='parent.obj.go_to("5.4",true,event)' href="null">Работа с пользователями и группами</a>".<br>
</div>
<br>
<div style="text-align: justify;">Для установки прав доступа к файлу
или папке используется стандартная система прав доступа POSIX,
расширенная с помощью списков контроля доступа (POSIX ACL). Эта
технология также применяется во всех UNIX-подобных системах и является
законом для всех программ, которые установлены поверх системы. По этой
причине, права доступа, установленные на этом уровне однозначно
работают независимо от того, каким образом пользователь подключился к
серверу. Он может подключиться локально к командной строке сервера,
удаленно к командной строке сервера по протоколу SSH. Он может
подключиться через Сетевое окружение Windows по протоколу SMB, он может
примонтировать общую папку сервера по протоколу NFS или подключиться с
помощью WebDAV или FTP-клиента из Интернет. В любом случае права
доступа к файлам и папкам, установленные на этом уровне будут
действовать и совершенно однозначно определять его возможности по
отношению к объекту.<br>
</div>
<br>
<div style="text-align: justify;">У каждого объекта файловой системы
(файла или папки) есть владелец. Владелец это обычно пользователь,
который создал этот файл или папку. Также, у каждого объекта файловой
системы есть "владеющая группа", которая также изначально
устанавливается при создании данного объекта и по умолчанию равна
основной группе, в которую входит пользователь, создающий этот файл или
папку. В соответствии со стандартной системой прав доступа POSIX,&nbsp;
к каждому объекту файловой системы привязывается структура,
определяющая права доступа для "владельца" этого объекта, для
"владеющей группы" этого объекта и для "всех остальных
пользователей". Существует три действия, которые контролируют права
доступа: <br>
</div>
<br><span style="font-weight: bold;">
r</span> - чтение (<span style="font-weight: bold;">r</span>ead)<br><span style="font-weight: bold;">
w</span> - запись (<span style="font-weight: bold;">w</span>rite)<br><span style="font-weight: bold;">
x</span> - исполнение (e<span style="font-weight: bold;">x</span>ecute)<br>
<br>
<div style="text-align: justify;">Смысл каждого действия различен для файла и для папки, о чем будет написано ниже.<br>
</div>
<br>
<div style="text-align: justify;">Получается что к каждому файлу или
папке файловой системы, в соответствии со стандартом POSIX
привязывается следующая структура прав доступа<br>
</div>
<br>
<table style="text-align: left; width: 100%; background-color: black;" border="0" cellpadding="2" cellspacing="1">
  <tbody>
    <tr>
      <td style="vertical-align: top; font-weight: bold; background-color: white; text-align: center;">Объект доступа<br>
      </td>
      <td style="vertical-align: top; background-color: white; text-align: center;"><span style="font-weight: bold;">Права</span><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; background-color: white;">Владелец<br>
      </td>
      <td style="vertical-align: top; background-color: white;">rwx<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; background-color: white;">Группа<br>
      </td>
      <td style="vertical-align: top; background-color: white;">r-x<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; background-color: white;">Остальные<br>
      </td>
      <td style="vertical-align: top; background-color: white;">r<br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<br>
<div style="text-align: justify;">Соответственно, если к серверу
подключается пользователь, являющийся владельцем данного файла, он
работает с этим файлом в соответствии с правами, которые прописаны в
этой структуре для "владельца" данного файла. В случае с приведенной
выше таблицей это значит, что владелец получает все права доступа к
этому файлу. В основном владелец всегда имеет полный доступ к своему
файлу, но системный администратор может изменить права владельца либо
вручную, либо с помощью Панели управления. Он даже может изменить
самого владельца, после чего файл будет иметь другого владельца,
отличающегося от реального создателя. <br>
</div>
<br>
<div style="text-align: justify;">Если подключающийся пользователь не
является владельцем, доступ определяется в зависимости от того, входит
ли пользователь во "владеющую группу", прописанную в структуре прав
доступа, привязанной к этому файлу. Если пользователь входит во
владеющую группу, то он получает права доступа, прописанные для
владеющей группы (в нашем примере он получает права на чтение и на
исполнение данного файла), а иначе, он получает права, прописанные в
этой структуре для "всех остальных пользователей" (только чтение).<br>
</div>
<br>
<div style="text-align: justify;">Стандартный механизм прав доступа
POSIX при правильном планировании позволяет настроить практически любую
систему прав доступа, но в постоянно меняющемся современном мире он уже
устарел и считается слишком неповороливым и статичным. Для того чтобы
сделать управление доступом в UNIX-подобных системах более простым и
удобным предназначено расширение, называемое "списки котроля доступа"
(Access Control Lists - ACL, POSIX ACL). <br>
</div>
<br>
<div style="text-align: justify;">Списки контроля доступа позволяют
просто устанавливать права доступа для каждого пользователя и для
каждой группы, которые зарегистрированы на сервере. Однако они не
заменяют стандартный механизм прав доступа, а расширяют его. В
структуру прав доступа, присоединяемую к каждому файлу или папке
добавляются строки для каждого пользователя и для каждой группы,
зарегистрированных на сервере. Соответственно, если на сервере
зарегистрированы пользователи admin и guest, а также группа smbusers
(как сделано по умолчанию в LVA Business Server), структура прав
доступа к файлу может быть такой:<br>
</div>
<br>
<table style="text-align: left; width: 100%; background-color: black;" border="0" cellpadding="2" cellspacing="1">
  <tbody>
    <tr>
      <td style="vertical-align: top; background-color: white; font-weight: bold; text-align: center;">Объект доступа<br>
      </td>
      <td style="vertical-align: top; background-color: white; font-weight: bold; text-align: center;">Права<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; background-color: white;">Владелец<br>
      </td>
      <td style="vertical-align: top; background-color: white;">rwx<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; background-color: white;">Группа<br>
      </td>
      <td style="vertical-align: top; background-color: white;">r-x<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; background-color: white;">Остальные<br>
      </td>
      <td style="vertical-align: top; background-color: white;">r<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; background-color: white;">admin<br>
      </td>
      <td style="vertical-align: top; background-color: white;">rw<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; background-color: white;">guest<br>
      </td>
      <td style="vertical-align: top; background-color: white;">r<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; background-color: white;">smbusers<br>
      </td>
      <td style="vertical-align: top; background-color: white;">r-x<br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<div style="text-align: justify;">Таким образом, если в этом списке для
пользователя прописаны права доступа, он работает с этими правами
независимо от того, является ли он владельцем данного файла или папки и
входит ли он во владеющую группу.<br>
</div>
<br>
<div style="text-align: justify;">В данном случае важно понимать, что в
списке прав доступа может быть ситуация, когда владелец файла также
прописан отдельной строкой. Например, пусть в данном случае владельцем
является пользователь <span style="font-style: italic;">admin</span>. Как владелец он имеет полные права (<span style="font-style: italic;">rwx</span>),
а как пользователь, только чтение и запись (<span style="font-style: italic;">rw</span>). В данном случае
стандартные права имеют приоритет и пользователь admin получит полные
права доступа к файлу. Это же правило распространяется на права доступа
групп объектов к файлу или папке. Установленные права для владеющей
группы имеют более высокий приоритет, чем для этой же группы,
прописанной отдельной строкой в списке контроля доступа. <br>
</div>
<br>
<div style="text-align: justify;">Перейдя на закладку "<span style="font-weight: bold;">Права</span>" в
свойствах файла, мы увидим список контроля доступа, разбитый на две
закладки: "<span style="font-weight: bold;">Пользователи</span>" и "<span style="font-weight: bold;">Группы</span>":<br>
</div>
<br>
<div style="text-align: center;"><img src="img/userfilerules.png" alt="userfilerules.png"><br>
</div>
<br>
<div style="text-align: justify;">На закладке "<span style="font-weight: bold;">Пользователи</span>"
можно установить владельца данного объекта, а также права доступа всех
пользователей к нему, включая "<span style="font-style: italic;">владельца</span>" и "<span style="font-style: italic;">всех</span> <span style="font-style: italic;">остальных</span>". На
заклакде "<span style="font-weight: bold;">Группы</span>" можно установить владеющую группу этого файла и права
доступа этой владеющей группы (строка "<span style="font-style: italic;">Группа</span>") и каждой группы,
зарегистрированной на сервере к этому объекту.<br>
</div>
<br>
<div style="text-align: justify;">Разберемся, что же реально означают действия <span style="font-weight: bold;">r</span>, <span style="font-weight: bold;">w</span> и <span style="font-weight: bold;">x</span> для файла, и что они означают для папки.<br>
</div>
<br>
<div style="text-align: justify;">Для файла, действие <span style="font-weight: bold;">r</span> это возможность
просмотреть содержимое файла. Пользователь или группа, имеющие&nbsp;
право на это действие, могут открыть файл и прочитать его содержимое.
Действие <span style="font-weight: bold;">w</span> это возможность изменить содержимое файла. Пользователь с
таким правом может открыть файл, удалить в нем что-нибудь и даже
полностью обнулить, но не удалить файл. Право на удаление файла
определяется в правах доступа к папке, в которой он находится, о чем
написано в следующем абзаце. Действие <span style="font-weight: bold;">x</span> это возможность исполнить файл
как программу, то есть "запустить" файл, это аналогично действию
"сделать двойной щелчок мышью", которое приведет к запуску этого
файла в системе. Данное действие имеет смысл только для UNIX-подобных
клиентов. Клиенты Windows это правило не понимают, так как для них
возможность запустить файл определяется расширением файла (.com, .exe
или .bat). <br>
</div>
<br>
<div style="text-align: justify;">Теперь рассмотрим что означают эти
действия для папки. С точки зрения файловой системы папка это тоже
файл. Содержимое папки это список имен файлов и папок, которые в ней
находятся, или правильнее сказать - список уникальных идентификаторов
файлов и папок, которые в ней находятся. В каждой строке этого списка
находится по одному идентификатору. Соответственно, действие <span style="font-weight: bold;">r</span> это
возможность "прочитать содержимое папки", то есть список файлов и
папок, находящихся в данной папке и отобразить его. Действие <span style="font-weight: bold;">w</span> это
возможность "изменить список содержимого папки", то есть состав файлов и папок,
находящихся в данной папке, а именно: добавить в папку новые файлы и папки,
изменить названия существующих или удалить существующие файлы и папки. Действие <span style="font-weight: bold;">x</span>, как и в случае с файлом, это возможность сделать
"двойной щелчок мышью" по папке и "запустить ее", то есть, войти в эту
папку. <br>
</div>
<br>
<div style="text-align: justify;">На основании описанных выше правил можно сделать ряд важных выводов.<br>
</div>
<br>
<div style="text-align: justify;">1. Если у пользователя есть право на
запись в папку, он может удалить из нее все файлы, независимо от того,
разрешен ли ему доступ к ним (а также переименовать их).<br>
</div>
<div style="text-align: justify;">2. Если у пользователя есть право на
запись в папку, в которой находятся подпапки и к этим подпапкам у него
нет права на запись, он может удалить их только в том случае, если они
пустые, так как для рекурсивного удаления содержимого подпапок будет требоваться
право на запись в каждую из них.<br>
</div>
<div style="text-align: justify;">3. Некоторые люди не понимают для
папки смысла действия "x" без действия "r" и считают что в любом случае
нужно давать право "r-x".&nbsp; Действие "x" позволяет "войти в папку",
не видя ее содержимого. Оно также позволяет "пройти через папку".
Поэтому если у папки установлено только право "x", пользователь может
войти в нее и не видя ее содержимого войти в какую-либо ее подпапку,
если знает ее название. Иногда это может быть очень полезным для того,
чтобы пользователь имел возможность войти в подпапку и при этом не
видел бы остальных подпапок, окружающих ее.<br>
</div>
<br>
<div style="text-align: justify;">На рисунке, показанном выше, приведен
интерфейс для настройки прав доступа к файлу. Для настройки прав
доступа к папке он выглядит несколько иначе:<br>
</div>
<br>
<div style="text-align: center;"><img src="img/userfolderrules.png" alt="userfolderrules.png"><br>
</div>
<br>
<div style="text-align: justify;">Кроме первой группы флажков "<span style="font-weight: bold;">Права текущие</span>",
с помощью которых устанавливаются права доступа к этой папке для
каждого пользователя или группы, также появилась вторая такая же группа
флажков "<span style="font-weight: bold;">Права наследуемые</span>". С
ее помощью устанавливаются права, которые будут устанавливаться по
умолчанию для папок и файлов, которые будут создаваться в этой папке.<br>
</div>
<br>
<div style="text-align: justify;">Например, если вы хотите чтобы
пользователь мог записывать файлы в папку, но не мог после этого
изменить их содержимое, установите флажки "<span style="font-style: italic;">rwx</span>" в первой группе, и "<span style="font-style: italic;">r</span>"
во второй группе в строке для этого пользователя. Также установите "<span style="font-style: italic;">r</span>"
во второй группе флажков для "владельца", так как при появлении нового
файла в этой папке, пользователь, который его записал или создал будет
его владельцем и получит права, установленные в группе "<span style="font-weight: bold;">Права
наследуемые</span>" для владельца этого файла. <br>
<br>
После такой настройки прав доступа, при записи файла в
папку, для него будет устанавливаться право "<span style="font-style: italic;">r</span>" и для владельца, и для
пользователей и они смогут его только прочитать, но не изменить (но они
конечно же смогут удалить его и переименовать, так как имеют право на
запись в эту папку). <br>
</div>
<br>
<div style="text-align: justify;">Также, при установке прав доступа к
папке, вы можете включить флажок "<span style="font-weight: bold;">Применить ко всем вложенным каталогам и
файлам</span>". В этом случае установленные в этом окне права доступа получат
все файлы и папки, вложенные в данную.<br>
</div>
<br>
<div style="text-align: justify;">После установки прав доступа нажмите
кнопку "<span style="font-weight: bold;">Сохранить</span>" и права доступа сразу же будут актуальны для всех
текущих и новых подключений к серверу.<br>
</div>

<div style="text-align: justify;">
<h3><a name="p6"></a>Организация общего доступа к папке</h3>

</div>
<div style="text-align: justify;">Любую папку можно сделать доступной
как в локальной сети, так и из Интернета. Для настройки общего доступа
предназначена закладка "<span style="font-weight: bold;">Общий доступ</span>" в окне свойств папки. Чтобы
организовать общий доступ к папке, нужно перейти на эту закладку и
включить флажок "<span style="font-weight: bold;">Включить общий доступ</span>".<br>
</div>



<br>
<div style="text-align: center;"><img style="width: 601px; height: 522px;" src="img/localshares.png" alt="localshares.png"><br>
</div>
<br>
<div style="text-align: justify;">Интерфейс позволяет сделать папку
доступной для локальной сети и из Интернет, для чего предназначены
соответственно закладки "<span style="font-weight: bold;">Локально</span>" и "<span style="font-weight: bold;">Через Интернет</span>".&nbsp; Папку,
сделанную доступной по локальной сети можно привязать к дополнительным
службам
сервера, настроив параметры на закладках "<span style="font-weight: bold;">Сетевая корзина</span>" и "<span style="font-weight: bold;">Журнал
событий</span>":<br>

</div>
<ul>
<li style="text-align: justify;">Можно определить, что будет происходить с данными этой общей
папки при удалении. По умолчанию они удаляются безвозвратно, однако на
закладке "<span style="font-weight: bold;">Сетевая корзина</span>" можно включить поддержку корзины. Если
включена корзина, то при удалении данных из общей папки, эти данные
будут попадать в определенную папку, отведенную под корзину и храниться
в ней определенный промежуток времени, что позволяет восстановить их.</li><li style="text-align: justify;">В журнал событий попадают записи о всех действиях, которые
осуществляют компьютеры локальной сети с файлами и папками на сервере.
На закладке "<span style="font-weight: bold;">Журнал событий</span>" можно указать, будут ли попадать записи о
событиях с данными этой общей папки в журнал событий.<br>
  </li>
</ul>




<h4><a name="p7"></a>Настройка общего доступа для локальной сети<br>

</h4>

<div style="text-align: justify;">На закладке "<span style="font-weight: bold;">Локально</span>" настраивается
доступ к общей папке из локальной сети. Можно настроить уровень доступа
как для всей сети в целом, так и для каждого компьютера в отдельности.
Компьютеры должны быть предварительно зарегистрированы в "<span style="font-weight: bold;">Сетевом
центре</span>". Подробнее о работе с Сетевым центром написано в соответствующем
разделе.<br>
</div>
<br>
<div style="text-align: justify;">Компьютеры в этом списке разделены по группам. Для удобства работы с правами доступа в больших сетях, для
каждого хоста можно указать, к какой группе он относится. Подробнее об
этом написано в разделе "<a onclick='parent.obj.go_to("6.5",true,event)' href="null">Работа с группами объектов</a>". Соответственно в
этой таблице показаны хосты, объединенные в группы. <br>
</div>

<br>
<div style="text-align: justify;">
Если заголовок группы имеет <span style="font-weight: bold;">жирное начертание</span>, значит в этой группе есть компьютеры.<br>
</div>

<br>
<div style="text-align: justify;">

Хосты, которые не входят ни в одну из групп отображаются в группе с названием "<span style="font-weight: bold;">Вне групп</span>".<br>
</div>


<br>

<div style="text-align: justify;">
Каждую группу можно развернуть, чтобы увидеть компьютеры, которые в ней находятся. Для этого используется значок <img src="img/objgroupbutton.png" alt="objgroupbutton.png">:<br>
</div>



<br>


<div style="text-align: center;"><img style="width: 535px; height: 337px;" src="img/hostslistrulesexpanded.png" alt="hostslistrulesexpanded.png"><br>
</div>


<br>
<div style="text-align: justify;">


Здесь показана группа "<span style="font-weight: bold;">Серверы</span>" в развернутом виде. Теперь можно включить
флажки, чтобы настроить права доступа этих компьютеров к общей папке. <br>
</div>

<br>
<div style="text-align: justify;">

Если нажать флажок "<span style="font-weight: bold;">Чтение</span>" или "<span style="font-weight: bold;">Запись</span>" в строке с наименованием
группы, то это автоматически включит или выключит соответствующий
флажок для всех компьютеров, входящих в группу.<br>
</div>


<br>
<div style="text-align: justify;">
Вы можете оценивать состояние свойств "<span style="font-weight: bold;">Чтение</span>", "<span style="font-weight: bold;">Запись</span>", "<span style="font-weight: bold;">SMB</span>", "<span style="font-weight: bold;">NFS</span>" и "<span style="font-weight: bold;">AFP</span>" членов группы, не разворачивая ее. Если флажок в строке группы включен,
значит этот флажок включен у каждого компьютера этой группы. Если
флажок выключен, значит он выключен у всех членов группы. Если флажок
выключен, но находится на более темном фоне, значит внутри этой группы
у части компьютеров он включен, а у остальных выключен. <br>
</div>

<br>
<div style="text-align: justify;">
Также, в этой таблице есть три дополнительных столбца: "<span style="font-weight: bold;">SMB</span>", "<span style="font-weight: bold;">NFS</span>" и "<span style="font-weight: bold;">AFP</span>".
Если вы предоставляете доступ к общей папке определенным компьютерам
или всем компьютерам по умолчанию, обязательно нужно указать, по каким
протоколам этот доступ будет предоставляться. Система позволяет
предоставлять доступ к общей папке по следующим протоколам:<br>

</div>
<ul>
<li style="text-align: justify;"><span style="font-weight: bold;">SMB</span> - протокол,
разработанный корпорацией Microsoft. Он используется клиентами Windows
для доступа к общим папкам. Также клиенты UNIX и MacOS могут обращаться к общим
папкам по этому протоколу, если в их системах установлена клиентская часть пакета Samba<br>
  </li><li style="text-align: justify;"><span style="font-weight: bold;">NFS</span>
- протокол, разработанный корпортацией Sun Microsystems.
Он используется клиентами UNIX/Linux для доступа к общим папкам. Также
клиенты Windows могут обращаться к общим папкам по этому протоколу,
если в их системах установлен пакет "Windows Services for UNIX".
Клиенты MacOS также могут обращаться к общим папкам по этому протоколу,
если на них настроена служба NFS. <br>
</li>
  <li style="text-align: justify;"><span style="font-weight: bold;">AFP</span>
- протокол, разработанный корпорацией Apple. Он используется на
устройствах работающих под управлением MacOS для предоставления доступа
к общим папкам. Также клиенты UNIX могут обращатся к общим папкам по
этому протоколу, если в их системах установлена поддержка файловой
системы afpfs (установлен пакет afpfs-ng-utils).<br>
  </li>

</ul>







<div style="text-align: justify;">Чтобы общая папка была доступна любым клиентам, включите все флажки (и <span style="font-weight: bold;">SMB</span> и <span style="font-weight: bold;">NFS</span> и <span style="font-weight: bold;">AFP</span>).<br>
</div>

<h4><a name="p8"></a>Методика настройки прав доступа</h4>


<div style="text-align: justify;">
Настраивать права доступа нужно в зависимости от стратегии
разграничения доступа, которую вы выбрали. Всего стратегий может быть
три:<br>
</div>




<ul>
<li style="text-align: justify;">Разграничение прав доступа по пользователям и группам</li><li>Разграничение прав доступа по компьютерам</li><li>Разграничение прав доступа по пользователям, группам и компьютерам</li>
</ul>

<div style="text-align: justify;">
Для того чтобы правильно настроить права доступа для каждой из этих
стратегий нужно понимать, как права доступа для каждого объекта
накладываются друг на друга. Об этом написано в разделе "<a onclick='parent.obj.go_to("5.1",true,event)' href="null">Немного
теории</a>", вернитесь к нему чтобы освежить память.<br>
</div>


<br>

<div style="text-align: justify;">
Если вы решили ограничить права доступа определенным пользователям и
группам, то нужно выставить нужные права доступа на закладке
"<span style="font-weight: bold;">Права</span>", а на закладке "<span style="font-weight: bold;">Локально"</span> нужно дать полный
доступ всем компьютерам, включая доступ в строке "<span style="font-weight: bold;">По умолчанию</span>". При этом обязательно нужно указать, по каким протоколам будет предоставляться доступ: по <span style="font-weight: bold;">SMB</span>, <span style="font-weight: bold;">NFS</span> или <span style="font-weight: bold;">AFP</span>.<br>
</div>


<br>

<div style="text-align: justify;">
Если вы решили ограничить права доступа определенным компьютерам, то
нужно выставить нужные права доступа для компьютеров на закладке
"<span style="font-weight: bold;">Локально</span>", а на закладке "<span style="font-weight: bold;">Права</span>" дать полный доступ
всем пользователям и группам, включая доступ в строке "<span style="font-weight: bold;">По умолчанию</span>".<br>
</div>


<br>

<div style="text-align: justify;">
Если вы решили разграничить права доступа одновременно и пользователям
и компьютерам, то права доступа настраиваются на всех закладках
одновременно. При этом очень важно понимать то, каким образом сервер в
этом случае будет их проверять. При подключении клиента, сервер сначала
проверяет, имеет ли его компьютер права доступа к общей папке и если
компьютер проходит проверку, то проверяется, имеет ли пользователь, от
имени которого производится подключение право на доступ к этому общему
ресурсу.<br>
</div>



<h4><a name="p9"></a>Настройка "Сетевой корзины"</h4>



<div style="text-align: justify;">На закладке "<span style="font-weight: bold;">Сетевая корзина</span>" можно включить функцию "Сетевой корзины" для данной общей папки и настроить ее параметры.<br>
</div>


<br>


<div style="text-align: center;"><img style="width: 573px; height: 304px;" src="img/recyclebin.png" alt="recyclebin.png"><br>
</div>

<br>

<div style="text-align: justify;">Если флажок <span style="font-weight: bold;">"Включить сетевую корзину"</span> включен, все даннные, удаляемые из данной общей папки не удаляются, а перемещаются в другую папку, которая указывается в поле <span style="font-weight: bold;">"Путь к корзине"</span> и хранятся в ней количество дней, указанное в поле <span style="font-weight: bold;">"Период хранения в корзине (дней)"</span>.
В качестве пути к корзине указывается любая существующая папка на диске
(не обязательно, чтобы она была внутри контейнера общих папок) по
такому же принципу, как указывается путь к самой общей папке. У каждой
общей папки может быть своя папка-корзина, или можно указывать одну
корзину для всех. <br>
</div>

<br>

<div style="text-align: justify;">В качестве периода хранения
указывается количество дней, которые каждый файл хранится в корзине.
Файлы, срок хранения которых превышен, автоматически будут удаляться из
корзины каждую ночь в 23:59. Если в качестве периода хранения указано число 0, содержимое корзины не будет устаревать никогда.<br>
</div>

<br>

<div style="text-align: justify;">Чтобы получить доступ к содержимому корзины, нужно сделать саму корзину общей папкой и настроить права доступа к ней.<br>
<br style="font-weight: bold; color: rgb(204, 0, 0);">
<span style="font-weight: bold; color: rgb(204, 0, 0);">ВНИМАНИЕ!</span>
Сетевая корзина работает только при доступе к файлам по протоколу SMB !
При доступе по протоколам NFS, AFP, FTP,&nbsp; WebDAV, SSH, а также при
доступе к файловой системе сервера из командной строки или через
графический интерфейс <span style="font-weight: bold;">корзина не работает</span>.
Имейте это в виду. Если Вам нужна реально работающая служба сетевой
корзины, настройте клиентов так, чтобы они работали с сервером только
по протоколу SMB. Протокол SMB(CIFS) поддерживает любая настольная
операционная система.<br>
<br>
Компания ЛВА ведет работы по организации службы корзины независимо от
используемого протокола доступа к файлам сервера. Как только эта
функция пройдет тестовые испытания, она войдет в очередное обновление
платформы.<br>
</div>


<h4><a name="p10"></a>Настройка ведения журнала событий для общей папки</h4>

<div style="text-align: justify;">Система ведет единый журнал событий
со всеми данными, которые хранятся на файловом сервере. С его помощью
можно узнавать кто подключается к серверу и к каждой его общей папке,
кто удалил определенный файл или куда и когда переместил его. Подробнее
работа с журналом событий описана в разделе "<a onclick='parent.obj.go_to("10",true,event)' href="null">Работа с журналом событий</a>"
в данном руководстве.<br>
</div>


<br>

<div style="text-align: justify;">В журнал событий попадают события только с общими папками, у которых на закладке "<span style="font-weight: bold;">Журнал событий</span>" установлен флажок "<span style="font-weight: bold;">Включить события с этой папкой в журнал событий</span>".<br>
</div>

<br>

<div style="text-align: center;"><img style="width: 575px; height: 321px;" src="img/eventlog.png" alt="eventlog.png"><br>
</div>

<h4><a name="p11"></a>
Настройка общего доступа из Интернет</h4>


На закладке <span style="font-weight: bold;">"Из Интернет</span>" есть всего один флажок: "<span style="font-weight: bold;">Опубликовать в Интернет</span>".<br>
<br>
<div style="text-align: center;"><img src="img/inetaccess.png" alt="inetaccess.png"><br>
</div>
<br>
<div style="text-align: justify;">При его включении, данная папка
становится доступной через Интернет по протоколам WebDAV и FTP для всех
пользователей, которым не запрещен доступ к серверу из Интернет и
которые имеют права на чтение или на запись в эту папку. Подробнее о
механизмах, которые используются для обеспечения доступа к общим папкам
из Интернет, читайте в разделе "<a onclick='parent.obj.go_to("11",true,event)' href="null">Организация доступа к серверу из Интернет</a>".<br>
<br>
Вы прочитаете в этом разделе о том, что у каждого пользователя,
которому разрешен доступ к серверу из Интернет, есть "домашняя папка
Интернет". Путь к этой папке указывается в окне свойств пользователя.
При подключении к серверу по протоколу FTP или WebDAV, пользователь
оказывается в своей домашней папке.&nbsp; Если вы делаете папку
общедоступной из Интернет, на нее создается ссылка в "домашних папках
Интернет" всех пользователей, которые имеют права доступа к этой общей
папке. Важно понимать, что не нужно включать флажок "<span style="font-weight: bold;">Опубликовать в
Интернет</span>" для самой домашней папки пользователя, потому что он и так в
нее попадает при подключении. "Домашняя папка Интернет" и "Папка,
доступная из Интернет" это разные понятия. "Папки, доступные из
Интернет" монтируются внутрь "домашней папки Интернет", а сама домашняя
папка таковой не является.<br>
</div>
<br>
<div style="text-align: justify;">После выполнения всех настроек,
нажмите кнопку "<span style="font-weight: bold;">Сохранить</span>". Настройки сразу же будут применены. Если
папка стала общей, на ее значке в Файловом менеджере появятся надписи,
показывающие, по каким протоколам она доступна: SMB - по протоколу SMB
(клиенты Windows), NFS - по протоколу NFS (клиенты Unix), AFP - по протоколу AFP (клиенты MacOS), FTP - по
протоколу FTP из Интернет, DAV - по протоколу WebDAV из Интернет.<br>
</div>


</body></html>