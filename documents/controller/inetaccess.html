<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>







<meta content="text/html; charset=UTF-8" http-equiv="content-type" /><title>inetaccess</title></head><body>
<div style="text-align: justify;">
<h1><a name="p11">Организация доступа к серверу из Интернет</a></h1>

</div>

<div style="text-align: justify;">
<h2><a name="p11.1">Введение</a></h2>

</div>
<div style="text-align: justify;"><a name="p11.1">Если в окне свойств пользователя, на закладке "<span style="font-weight: bold;">Права доступа</span>" явно не указан запрет доступа из Интернет, то есть, не включен флажок "<span style="font-weight: bold;">Запретить доступ из Интернет</span>"</a><a name="p11.1">, пользователь может подключаться к своей домашней папке Интернет по протоколам FTP и WebDAV.<br />
</a></div>


<a name="p11.1">
</a><div style="text-align: center;"><a name="p11.1"><img style="width: 682px; height: 482px;" src="img/useraccessrules.png" alt="useraccessrules.png" /><br />
</a></div>
<a name="p11.1"><br />
</a><div style="text-align: justify;"><a name="p11.1">По умолчанию этот флажок включен для
всех пользователей системы, то есть, доступ из Интернет запрещен&nbsp;
каждому пользователю.
</a></div>
<a name="p11.1"><br />
</a><div style="text-align: justify;">Если доступ разрешен, в этом окне
должен быть указан путь к домашней папке Интернет. При разрешенном
доступе и настроенной домашней папке Интернет, пользователь сможет
подключиться к своей домашней папке и к другим Общим папкам,
опубликованным в Интернет. (см. "<a onclick='parent.obj.go_to("5.3.4.2.5",true,event)' href="null">Настройка
общего доступа к папке из Интернет</a>").<br />

</div>
<a name="p11.1"><br />
</a><div style="text-align: justify;"><a name="p11.1">Для обеспечения доступа к данным сервера из Интернет, на сервере установлено две службы:<br />
</a></div>

<ul>
<a name="p11.1">  </a><li><span style="font-weight: bold;">FTP</span>. Служба FTP
организована на базе сервера ProFTPd и позволяет пользователю
подключиться к своей домашней папке и к другим общим папкам, которые
сделаны доступными для него с помощью любого FTP-клиента. Протокол FTP
специально предназначен для передачи файлов, поэтому такой способ
подключения обеспечивает наибольшую скорость работы с данными.
Пользователь работает со своими данными в соответствии с правами,
определенными для него на уровне системы, с помощью <a onclick='parent.obj.go_to("5.3",true,event)' href="null">файлового
менеджера</a>. Однако в системе также существует возможность настроить
различные дополнительные параметры FTP-сервера, влияющие на возможности
пользователя при работе со своими данными по FTP, такие как скорость
работы, максимально возможный размер принимаемого и передаваемого файла
и т.д. Для этого служит раздел <span style="font-weight: bold;">Файловый сервер/Доступ из Интернет/FTP-сервер</span>, который описан далее в этом разделе.<br />

  </li>
<a name="p11.1">  </a><li><span style="font-weight: bold;">WebDAV. </span>Служба WebDAV это
расширение протокола HTTP, позволяющее передавать файлы по этому
протоколу. Она организована на базе Web-сервера Apache. Пользователь
подключается к своей домашней папке и к другим общим папкам, которые
сделаны доступными для него с помощью клиента WebDAV, который
использует стандартный порт 80. Клиент WebDAV интегрирован в Проводник
Windows и чтобы подключиться к своей домашней папке на сервере, нужно
подключить ее как "Сетевую папку"&nbsp; (в качестве пути к папке указать
http://&lt;адрес-сервера&gt;/&lt;имя-пользователя&gt;). Этот способ
может быть удобен если нет возможности подключиться по FTP. Возможность
доступа по протоколу WebDAV подключается автоматически, вместе с
возможностью доступа по FTP. Сервер WebDAV не нужно каким-то образом
настраивать. Пользователь работает со своими данными в соответствии с
правами доступа, настроенными с помощью <a onclick='parent.obj.go_to("5.3",true,event)' href="null">Файлового менеджера</a> на уровне
операционной системы.<br />

  </li>
</ul>
<div style="text-align: justify;"><a name="p11.1">Каждая из этих служб по умолчанию ведет
свой собственный список пользователей. ProFTPd поддерживает список
виртуальных пользователей, WebDAV также позволяет хранить пользователей
в текстовом файле, в таком же формате, как и списки пользователей,
используемые для аутентификации на Web-сервере Apache.<br />
</a></div>
<a name="p11.1"><br />
</a><div style="text-align: justify;"><a name="p11.1">LVA Business Server работает иначе, в нем эти службы
настроены на использование системного списка пользователей. Таким
образом необходимо один раз завести пользователя, настроить для него
права доступа и он сможет работать со своими данными на сервере как из
локальной сети, так и из Интернет.<br />
</a></div>
<a name="p11.1"><br />
</a><div style="text-align: justify;">
<h2><a name="p11.2">Настройка пользователя для доступа к серверу из Интернет</a></h2>

</div>
<div style="text-align: justify;"><a name="p11.2">Рассмотрим от начала до конца
процедуру создания удаленного пользователя, которому необходим доступ к
серверу с помощью FTP-клиента и браузера. По задумке это будет
исключительно Интернет-пользователь. Он не будет иметь доступа к своим
данным из локальной сети.<br />
</a></div>



<div style="text-align: justify;">
<h3><a name="p11.2.1">Создание пользователя</a></h3>

</div>

<div style="text-align: justify;"><a name="p11.2.1">1. Откройте раздел "<span style="font-weight: bold;">Файловый сервер</span>",
затем подраздел "<span style="font-weight: bold;">Пользователи</span>", нажмите на нем правой кнопкой мыши и
выполните команду "<span style="font-weight: bold;">Новый пользователь</span>" из контекстного меню.<br />
</a></div>
<a name="p11.2.1"><br />
</a><div style="text-align: center;"><a name="p11.2.1"><img style="width: 204px; height: 113px;" src="img/newusermenu.png" alt="newusermenu.png" /><br />
</a></div>
<a name="p11.2.1"><br />
</a><div style="text-align: justify;"><a name="p11.2.1">2. Назовите пользователя (например "<span style="font-style: italic;">ivanov</span>"), заполните различные закладки данными о нем:<br />
</a></div>
<a name="p11.2.1"><br />
</a><div style="text-align: center;"><a name="p11.2.1"><img src="img/inetuser1.png" alt="inetuser1.png" /><br />
</a></div>
<a name="p11.2.1"><br />
</a><div style="text-align: justify;"><a name="p11.2.1">На закладке "<span style="font-weight: bold;">Основное</span>" необходимо указать "<span style="font-weight: bold;">Имя пользователя</span>", и его "<span style="font-weight: bold;">Пароль</span>".
Также, если нужно чтобы пользователь не имел возможности подключаться
локально к командной строке сервера, нужно изменить значение в поле "<span style="font-weight: bold;">Командная оболочка</span>" на /bin/false.<br />
</a></div>
<a name="p11.2.1"><br />
</a><div style="text-align: justify;">Остальные закладки можете заполнять
по своему усмотрению. Подробнее каждое поле описано в разделе "<a onclick='parent.obj.go_to("5.4",true,event)' href="null">Работа с
пользователями и группами</a>". Заполните все закладки, кроме закладки "<span style="font-weight: bold;">Права доступа</span>" и нажмите "<span style="font-weight: bold;">OK</span>". Если все заполнено без ошибок,
пользователь появится в списке пользователей.<br />

</div>

<div style="text-align: justify;">
<h3><a name="p11.2.2">Создание домашней папки Интернет</a></h3>

</div>

<div style="text-align: justify;"><a name="p11.2.2">1. Снова откройте пользователя "<span style="font-style: italic;">ivanov</span>" из списка и в окне его свойств перейдите на закладку "<span style="font-weight: bold;">Права доступа</span>"<br />
</a></div>
<a name="p11.2.2"><br />
</a><div style="text-align: justify;"><a name="p11.2.2">2. Так как по задумке это будет
исключительно Интернет-пользователь, нужно включить флажки "<span style="font-weight: bold;">Запретить
удаленный доступ к командной строке сервера</span>" и "<span style="font-weight: bold;">Запретить доступ по
протоколу SMB</span>", а также отключить флажок "<span style="font-weight: bold;">Запретить доступ из Интернет</span>".<br />
</a></div>
<a name="p11.2.2"><br />
</a><div style="text-align: center;"><img src="img/inetaccessrights.png" alt="inetaccessrights.png" /><br />

</div>
<a name="p11.2.2"><br />
</a><div style="text-align: justify;"><a name="p11.2.2">Таким образом пользователь сможет подключаться к серверу только из Интернет.<br />
</a></div>
<a name="p11.2.2"><br />

</a><div style="text-align: justify;">3. Создадим домашнюю папку, в которую
пользователь будет автоматически попадать при подключении. Она
указывается в поле "<span style="font-weight: bold;">Домашняя папка Интернет</span>". Можно указать путь к ней
вручную, а можно нажать кнопку <img src="img/selectfolderbtn.png" alt="selectfolderbtn.png" /> и выбрать ее с помощью <a onclick='parent.obj.go_to("5.3.2",true,event)' href="null">Файлового менеджера</a>. <br />

</div>

<a name="p11.2.2"><br />
</a><div style="text-align: center;"><a name="p11.2.2"><img src="img/selectfile.png" alt="selectfile.png" /><br />
</a></div>
<a name="p11.2.2"><br />
</a><div style="text-align: justify;"><a name="p11.2.2">С помощью файлового менеджера можно
создать папку, настроить для нее права доступа и выбрать ее в качестве
"<span style="font-weight: bold;">Домашней папки Интернет</span>" для данного пользователя.<br />
</a></div>
<a name="p11.2.2"><br />
</a><div style="text-align: justify;"><a name="p11.2.2">4. Создадим папку "<span style="font-style: italic;">FTP</span>", в которой
будут все домашние папки дистанционных пользователей, а в ней создадим
папку "<span style="font-style: italic;">ivanov</span>". Нажмите кнопку <img src="img/makedirbtn.png" alt="makedirbtn.png" /> на Панели инструментов, введите "<span style="font-style: italic;">FTP</span>" как название папки и нажмите <span style="font-style: italic;">Enter</span>. Затем войдите в созданную папку.<br />
</a></div>
<a name="p11.2.2"><br />
</a><div style="text-align: justify;"><a name="p11.2.2">5. В папке FTP снова нажмите кнопку <img src="img/makedirbtn.png" alt="makedirbtn.png" />, введите "<span style="font-style: italic;">ivanov</span>" в качестве имени папки и нажмите "<span style="font-weight: bold;">OK</span>". Папка "<span style="font-style: italic;">ivanov</span>" появится внутри папки FTP.<br />
</a></div>
<a name="p11.2.2"><br />
</a><div style="text-align: center;"><a name="p11.2.2"><img src="img/ivanovfolder.png" alt="ivanovfolder.png" /><br />
</a></div>
<a name="p11.2.2"><br />
</a><div style="text-align: justify;"><a name="p11.2.2">6. Настройте права доступа к папке "<span style="font-style: italic;">ivanov</span>". Для этого выделите папку "<span style="font-style: italic;">ivanov</span>", нажмите кнопку <img src="img/propbtn.png" alt="propbtn.png" /> на Панели инструментов и перейдите на закладку "<span style="font-weight: bold;">Права</span>" в появившемся окне свойств.<br />
</a></div>
<a name="p11.2.2"><br />
</a><div style="text-align: center;"><a name="p11.2.2"><img src="img/ivanovfolderrules.png" alt="ivanovfolderrules.png" /><br />
</a></div>
<a name="p11.2.2"><br />
</a><div style="text-align: justify;">Установите пользователя "<span style="font-style: italic;">ivanov</span>" в
качестве владельца этой папки. Также установите все права доступа к
этой папке для владельца и пользователя "<span style="font-style: italic;">ivanov</span>". Можно дать права и
другим пользователям. Например на рисунке выше полный доступ
предоставлен пользователю <span style="font-style: italic;">sysadmin</span>, а также пользователю <span style="font-style: italic;">guest</span> дано
право входа в папку и право на чтение ее содержимого. "<span style="font-weight: bold;">Права
наследуемые</span>" настроены так же как и "<span style="font-weight: bold;">Права текущие</span>", следовательно, все
создаваемые файлы и папки внутри папки "<span style="font-style: italic;">ivanov</span>" будут иметь такие
права, которые здесь установлены. Подробнее о правах доступа и их
установке смотрите раздел "<a onclick='parent.obj.go_to("5.3.4.1",true,event)' href="null">Установка прав доступа</a>".<br />

</div>
<a name="p11.2.2"><br />
</a><div style="text-align: justify;">
<a name="p11.2.2">После настройки прав доступа нажмите кнопку "<span style="font-weight: bold;">OK</span>" и закройте окно свойств папки.<br />
</a></div>

<a name="p11.2.2"><br />
</a><div style="text-align: justify;"><a name="p11.2.2">7. Теперь, когда папка создана и настроена, выделите ее и нажмите кнопку <img src="img/selectbtn.png" alt="selectbtn.png" /> (Выбрать) на панели инструментов и она будет выбрана в поле "<span style="font-weight: bold;">Домашняя папка Интернет</span>".<br />
<br />
</a></div>
<div style="text-align: center;"><a name="p11.2.2"><img src="img/selectinetfolder.png" alt="selectinetfolder.png" /><br />
</a></div>
<a name="p11.2.2"><br />
</a><div style="text-align: justify;"><a name="p11.2.2">8. Нажмите кнопку "<span style="font-weight: bold;">OK</span>".
Окно свойств пользователя закроется. Теперь пользователь может
подключаться из Интернет к своей домашней папке (в данном случае это<span style="font-style: italic;"> /FTP/ivanov</span>).<br />
</a></div>

<div style="text-align: justify;">
<h3><a name="p11.2.3">
Подключение пользователя из Интернет
</a></h3>
</div>


<div style="text-align: justify;">
<a name="p11.2.3">Пользователь может подключиться к своей домашней папке из Интернет тремя способами:<br />
</a></div>

<a name="p11.2.3"><br />
</a><div style="text-align: justify;">
<a name="p11.2.3">1. По протоколу FTP с использованием любого FTP-клиента, в частности с
помощью обычного проводника Windows. Этот способ наиболее
предпочтителен, потому что FTP быстрее других протоколов передачи
файлов и поддерживает докачку. Также, службу FTP можно тонко
настраивать с помощью специального раздела Панели управления, который
будет описан далее в этом руководстве.<br />
</a></div>

<a name="p11.2.3"><br />
</a><div style="text-align: justify;">
<a name="p11.2.3">2. По протоколу HTTP (WebDAV) с помощью клиента WebDAV, а частности с
помощью обычного проводника Windows. Можно подключить домашнюю папку
пользователя в качестве сетевой папки, которая затем всегда будет видна в Сетевом окружении. Этот способ может быть полезен
так как работает везде, где есть хоть какой-нибудь Интернет.
Рекомендуется&nbsp; в случае невозможности подключиться по FTP
(например если брандмауэром закрыты порты 20 и 21). Порт 80, по
которому работает HTTP крайне редко блокируют<br />
</a></div>

<a name="p11.2.3"><br />
</a><div style="text-align: justify;">
<a name="p11.2.3">3. С помощью Web-интерфейса. Нужно набрать в браузере IP-адрес или
доменное имя сервера, ввести имя и пароль пользователя и откроется
Файловый менеджер, такой же, как в Панели управления сервером, но с
ограниченным набором функций. Этот способ можно использовать в редких
случаях, когда нет ни FTP-клиента, ни клиента WebDAV.<br />
</a></div>


<div style="text-align: justify;">
<h4><a name="p11.2.3.1">Подключение к серверу по протоколу FTP</a></h4>

</div>

<div style="text-align: justify;"><a name="p11.2.3.1">Пользователь, чтобы подключиться к
серверу, может использовать любой FTP-клиент как в активном, так и в
пассивном режиме. В качестве FTP-сервера нужно указать IP-адрес или
доменное имя сервера, в качестве логина и пароля нужно указать имя и
пароль пользователя.<br />
</a></div>
<a name="p11.2.3.1"><br />
</a><div style="text-align: justify;"><a name="p11.2.3.1">Простейшим и наиболее доступным FTP-клиентом является проводник Windows. Нужно набрать в адресной строке:<br />
</a></div>
<a name="p11.2.3.1"><br />
</a><div style="text-align: left; font-style: italic;"><a name="p11.2.3.1">ftp://&lt;адрес-сервера&gt;<br />
</a></div>
<a name="p11.2.3.1"><br />
</a><div style="text-align: justify;"><a name="p11.2.3.1">далее в появившемся окне ввести имя пользователя и пароль<br />
</a></div>
<a name="p11.2.3.1"><br />
</a><div style="text-align: center;"><a name="p11.2.3.1"><img src="img/ftpaccess.png" alt="ftpaccess.png" /><br />
</a></div>
<a name="p11.2.3.1"><br />
</a><div style="text-align: justify;"><a name="p11.2.3.1">и откроется домашняя папка пользователя.<br />
</a></div>
<a name="p11.2.3.1"><br />
</a><div style="text-align: justify;"><a name="p11.2.3.1">Также, можно подключить домашнюю папку пользователя по протоколу FTP в качестве сетевой папки.<br />
</a></div>
<a name="p11.2.3.1"><br />
</a><div style="text-align: justify;"><a name="p11.2.3.1">Чтобы это сделать, следуйте инструкции:<br />
</a></div>
<a name="p11.2.3.1"><br />
</a><div style="text-align: justify;"><a name="p11.2.3.1">1. В Проводнике Windows выполните команду <span style="font-weight: bold;">"Сервис</span>" --&gt; "<span style="font-weight: bold;">Подключить сетевой диск</span>"<br />
</a></div>
<a name="p11.2.3.1"><br />
</a><div style="text-align: center;"><a name="p11.2.3.1"><img src="img/netfolder1.png" alt="netfolder1.png" /><br />
</a></div>
<a name="p11.2.3.1"><br />
</a><div style="text-align: justify;"><a name="p11.2.3.1">2. Нажмите гиперссылку "<span style="font-weight: bold;">Подписаться на хранилище в Интернете или подключиться к сетевому серверу</span>"<br />
</a></div>
<a name="p11.2.3.1"><br />
</a><div style="text-align: justify;"><a name="p11.2.3.1">3. В следующем окне нажмите "<span style="font-weight: bold;">Далее</span>"<br />
</a></div>
<a name="p11.2.3.1"><br />
</a><div style="text-align: justify;"><a name="p11.2.3.1">4. В появившемся окне в списке выберите пункт "<span style="font-weight: bold;">Выберите другое сетевое размещение</span>" и нажмите "<span style="font-weight: bold;">Далее</span>"<br />
</a></div>
<a name="p11.2.3.1"><br />
</a><div style="text-align: center;"><a name="p11.2.3.1"><img src="img/netfolder2.png" alt="netfolder2.png" /><br />
</a></div>
<a name="p11.2.3.1"><br />
</a><div style="text-align: justify;"><a name="p11.2.3.1">5. В следующем окне введите адрес FTP-сервера в формате <span style="font-style: italic;">ftp://&lt;адрес-сервера&gt;</span> и нажмите "<span style="font-weight: bold;">Далее</span>"<br />
</a></div>
<a name="p11.2.3.1"><br />
</a><div style="text-align: center;"><a name="p11.2.3.1"><img src="img/netfolder4.png" alt="netfolder4.png" /><br />
</a></div>
<a name="p11.2.3.1"><br />
</a><div style="text-align: justify;"><a name="p11.2.3.1">6. В следующем окне введите имя пользователя и нажмите "<span style="font-weight: bold;">Далее</span>"<br />
</a></div>
<a name="p11.2.3.1"><br />
</a><div style="text-align: center;"><a name="p11.2.3.1"><img src="img/netfolder3.png" alt="netfolder3.png" /><br />
</a></div>
<a name="p11.2.3.1"><br />
</a><div style="text-align: justify;"><a name="p11.2.3.1">7. В следующем окне введите имя общей папки, под которым она запишется в Сетевом окружении и нажмите "Далее".<br />
</a></div>
<a name="p11.2.3.1"><br />
</a><div style="text-align: center;"><a name="p11.2.3.1"><img src="img/netfolder5.png" alt="netfolder5.png" /><br />
</a></div>

<a name="p11.2.3.1"><br />
<br />
</a><div style="text-align: justify;">
<a name="p11.2.3.1">8. Нажмите "<span style="font-weight: bold;">Готово</span>" для завершения работы мастера.<br />
</a></div>
<a name="p11.2.3.1"><br />
</a><div style="text-align: justify;"><a name="p11.2.3.1">Далее, при входе в Сетевое окружение, эта Сетевая папка будет видна в разделе "<span style="font-weight: bold;">Интернет</span>".<br />
</a></div>
<a name="p11.2.3.1"><br />
</a><div style="text-align: center;"><a name="p11.2.3.1"><img src="img/netfolder6.png" alt="netfolder6.png" /><br />
</a></div>
<a name="p11.2.3.1"><br />
</a><div style="text-align: justify;"><a name="p11.2.3.1">При входе в эту папку система
попросит ввести имя пользователя и пароль. Можно создать ярлык на эту
папку на рабочем столе, чтобы в любой момент иметь возможность войти в
нее.<br />
</a></div>

<div style="text-align: justify;">
<h4><a name="p11.2.3.2">Подключение к серверу по протоколу WebDAV</a></h4>

</div>

<div style="text-align: justify;"><a name="p11.2.3.2">Чтобы подключиться к серверу по
протоколу WebDAV можно использовать любой клиент WebDAV. Клиентом
WebDAV также является и проводник Windows, с помощью которого можно
подключить домашнюю папку пользователя в качестве сетевой папки. <br />
</a></div>
<a name="p11.2.3.2"><br />
</a><div style="text-align: justify;"><a name="p11.2.3.2">Для подключения домашней папки
пользователя в качестве сетевой папки по протоколу WebDAV используется
такая же последовательность действий, как и при подключении по
протоколу FTP, только в качестве адреса сервера указывается:
<span style="font-style: italic;">http://&lt;адрес-сервера&gt;/&lt;имя-пользователя&gt;</span>, например:<br />
</a></div>
<a name="p11.2.3.2"><br />
</a><div style="text-align: justify;"><span style="font-style: italic;"><a name="p11.2.3.2">http://192.168.0.58/ivanov</a></span><a name="p11.2.3.2"><br />
</a></div>

<div style="text-align: justify;">
<h4><a name="p11.2.3.3">Подключение к серверу с помощью Web-интерфейса</a></h4>

</div>

<div style="text-align: justify;"><a name="p11.2.3.3">Если ни один из протоколов (FTP,
WebDAV) не доступен, пользователь может подключиться к своей домашней
папке с помощью браузера. Для этого нужно просто набрать в браузере
адрес сервера. Браузер покажет окно авторизации, в котором нужно ввести
имя пользователя и пароль и после успешного ввода в браузере откроется
файловый менеджер, такой же, как в Панели управления, только с
ограниченными функциями:<br />
</a></div>
<a name="p11.2.3.3"><br />
</a><div style="text-align: center;"><a name="p11.2.3.3"><img src="img/webfolder.png" alt="webfolder.png" /><br />
</a></div>
<a name="p11.2.3.3"><br />
</a><div style="text-align: justify;">С помощью файлового менеджера
пользователь может загружать файлы в свою домашнюю папку, скачивать
файлы из нее, создавать в ней новые папки, переименовывать и удалять
файлы и папки. Разумеется, он все это может делать в рамках прав
доступа, назначенных для этих файлов и папок. Подробнее о работе с
файловым менеджером можно прочитать в разделе "<a onclick='parent.obj.go_to("5.3",true,event)' href="null">Управление данными
сервера</a>" в этом руководстве.<br />

</div>
<h3><a name="p11.2.4">
Публикация общих папок сервера в Интернет</a></h3>


<div style="text-align: justify;">На данном этапе пользователь
подключается к своей домашней папке и получает доступ к данным в ней.
Однако можно сделать для него доступными другие папки сервера, которые
находятся вне его домашней папки, в разделе данных (в папке
/data/share). Для этого нужно настроить права доступа этого
пользователя к общей папке и опубликовать ее в Интернет. Эта тема уже
рассматривалась в разделе "<a onclick='parent.obj.go_to("5.3",true,event)' href="null">Управление данными сервера</a>". Сейчас будет
показан практический пример, как опубликовать папку <span style="font-style: italic;">files</span> так, чтобы
она была доступна пользователю <span style="font-style: italic;">ivanov</span>, который подключился к своей
домашней папке из Интернет.<br />

</div>
<a name="p11.2.4"><br />
1. Откройте в Панели управления "<span style="font-weight: bold;">Файловый менеджер</span>"<br />
<br />
</a><div style="text-align: center;"><a name="p11.2.4"><img style="width: 212px; height: 176px;" src="img/shared_folders1.png" alt="shared_folders1.png" /><br />
</a></div>
<a name="p11.2.4"><br />
2. Найдите в файловом менеджере папку <span style="font-style: italic;">files</span>, выделите ее, нажмите кнопку <img src="img/propbtn.png" alt="propbtn.png" /> чтобы отобразить ее свойства.<br />
<br />
3. В окне свойств перейдите на закладку "<span style="font-weight: bold;">Права</span>"
и дайте пользователю <span style="font-style: italic;">ivanov</span> доступ к этой папке. Например, доступ
только на чтение и исполнение (чтобы он мог войти в эту папку и
прочитать ее содержимое).<br />
<br />
</a><div style="text-align: center;"><a name="p11.2.4"><img src="img/inetfolderaccess1.png" alt="inetfolderaccess1.png" /><br />
</a></div>
<a name="p11.2.4"><br />
</a><div style="text-align: justify;"><a name="p11.2.4">Также включите флажок "<span style="font-weight: bold;">Применить ко всем вложенным каталогам и файлам</span>", чтобы пользователь мог читать и их тоже.<br />
</a></div>
<a name="p11.2.4"><br />
</a><div style="text-align: justify;"><a name="p11.2.4">4. Перейдите на закладку "<span style="font-weight: bold;">Общий доступ</span>", затем на закладку "<span style="font-weight: bold;">Через Интернет</span>" и включите флажок "<span style="font-weight: bold;">Опубликовать в Интернет</span>".<br />
</a></div>
<a name="p11.2.4"><br />
</a><div style="text-align: center;"><a name="p11.2.4"><img src="img/inetfolder2.png" alt="inetfolder2.png" /><br />
</a></div>
<a name="p11.2.4"><br />
</a><div style="text-align: justify;"><a name="p11.2.4">5. Нажмите <span style="font-weight: bold;">OK</span>. Закройте файловый менеджер.<br />
</a></div>
<a name="p11.2.4"><br />
</a><div style="text-align: justify;"><a name="p11.2.4">Теперь, если пользователь <span style="font-style: italic;">ivanov</span>
подключится к своей домашней папке из Интернет, он увидит в ней папку
"<span style="font-style: italic;">files</span>" и сможет работать с ней в соответствии с правами доступа,
которые ему назначены, но при этом саму папку files он удалить не
сможет. <br />
</a></div>
<a name="p11.2.4"><br />
</a><div style="text-align: center;"><a name="p11.2.4"><img src="img/inetfolder3.png" alt="inetfolder3.png" /><br />
</a></div>
<a name="p11.2.4"><br />
</a><div style="text-align: justify;"><a name="p11.2.4">Папка, опубликованная в Интернет
создается внутри домашней папки Интернет каждого пользователя, если он
имеет к ней доступ на чтение или на запись.<br />
</a></div>

<div style="text-align: justify;">
<h2><a name="p11.3">Настройка FTP-сервера</a></h2>

</div>

<div style="text-align: justify;"><a name="p11.3">Уже ранее говорилось что наиболее
предпочтительно использовать именно FTP для доступа из Интернет. FTP
быстрее передает файлы, поддерживает докачку, в Панели
управления есть модуль, позволяющий тонко настраивать FTP-сервер, а
также осуществлять мониторинг активности пользователей, которые к нему
подключаются.<br />
</a></div>
<a name="p11.3"><br />
</a><div style="text-align: justify;"><a name="p11.3">Чтобы войти в него, нужно развернуть "<span style="font-weight: bold;">Файловый сервер</span>", далее развернуть раздел "<span style="font-weight: bold;">Доступ из Интернет</span>" и затем запустить "<span style="font-weight: bold;">FTP-сервер</span>".<br />
</a></div>
<a name="p11.3"><br />
</a><div style="text-align: center;"><a name="p11.3"><img src="img/ftpservertree.png" alt="ftpservertree.png" /><br />
</a></div>
<a name="p11.3"><br />
</a><div style="text-align: justify;">Настраивать FTP-сервер и смотреть его
активность имеет смысл только
после того, как организован доступ пользователей к серверу из Интернет.
Этот процесс описан выше, в начале раздела "<a onclick='parent.obj.go_to("11",true,event)' href="null">Организация доступа к
серверу из Интернет</a>".<br />

</div>

<a name="p11.3"><br />
</a><div style="text-align: justify;"><a name="p11.3">Операции, которые можно выполнять с помощью этого модуля можно разделить на четыре категории. С его помощью можно:<br />
</a></div>
<ul>
  <li><a name="p11.3">Установить основные параметры сервера,
определяющие, на какие
запросы он будет отвечать: какие IP-адреса и имена и какой порт он
будет слушать. Также здесь определяется такой параметр как
"Приветствие", которое FTP-сервер будет отправлять клиенту при его
подключении.<br />
  </a></li>
<a name="p11.3">  </a><li><a name="p11.3">Управлять максимальной нагрузкой, которую могут создавать
пользователи, регулируя такие параметры как максимальное количество
одновременных подключений к серверу, максимальный размер файла, который
пользователи могут принять или передать на сервер, максимальная
скорость приема и передачи для сервера в целом и для каждого
конкретного пользователя в частности</a></li>
<a name="p11.3">  </a><li><a name="p11.3">Осуществлять мониторинг активности пользователей на сервере,
просматривать, какие операции выполняет каждый пользователь на сервере
в данный момент, а также, принудительно отключать любого пользователя
от сервера.</a></li>
<a name="p11.3">  </a><li><a name="p11.3">Организовать анонимный FTP-сервер, на который сможет входить любой, кто указал в качестве имени пользователя
"anonymous" и в качестве пароля свой e-mail-адрес. В этом случае
пользователи при подключении попадают в домашнюю папку анонимного пользователя.</a></li>
</ul>
<div style="text-align: justify;"><a name="p11.3">Для осуществления этих действий модуль содержит ряд параметров, разбитых на несколько закладок.<br />
</a></div>
<a name="p11.3"><br />
</a><div style="text-align: center;"><a name="p11.3"><img style="width: 752px; height: 488px;" src="img/ftpserver.png" alt="ftpserver.png" /><br />
</a></div>

<div style="text-align: justify;">
<h3><a name="p11.3.1">
Закладка "Основное"</a></h3>


</div>
<ul>
<a name="p11.3.1">  </a><li><span style="font-weight: bold;"><a name="p11.3.1">IP-адреса и имена хостов</a></span>
<a name="p11.3.1">- список имен хостов и IP-адресов,
разделенных пробелами, на которые будет отзываться FTP-сервер при
подключении клиента.Обычно в этом списке нужно указать внешний IP-адрес
сервера, внутренний IP-адрес, а также внешнее и внутреннее доменные
имена </a></li>
<a name="p11.3.1">  </a><li><span style="font-weight: bold;"><a name="p11.3.1">Порт сервера</a></span><a name="p11.3.1"> - порт, на котором FTP-сервер слушает соединения. В
основном FTP-сервер ассоциируется с портом 21. Этот порт считается стандартным и
используется при подключении всеми FTP-клиентами по умолчанию.</a></li>
<a name="p11.3.1">  </a><li><span style="font-weight: bold;"><a name="p11.3.1">Приветствие</a></span><a name="p11.3.1"> - приветственное сообщение, которое отправляется
клиенту при его подключении к серверу. Может содержать любое количество
строк. Сервер поддерживает UTF-8, поэтому приветствие может быть на
русском языке и включать любые другие символы.</a></li>
</ul>
<div style="text-align: justify;">
<h3><a name="p11.3.2">Закладка "Ограничение соединений"</a></h3>

</div>

<div style="text-align: justify;"><a name="p11.3.2">На этой закладке устанавливаются
ограничения, накладываемые на соединения пользователей к серверу.
Значения всех параметров это целые числа, названия параметров в
основном говорят сами за себя. Если органичения не указаны, их нет.<br />
</a></div>
<a name="p11.3.2"><br />
</a><div style="text-align: center;"><a name="p11.3.2"><img src="img/ftpsettings1.png" alt="ftpsettings1.png" /><br />
</a></div>
<a name="p11.3.2"><br />
</a><ul>
<a name="p11.3.2">  </a><li><span style="font-weight: bold;"><a name="p11.3.2">Максимальное количество клиентов</a></span><a name="p11.3.2"> - общее количество клиентов, которые могут одновременно быть подключенными к FTP-серверу</a></li>
<a name="p11.3.2">  </a><li><span style="font-weight: bold;"><a name="p11.3.2">Максимальное количество клиентов с одного хоста</a></span><a name="p11.3.2"> - общее количество клиентов,
которые могут одновременно подключиться к серверу с одного удаленного
IP-адреса</a></li>
<a name="p11.3.2">  </a><li><span style="font-weight: bold;"><a name="p11.3.2">Максимальное количество клиентов с одним именем пользователя</a></span><a name="p11.3.2"> -
максимальное количество соединений, которые один клиент может
одновременно создать с этим FTP-сервером</a></li>
<a name="p11.3.2">  </a><li><span style="font-weight: bold;"><a name="p11.3.2">Максимальное количество хостов, с которых может подключиться один
пользователь</a></span><a name="p11.3.2"> - максимальное количество IP-адресов, с которых
пользователь с одним и тем же именем может одновременно подключиться</a></li>
<a name="p11.3.2">  </a><li><span style="font-weight: bold;"><a name="p11.3.2">Максимальное количество неавторизованных подключений с одного
хоста</a></span><a name="p11.3.2"> - максимальное количество анонимных подключений с одного
IP-адреса. Имеет смысл если задействована служба анонимного FTP-сервера<br />
  </a></li>
<a name="p11.3.2">  </a><li><span style="font-weight: bold;"><a name="p11.3.2">Максимальное количество неуспешных попыток подключения</a></span><a name="p11.3.2"> -
максимальное количество попыток входа пользователя с неправильным
паролем, которые идут подряд. Полезно установить этот параметр для
защиты от попыток подбора пароля для входа на FTP-сервер.</a></li>
</ul>
<div style="text-align: justify;">
<h3><a name="p11.3.3">Закладка "Ограничения времени и объема"</a></h3>

</div>

<div style="text-align: justify;"><a name="p11.3.3">На этой закладке устанавливаются
максимальные значения скорости приема и передачи, размера файлов и
времени, которое пользователи могут проводить на сервере. Единица
измерения каждого параметра указана в скобках после его названия.
Значения всех параметров целые числа. Если ограничений не указано, их нет.<br />
</a></div>
<a name="p11.3.3"><br />
</a><div style="text-align: center;"><a name="p11.3.3"><img src="img/ftpsettings2.png" alt="ftpsettings2.png" /><br />
</a></div>
<a name="p11.3.3"><br />
</a><ul>
<a name="p11.3.3">  </a><li><span style="font-weight: bold;"><a name="p11.3.3">Максимальное время сеанса</a></span><a name="p11.3.3"> - максимальное время, которое
пользователь может провести на FTP-сервере, включая время бездействия и
время передачи и приема файлов</a></li>
<a name="p11.3.3">  </a><li><span style="font-weight: bold;"><a name="p11.3.3">Максимальное время на попытку подключения</a></span><a name="p11.3.3"> - максимальное время,
которое дается пользователю на попытку подключиться, начиная от ввода
адреса сервера и до завершения ожидания после ввода пароля</a></li>
<a name="p11.3.3">  </a><li><span style="font-weight: bold;"><a name="p11.3.3">Максимальное время неактивности</a></span><a name="p11.3.3"> - максимальное время, которое
пользователь может провести на FTP-сервере не проявляя никакой
активности (не принимая и не передавая файлы)</a></li>
<a name="p11.3.3">  </a><li><span style="font-weight: bold;"><a name="p11.3.3">Максимальная скорость FTP-сервера</a></span><a name="p11.3.3"> - это пропускная способность
канала, которая выделяется для трафика FTP-сервера. Это даже не
параметр самого FTP-сервера, это параметр ядра, который ограничивает
общий трафик, идущий с FTP-сервера. Это осуществляется с помощью
механизма Traffic Shaping. Этот механизм одновременно замедляет все
соединения так, чтобы их совокупная скорость не превышала указанную
величину, а также, распределяет пропускную способность равномерно между
всеми соединениями и постоянно перераспределяет ее в режиме онлайн по
мере закрытия и открытия новых соединений.<br />
  </a></li>
<a name="p11.3.3">  </a><li><span style="font-weight: bold;"><a name="p11.3.3">Максимальная скорость передачи пользователя по умолчанию </a></span><a name="p11.3.3">-
значение по умолчанию для максимальной скорости, с которой пользователь
может передавать данные на сервер (закачивать файлы).Это значение
устанавливается всем пользователям, для которых оно не указано явно на
следующей закладке "<span style="font-weight: bold;">Права доступа</span>". </a></li>
<a name="p11.3.3">  </a><li><span style="font-weight: bold;"><a name="p11.3.3">Максимальная скорость приема пользователя по умолчанию </a></span><a name="p11.3.3">- значение
по
умолчанию для максимальной скорости, с которой пользователь может
принимать данные с сервера (скачивать файлы).Это значение
устанавливается всем пользователям, для которых оно не указано явно на
следующей закладке "<span style="font-weight: bold;">Права доступа</span>".</a></li>
<a name="p11.3.3">  </a><li><span style="font-weight: bold;"><a name="p11.3.3">Максимальный размер передаваемого файла</a></span><a name="p11.3.3"> - максимальный размер файла, который пользователь может закачать на сервер.</a></li>
<a name="p11.3.3">  </a><li><span style="font-weight: bold;"><a name="p11.3.3">Максимальный размер принимаемого файла</a></span><a name="p11.3.3"> - максимальный размер файла, который пользователь может скачать с сервера.</a></li>
</ul>
<div style="text-align: justify;">Многие могут поинтересоваться, почему
нет ограничений на общее количество файлов и на общее дисковое
пространство, которое данные пользователя могут занимать. FTP-сервер не
позволяет определять такие ограничения, однако так как в конфигурации
LVA Business Server используются системные пользователи, для них
действуют все ограничения и правила, накладываемые самой операционной
системой. В частности, для каждого системного пользователя
распространяется механизм квотирования дисковых ресурсов, работа с
которым описана в разделе "<a onclick='parent.obj.go_to("9",true,event)' href="null">Квотирование дискового пространства и
количества файлов</a>" данного руководства. Таким образом можно для каждого
пользователя ограничить общий объем и количество данных, которые он может хранить на сервере.<br />

</div>


<div style="text-align: justify;">
<h3><a name="p11.3.4">Закладка "Права доступа"</a></h3>

</div>

<div style="text-align: justify;"><a name="p11.3.4">На этой закладке устанавливается, какие пользователи имеют доступ к FTP-серверу и с какой скоростью.<br />
</a></div>
<a name="p11.3.4"><br />
</a><div style="text-align: center;"><a name="p11.3.4"><img src="img/ftpsettings3.png" alt="ftpsettings3.png" /><br />
</a></div>
<a name="p11.3.4"><br />
</a><div style="text-align: justify;"><a name="p11.3.4">В списке "<span style="font-weight: bold;">Права доступа пользователей</span>" указывается режим доступа пользователей к FTP-серверу. Возможен выбор из трех значений:<br />
</a></div>
<ul>
<a name="p11.3.4">  </a><li style="font-weight: bold;"><a name="p11.3.4">Доступ разрешен всем</a></li>
<a name="p11.3.4">  </a><li style="font-weight: bold;"><a name="p11.3.4">Доступ запрещен всем</a></li>
<a name="p11.3.4">  </a><li><span style="font-weight: bold;"><a name="p11.3.4">Доступ разрешен списку </a></span><a name="p11.3.4">- при выборе этого значения доступ к
серверу получают только пользователи из таблицы ниже, у которых включен
флажок в колонке "Разрешен".</a></li>
</ul>
<div style="text-align: justify;">По умолчанию доступ разрешен всем.
Эта настройка не перекрывает запрет доступа, установленный в окне
свойств пользователя на закладке "<span style="font-weight: bold;">Права доступа</span>" флажком "<span style="font-weight: bold;">Запретить
доступ из Интернет</span>". (см. "<a onclick='parent.obj.go_to("5.4.2",true,event)' href="null">Создание учетной записи пользователя</a>").
Запрет доступа в этом окне запрещает доступ только к FTP-серверу, а
в настройках пользователя запрет доступа закрывает доступ к обоим
серверам: и к FTP и к WebDAV и этот запрет имеет более высокий
приоритет.<br />

</div>
<a name="p11.3.4"><br />
</a><div style="text-align: justify;"><a name="p11.3.4">В таблице ниже можно указать, с какой скоростью каждый пользователь может передавать и принимать файлы.<br />
</a></div>
<a name="p11.3.4"><br />
</a><div style="text-align: justify;"><a name="p11.3.4">С помощью кнопок над таблицей можно
добавлять строки, изменять их, удалять и менять местами. При наведении
на кнопку появляется всплывающая подсказка, однозначно определяющая
назначение этой кнопки.<br />
</a></div>
<a name="p11.3.4"><br />
</a><div style="text-align: justify;"><a name="p11.3.4">Все пользователи, которые не указаны
в этой таблице, работают со скоростями приема и передачи по умолчанию,
указанными на закладке "<span style="font-weight: bold;">Ограничения времени и объема</span>".<br />
</a></div>

<div style="text-align: justify;">
<h3><a name="p11.3.5">Закладка "Анонимный FTP"</a></h3>

</div>

<div style="text-align: center;"><a name="p11.3.5"><img src="img/ftpsettings4.png" alt="ftpsettings4.png" /><br />
</a></div>
<a name="p11.3.5"><br />
</a><div style="text-align: justify;"><a name="p11.3.5">Функция анонимного FTP-сервера
позволяет огранизовать доступ к FTP-серверу без пароля. Если анонимный
сервер включен, то пользователи могут подключаться к нему от имени
"anonymous". В этом случае, фактически подключение будет происходить от
имени пользователя, указанного в поле "<span style="font-weight: bold;">Анонимный пользователь</span>" в этом
окне и клиент будет попадать в его домашнюю папку и работать с данными
в соответствии с правами, которые для этого пользователя установлены.
Сервер будет накладывать на клиента ограничения, установленне на этой
закладке, а также ограничения, установленные на предыдущих закладках.
Параметры этой закладки аналогичны параметрам прошлых закладок, но
распространяются только на анонимных пользователей.<br />
</a></div>

<div style="text-align: justify;">
<h3><a name="p11.3.6">Закладка "Монитор"</a></h3>

</div>

<div style="text-align: justify;"><a name="p11.3.6">На этой закладке можно наблюдать за
пользователями, которые в данный момент подключены к серверу и за
операциями, которые они в данный момент выполняют.<br />
</a></div>
<a name="p11.3.6"><br />
</a><div style="text-align: center;"><a name="p11.3.6"><img src="img/ftpsettings5.png" alt="ftpsettings5.png" /><br />
</a></div>
<a name="p11.3.6"><br />
</a><div style="text-align: justify;"><a name="p11.3.6">В списке "<span style="font-weight: bold;">Пользователь</span>"
находятся пользователи, подключенные к FTP-серверу в данный момент.
При выборе пользователя из списка, таблица заполнится информацией о
соединениях, которые у него открыты в данный момент. Пользователь может
подключаться одновременно с нескольких хостов и выполнять определенное
время различные операции. Вся эта информация отражена в таблице,
состоящей из следующих колонок:<br />
</a></div>

<ul>
<a name="p11.3.6">  </a><li><span style="font-weight: bold;"><a name="p11.3.6">Имя хоста</a></span><a name="p11.3.6"> - IP-адрес или имя хоста, с которого пользователь открыл данное соединение</a></li>
<a name="p11.3.6">  </a><li><span style="font-weight: bold;"><a name="p11.3.6">Операция</a></span><a name="p11.3.6"> - операция,
которую пользователь выполняет в данный момент. Может принимать одно из
трех значений: простаивает, передает и принимает</a></li>
<a name="p11.3.6">  </a><li><span style="font-weight: bold;"><a name="p11.3.6">Продолжительность</a></span><a name="p11.3.6"> - продолжительность операции</a></li>
<a name="p11.3.6">  </a><li><span style="font-weight: bold;"><a name="p11.3.6">Подробности</a></span><a name="p11.3.6"> - информация
о выполняемой операции. Значение зависит от типа операции. Для операции
"простаивает" в этом поле отображается путь к папке, в которой
пользователь находится в данный момент. Для операции типа "передает" в
этом поле отображается файл, который пользователь закачивает и папка, в
которую он закачивает этот файл, а также скорость передачи этого файла.
Для операции типа "принимает" в этой колонке отображается путь и имя
файла, который пользователь в данный момент скачивает с сервера, а
также скорость приема и процент выполнения этой операции.</a></li>
</ul>
<div style="text-align: justify;"><a name="p11.3.6">В любой момент можно обновить список пользователей и таблицу, нажав кнопку <img src="img/refreshbtn.png" alt="refreshbtn.png" />. <br />
</a></div>
<div style="text-align: justify;"><a name="p11.3.6">Вы можете отключить любого пользователя от FTP-сервера, выбрав его из списка и нажав кнопку <img src="img/deletebtn.png" alt="deletebtn.png" />.<br />
</a></div>

<div style="text-align: justify;">
<h3><a name="p11.3.7">Сохранение изменений</a></h3>

</div>

<div style="text-align: justify;"><a name="p11.3.7">Если вы изменили значения каких-либо параметров в этом окне, в его заголовке, после надписи "<span style="font-style: italic;">FTP-сервер</span>"
появится символ "*" (звездочка), символизирующий тот факт, что данные
были изменены и нужно сохранить эти изменения. При нажатии на кнопку "<span style="font-weight: bold;">Сохранить</span>",
происходит сохранение изменений и после завершения этой операции
звездочка должна исчезнуть. При сохранении происходит перезапуск
сервера proftpd. При этом разрываются все активные соединения. Имейте
это в виду перед тем как сохраняться. Возможно с помощью закладки "<span style="font-weight: bold;">Монитор</span>" стоит дождаться, пока пользователи завершат прием или передачу файлов.<br />
</a></div>
<a name="p11.3.7"><br />
</a><div style="text-align: justify;"><a name="p11.3.7">После сохранения изменений можно закрыть окно с помощью кнопки "<span style="font-weight: bold;">Закрыть</span>".<br />
</a></div>
</body></html>