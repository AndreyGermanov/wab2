<!-- block=header -->
<body bgcolor="#FFFFFF">
<div id="mailbox_div">
<table id="mailbox_table" cellpadding="0" cellspacing="1" width="100%" height="100%">
	<tr valign="top">
		<td class="inner">
    	    {:include {tabset_id}_up,,$object->module_id='{module_id}';$object->item='{object_id}';$object->window_id="{window_id}";$object->tabs_string='{tabs_string}';$object->active_tab='{active_tab}'; :}
		</td>		
	</tr>
<!-- block=main -->
	<tr valign="top" style="width:100%;height:100%;display:" id="main">
	<td class="inner" style="width:100%;height:100%">
		<table cellpadding="0" cellspacing="1" width="100%" height="100%">
		    <tr style="display:{displayStyle}">
		        <td class="inner">Имя:</td>
		        <td class="inner">
		            <input class="wide" id="name" size="7" type="text" value="{name}">
		            <input id="old_name" type="hidden" value="{name}">
		        	<input id="authType" type="hidden" value="{authType}"/>
		        </td>
		    </tr>
		    <tr valign="top" style="display:{displayStyle}">
		        <td class="inner" rowspan="2">Пароль:</td><td class="inner">
		            <input class="wide" type="password" value="{password}" id="password">
		            <input type="hidden" id="old_password" value="{password}">
		        </td>
		    </tr>
		    <tr valign="top" style="display:{displayStyle}">
		        <td class="inner"><input type="password" class="wide" id="password1" value="{password}"></td>
		    </tr>
		    <tr valign="top">
		        <td class="inner">Тема оформления:</td>
		            <td class="inner">
		                <select id="skin" class="wide" collection="{skins}" value="{skin}"></select>
		                <input type="hidden" id="old_skin" value="{skin}">
		            </td>
		    </tr>
		    <tr valign="top">
		        <td class="inner">Цвет фона:</td>
		        <td class="inner">
			        <table width="100%" cellpadding="0" cellspacing="0">
			        	<tr valign="top">
				            <td class="inner" width="100%">
				            	<Control id="wabBackgroundColor" regs="^[0-9A-Fa-f]{0,6}$" width="100%" type="{wabBackgroundColor_type}" value="{wabBackgroundColor}" selectClass="ColorSelectWindow"></Control>
				            </td>
				            <td class="inner" style="width:100px;background-color:#{wabBackgroundColor}" id="wabBackgroundTest">&nbsp;&nbsp;&nbsp;&nbsp;</td>
			        	</tr>		        
			        </table>
		        </td>
		    </tr>
		    <tr valign="top">
		        <td class="inner">Интерфейс:</td>
		            <td class="inner">
		            	<Control id="interface" class="wide" type="list,{interfacesList}" value="{interface}"></Control> 
		            </td>
		    </tr>
		    <tr valign="top">
		        <td class="inner">Язык интерфейса:</td>
		            <td class="inner">
		                <select id="language" class="wide" collection="{languages}" value="{language}"></select>
		                <input type="hidden" id="old_language" value="{language}">
		            </td>
		    </tr>
			<tr valign="top">
				<td class="inner" colspan="2" style="height:100%">
					Роли:<br/>
		            {:include {rolesTable},,$object->parent_object_id='{object_id}';$object->opener_object='{object_id}';$object->window_id='{window_id}';$object->metadataArray='userconfig';$object->arrayField='roles';:}			
				</td>
			</tr>
			<tr valign="top">
				<td class="inner" colspan="2" style="height:100%">
					Модули:<br/>
		            {:include {modulesTable},,$object->parent_object_id='{object_id}';$object->opener_object='{object_id}';$object->window_id='{window_id}';$object->metadataArray='userconfig';$object->arrayField='modules';:}			
				</td>
			</tr>
		    <tr valign="top" style="height:100%;width:100%">
		    	<td class="inner">&nbsp;</td>
		    </tr>
		</table>
	</td>
	</tr>
<!-- block=system -->
	<tr valign="top" style="width:100%;height:100%;display:none" id="system">
		<td class="inner">
   	    	{:include {appconfigTab},,$object->module_id='{module_id}';$object->showButtons=false; :}	
		</td>
	</tr>		
<!-- block=modulesHeader -->
	<tr valign="top" style="width:100%;height:100%;display:none" id="modules">
		<td class="inner">
			<table cellpadding="0" cellspacing="1" width="100%" height="100%">
				<tr valign="top">
					<td class="inner">
			   	    	{:include {modulesTabset_id}_up,,$object->module_id='{module_id}';$object->item='{object_id}';$object->window_id="{window_id}";$object->tabs_string='{modulesTabsString}';$object->active_tab='{modulesActiveTab}'; :}
					</td>
				</tr>	
<!-- block=moduleRow -->
				<tr valign="top" style="width:100%;height:100%;display:{moduleDisplay}" id="{moduleTabId}">
					<td class="inner">
			   	    	{:include {moduleTab},,$object->module_id='{module_id}';$object->showButtons=false; :}	
					</td>
				</tr>
<!-- block=modulesFooter -->
			</table>	
		</td>
	</tr>			
<!-- block=activity -->
	<tr valign="top" style="width:100%;height:100%;display:none" id="activity">
		<td class="inner">
   	    	<table cellpadding="0" cellspacing="1" width="100%" height="100%">
   	    		<tr valign="top">
   	    			<td class="inner" nowrap="true">
   	    				Время последнего подключения
   	    			</td>
   	    			<td class="inner" colspan="2" style="width:100%">
   	    				{logon_time_string}
   	    			</td>
   	    		</tr>   	    		
   	    		<tr valign="top">
   	    			<td class="inner"  nowrap="true">
   	    				Работает в данный момент
   	    			</td>
   	    			<td class="inner" nowrap="true">
   	    				<Control type="static" id="isUserActive" value="{isActive}" calcAlgo="isUserActive"></Control>
   	    			</td>
   	    			<td class="inner" style="width:100%"">   	    			
   	    				<input type="button" id="disconnectUser" value="  {banButtonText}  ">
   	    			</td>
   	    		</tr>
   	    		<tr valign="top">
   	    			<td class="inner"  nowrap="true">
   	    				Время активности
   	    			</td>
   	    			<td class="inner" nowrap="true">
   	    				<Control type="static" id="activeDuration" calcAlgo="getUserActivityTime" value="{active_duration}"></Control>
   	    			</td>
   	    			<td class="inner" style="width:100%">   	    			
   	    				<input type="button" id="refreshDuration" value="  Обновить  ">
   	    			</td>
   	    		</tr>
   	    		<tr valign="top">
   	    			<td colspan="3" class="inner">
   	    				Используемые объекты
   	    			</td>
   	    		</tr>
   	    		<tr valign="top" style="height:100%">
   	    			<td colspan="3" class="inner" width="100%">
            			{:include BlockedObjectsTable_{module_id}_{name},,$object->window_id='{window_id}';$object->parent_object_id='{object_id}';$object->userName='{name}'; :}
   	    			</td>
   	    		</tr>
   	    	</table>	
		</td>
	</tr>		
<!-- block=footer -->				
    <tr valign="bottom">
        <td class="inner" valign="bottom" colspan="2">
            <div align="right">
            	<input class="but" type="button" id="OK" value="  OK  ">&nbsp;&nbsp;
            	<input class="but" type="button" id="cancel" value=" Отмена ">&nbsp;&nbsp;
	        	<input class="but" type="button" id="help" value=" Помощь ">
	        </div>
        </td>
    </tr>
</table>
</div>